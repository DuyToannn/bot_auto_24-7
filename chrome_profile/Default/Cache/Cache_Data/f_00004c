const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Index-BIP3rPrg.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Index-BLKDDkec.css","assets/CreateOrderView-D-P6s3jr.js","assets/CreateOrderView-CKglV2U4.css"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ec(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ke={},Vs=[],nn=()=>{},Y_=()=>!1,ro=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Cc=e=>e.startsWith("onUpdate:"),ft=Object.assign,Oc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},X_=Object.prototype.hasOwnProperty,je=(e,t)=>X_.call(e,t),Ce=Array.isArray,qs=e=>si(e)==="[object Map]",Gh=e=>si(e)==="[object Set]",Cu=e=>si(e)==="[object Date]",Ae=e=>typeof e=="function",et=e=>typeof e=="string",an=e=>typeof e=="symbol",ze=e=>e!==null&&typeof e=="object",jh=e=>(ze(e)||Ae(e))&&Ae(e.then)&&Ae(e.catch),$h=Object.prototype.toString,si=e=>$h.call(e),Q_=e=>si(e).slice(8,-1),Wh=e=>si(e)==="[object Object]",wc=e=>et(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Nr=Ec(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),io=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Z_=/-(\w)/g,Jt=io(e=>e.replace(Z_,(t,n)=>n?n.toUpperCase():"")),eb=/\B([A-Z])/g,rs=io(e=>e.replace(eb,"-$1").toLowerCase()),oo=io(e=>e.charAt(0).toUpperCase()+e.slice(1)),oa=io(e=>e?`on${oo(e)}`:""),Xn=(e,t)=>!Object.is(e,t),ki=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Vh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},tb=e=>{const t=parseFloat(e);return isNaN(t)?e:t},nb=e=>{const t=et(e)?Number(e):NaN;return isNaN(t)?e:t};let Ou;const ao=()=>Ou||(Ou=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Sc(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=et(r)?ob(r):Sc(r);if(o)for(const c in o)t[c]=o[c]}return t}else if(et(e)||ze(e))return e}const sb=/;(?![^(]*\))/g,rb=/:([^]+)/,ib=/\/\*[^]*?\*\//g;function ob(e){const t={};return e.replace(ib,"").split(sb).forEach(n=>{if(n){const r=n.split(rb);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Tc(e){let t="";if(et(e))t=e;else if(Ce(e))for(let n=0;n<e.length;n++){const r=Tc(e[n]);r&&(t+=r+" ")}else if(ze(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ab="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cb=Ec(ab);function qh(e){return!!e||e===""}function lb(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Gi(e[r],t[r]);return n}function Gi(e,t){if(e===t)return!0;let n=Cu(e),r=Cu(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=an(e),r=an(t),n||r)return e===t;if(n=Ce(e),r=Ce(t),n||r)return n&&r?lb(e,t):!1;if(n=ze(e),r=ze(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,c=Object.keys(t).length;if(o!==c)return!1;for(const l in e){const f=e.hasOwnProperty(l),d=t.hasOwnProperty(l);if(f&&!d||!f&&d||!Gi(e[l],t[l]))return!1}}return String(e)===String(t)}const Kh=e=>!!(e&&e.__v_isRef===!0),ub=e=>et(e)?e:e==null?"":Ce(e)||ze(e)&&(e.toString===$h||!Ae(e.toString))?Kh(e)?ub(e.value):JSON.stringify(e,zh,2):String(e),zh=(e,t)=>Kh(t)?zh(e,t.value):qs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o],c)=>(n[aa(r,c)+" =>"]=o,n),{})}:Gh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>aa(n))}:an(t)?aa(t):ze(t)&&!Ce(t)&&!Wh(t)?String(t):t,aa=(e,t="")=>{var n;return an(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let It;class Jh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=It,!t&&It&&(this.index=(It.scopes||(It.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=It;try{return It=this,t()}finally{It=n}}}on(){It=this}off(){It=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Rc(e){return new Jh(e)}function Yh(){return It}function fb(e,t=!1){It&&It.cleanups.push(e)}let Ye;const ca=new WeakSet;class Xh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,It&&It.active&&It.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ca.has(this)&&(ca.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Zh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wu(this),ed(this);const t=Ye,n=sn;Ye=this,sn=!0;try{return this.fn()}finally{td(this),Ye=t,sn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Pc(t);this.deps=this.depsTail=void 0,wu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ca.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ia(this)&&this.run()}get dirty(){return Ia(this)}}let Qh=0,xr,Dr;function Zh(e,t=!1){if(e.flags|=8,t){e.next=Dr,Dr=e;return}e.next=xr,xr=e}function Ac(){Qh++}function Ic(){if(--Qh>0)return;if(Dr){let t=Dr;for(Dr=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;xr;){let t=xr;for(xr=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function ed(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function td(e){let t,n=e.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),Pc(r),hb(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}e.deps=t,e.depsTail=n}function Ia(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(nd(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function nd(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Wr))return;e.globalVersion=Wr;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ia(e)){e.flags&=-3;return}const n=Ye,r=sn;Ye=e,sn=!0;try{ed(e);const o=e.fn(e._value);(t.version===0||Xn(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Ye=n,sn=r,td(e),e.flags&=-3}}function Pc(e,t=!1){const{dep:n,prevSub:r,nextSub:o}=e;if(r&&(r.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let c=n.computed.deps;c;c=c.nextDep)Pc(c,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function hb(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let sn=!0;const sd=[];function is(){sd.push(sn),sn=!1}function os(){const e=sd.pop();sn=e===void 0?!0:e}function wu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ye;Ye=void 0;try{t()}finally{Ye=n}}}let Wr=0;class db{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class kc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ye||!sn||Ye===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ye)n=this.activeLink=new db(Ye,this),Ye.deps?(n.prevDep=Ye.depsTail,Ye.depsTail.nextDep=n,Ye.depsTail=n):Ye.deps=Ye.depsTail=n,rd(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ye.depsTail,n.nextDep=void 0,Ye.depsTail.nextDep=n,Ye.depsTail=n,Ye.deps===n&&(Ye.deps=r)}return n}trigger(t){this.version++,Wr++,this.notify(t)}notify(t){Ac();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ic()}}}function rd(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)rd(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ji=new WeakMap,bs=Symbol(""),Pa=Symbol(""),Vr=Symbol("");function Ct(e,t,n){if(sn&&Ye){let r=ji.get(e);r||ji.set(e,r=new Map);let o=r.get(n);o||(r.set(n,o=new kc),o.map=r,o.key=n),o.track()}}function Mn(e,t,n,r,o,c){const l=ji.get(e);if(!l){Wr++;return}const f=d=>{d&&d.trigger()};if(Ac(),t==="clear")l.forEach(f);else{const d=Ce(e),g=d&&wc(n);if(d&&n==="length"){const y=Number(r);l.forEach((_,b)=>{(b==="length"||b===Vr||!an(b)&&b>=y)&&f(_)})}else switch((n!==void 0||l.has(void 0))&&f(l.get(n)),g&&f(l.get(Vr)),t){case"add":d?g&&f(l.get("length")):(f(l.get(bs)),qs(e)&&f(l.get(Pa)));break;case"delete":d||(f(l.get(bs)),qs(e)&&f(l.get(Pa)));break;case"set":qs(e)&&f(l.get(bs));break}}Ic()}function gb(e,t){const n=ji.get(e);return n&&n.get(t)}function xs(e){const t=Fe(e);return t===e?t:(Ct(t,"iterate",Vr),rn(e)?t:t.map(Pt))}function Lc(e){return Ct(e=Fe(e),"iterate",Vr),e}const pb={__proto__:null,[Symbol.iterator](){return la(this,Symbol.iterator,Pt)},concat(...e){return xs(this).concat(...e.map(t=>Ce(t)?xs(t):t))},entries(){return la(this,"entries",e=>(e[1]=Pt(e[1]),e))},every(e,t){return An(this,"every",e,t,void 0,arguments)},filter(e,t){return An(this,"filter",e,t,n=>n.map(Pt),arguments)},find(e,t){return An(this,"find",e,t,Pt,arguments)},findIndex(e,t){return An(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return An(this,"findLast",e,t,Pt,arguments)},findLastIndex(e,t){return An(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return An(this,"forEach",e,t,void 0,arguments)},includes(...e){return ua(this,"includes",e)},indexOf(...e){return ua(this,"indexOf",e)},join(e){return xs(this).join(e)},lastIndexOf(...e){return ua(this,"lastIndexOf",e)},map(e,t){return An(this,"map",e,t,void 0,arguments)},pop(){return Er(this,"pop")},push(...e){return Er(this,"push",e)},reduce(e,...t){return Su(this,"reduce",e,t)},reduceRight(e,...t){return Su(this,"reduceRight",e,t)},shift(){return Er(this,"shift")},some(e,t){return An(this,"some",e,t,void 0,arguments)},splice(...e){return Er(this,"splice",e)},toReversed(){return xs(this).toReversed()},toSorted(e){return xs(this).toSorted(e)},toSpliced(...e){return xs(this).toSpliced(...e)},unshift(...e){return Er(this,"unshift",e)},values(){return la(this,"values",Pt)}};function la(e,t,n){const r=Lc(e),o=r[t]();return r!==e&&!rn(e)&&(o._next=o.next,o.next=()=>{const c=o._next();return c.value&&(c.value=n(c.value)),c}),o}const mb=Array.prototype;function An(e,t,n,r,o,c){const l=Lc(e),f=l!==e&&!rn(e),d=l[t];if(d!==mb[t]){const _=d.apply(e,c);return f?Pt(_):_}let g=n;l!==e&&(f?g=function(_,b){return n.call(this,Pt(_),b,e)}:n.length>2&&(g=function(_,b){return n.call(this,_,b,e)}));const y=d.call(l,g,r);return f&&o?o(y):y}function Su(e,t,n,r){const o=Lc(e);let c=n;return o!==e&&(rn(e)?n.length>3&&(c=function(l,f,d){return n.call(this,l,f,d,e)}):c=function(l,f,d){return n.call(this,l,Pt(f),d,e)}),o[t](c,...r)}function ua(e,t,n){const r=Fe(e);Ct(r,"iterate",Vr);const o=r[t](...n);return(o===-1||o===!1)&&xc(n[0])?(n[0]=Fe(n[0]),r[t](...n)):o}function Er(e,t,n=[]){is(),Ac();const r=Fe(e)[t].apply(e,n);return Ic(),os(),r}const yb=Ec("__proto__,__v_isRef,__isVue"),id=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(an));function _b(e){an(e)||(e=String(e));const t=Fe(this);return Ct(t,"has",e),t.hasOwnProperty(e)}class od{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,c=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return c;if(n==="__v_raw")return r===(o?c?Ab:ud:c?ld:cd).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const l=Ce(t);if(!o){let d;if(l&&(d=pb[n]))return d;if(n==="hasOwnProperty")return _b}const f=Reflect.get(t,n,Ze(t)?t:r);return(an(n)?id.has(n):yb(n))||(o||Ct(t,"get",n),c)?f:Ze(f)?l&&wc(n)?f:f.value:ze(f)?o?hd(f):On(f):f}}class ad extends od{constructor(t=!1){super(!1,t)}set(t,n,r,o){let c=t[n];if(!this._isShallow){const d=Os(c);if(!rn(r)&&!Os(r)&&(c=Fe(c),r=Fe(r)),!Ce(t)&&Ze(c)&&!Ze(r))return d?!1:(c.value=r,!0)}const l=Ce(t)&&wc(n)?Number(n)<t.length:je(t,n),f=Reflect.set(t,n,r,Ze(t)?t:o);return t===Fe(o)&&(l?Xn(r,c)&&Mn(t,"set",n,r):Mn(t,"add",n,r)),f}deleteProperty(t,n){const r=je(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&r&&Mn(t,"delete",n,void 0),o}has(t,n){const r=Reflect.has(t,n);return(!an(n)||!id.has(n))&&Ct(t,"has",n),r}ownKeys(t){return Ct(t,"iterate",Ce(t)?"length":bs),Reflect.ownKeys(t)}}class bb extends od{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const vb=new ad,Eb=new bb,Cb=new ad(!0);const ka=e=>e,Ei=e=>Reflect.getPrototypeOf(e);function Ob(e,t,n){return function(...r){const o=this.__v_raw,c=Fe(o),l=qs(c),f=e==="entries"||e===Symbol.iterator&&l,d=e==="keys"&&l,g=o[e](...r),y=n?ka:t?La:Pt;return!t&&Ct(c,"iterate",d?Pa:bs),{next(){const{value:_,done:b}=g.next();return b?{value:_,done:b}:{value:f?[y(_[0]),y(_[1])]:y(_),done:b}},[Symbol.iterator](){return this}}}}function Ci(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function wb(e,t){const n={get(o){const c=this.__v_raw,l=Fe(c),f=Fe(o);e||(Xn(o,f)&&Ct(l,"get",o),Ct(l,"get",f));const{has:d}=Ei(l),g=t?ka:e?La:Pt;if(d.call(l,o))return g(c.get(o));if(d.call(l,f))return g(c.get(f));c!==l&&c.get(o)},get size(){const o=this.__v_raw;return!e&&Ct(Fe(o),"iterate",bs),Reflect.get(o,"size",o)},has(o){const c=this.__v_raw,l=Fe(c),f=Fe(o);return e||(Xn(o,f)&&Ct(l,"has",o),Ct(l,"has",f)),o===f?c.has(o):c.has(o)||c.has(f)},forEach(o,c){const l=this,f=l.__v_raw,d=Fe(f),g=t?ka:e?La:Pt;return!e&&Ct(d,"iterate",bs),f.forEach((y,_)=>o.call(c,g(y),g(_),l))}};return ft(n,e?{add:Ci("add"),set:Ci("set"),delete:Ci("delete"),clear:Ci("clear")}:{add(o){!t&&!rn(o)&&!Os(o)&&(o=Fe(o));const c=Fe(this);return Ei(c).has.call(c,o)||(c.add(o),Mn(c,"add",o,o)),this},set(o,c){!t&&!rn(c)&&!Os(c)&&(c=Fe(c));const l=Fe(this),{has:f,get:d}=Ei(l);let g=f.call(l,o);g||(o=Fe(o),g=f.call(l,o));const y=d.call(l,o);return l.set(o,c),g?Xn(c,y)&&Mn(l,"set",o,c):Mn(l,"add",o,c),this},delete(o){const c=Fe(this),{has:l,get:f}=Ei(c);let d=l.call(c,o);d||(o=Fe(o),d=l.call(c,o)),f&&f.call(c,o);const g=c.delete(o);return d&&Mn(c,"delete",o,void 0),g},clear(){const o=Fe(this),c=o.size!==0,l=o.clear();return c&&Mn(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Ob(o,e,t)}),n}function Mc(e,t){const n=wb(e,t);return(r,o,c)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(je(n,o)&&o in r?n:r,o,c)}const Sb={get:Mc(!1,!1)},Tb={get:Mc(!1,!0)},Rb={get:Mc(!0,!1)};const cd=new WeakMap,ld=new WeakMap,ud=new WeakMap,Ab=new WeakMap;function Ib(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pb(e){return e.__v_skip||!Object.isExtensible(e)?0:Ib(Q_(e))}function On(e){return Os(e)?e:Nc(e,!1,vb,Sb,cd)}function fd(e){return Nc(e,!1,Cb,Tb,ld)}function hd(e){return Nc(e,!0,Eb,Rb,ud)}function Nc(e,t,n,r,o){if(!ze(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const c=o.get(e);if(c)return c;const l=Pb(e);if(l===0)return e;const f=new Proxy(e,l===2?r:n);return o.set(e,f),f}function vs(e){return Os(e)?vs(e.__v_raw):!!(e&&e.__v_isReactive)}function Os(e){return!!(e&&e.__v_isReadonly)}function rn(e){return!!(e&&e.__v_isShallow)}function xc(e){return e?!!e.__v_raw:!1}function Fe(e){const t=e&&e.__v_raw;return t?Fe(t):e}function Dc(e){return!je(e,"__v_skip")&&Object.isExtensible(e)&&Vh(e,"__v_skip",!0),e}const Pt=e=>ze(e)?On(e):e,La=e=>ze(e)?hd(e):e;function Ze(e){return e?e.__v_isRef===!0:!1}function He(e){return dd(e,!1)}function Fc(e){return dd(e,!0)}function dd(e,t){return Ze(e)?e:new kb(e,t)}class kb{constructor(t,n){this.dep=new kc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Fe(t),this._value=n?t:Pt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||rn(t)||Os(t);t=r?t:Fe(t),Xn(t,n)&&(this._rawValue=t,this._value=r?t:Pt(t),this.dep.trigger())}}function on(e){return Ze(e)?e.value:e}const Lb={get:(e,t,n)=>t==="__v_raw"?e:on(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return Ze(o)&&!Ze(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function gd(e){return vs(e)?e:new Proxy(e,Lb)}function Mb(e){const t=Ce(e)?new Array(e.length):{};for(const n in e)t[n]=pd(e,n);return t}class Nb{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return gb(Fe(this._object),this._key)}}class xb{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function NR(e,t,n){return Ze(e)?e:Ae(e)?new xb(e):ze(e)&&arguments.length>1?pd(e,t,n):He(e)}function pd(e,t,n){const r=e[t];return Ze(r)?r:new Nb(e,t,n)}class Db{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new kc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ye!==this)return Zh(this,!0),!0}get value(){const t=this.dep.track();return nd(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Fb(e,t,n=!1){let r,o;return Ae(e)?r=e:(r=e.get,o=e.set),new Db(r,o,n)}const Oi={},$i=new WeakMap;let ms;function Ub(e,t=!1,n=ms){if(n){let r=$i.get(n);r||$i.set(n,r=[]),r.push(e)}}function Bb(e,t,n=Ke){const{immediate:r,deep:o,once:c,scheduler:l,augmentJob:f,call:d}=n,g=C=>o?C:rn(C)||o===!1||o===0?Nn(C,1):Nn(C);let y,_,b,w,R=!1,N=!1;if(Ze(e)?(_=()=>e.value,R=rn(e)):vs(e)?(_=()=>g(e),R=!0):Ce(e)?(N=!0,R=e.some(C=>vs(C)||rn(C)),_=()=>e.map(C=>{if(Ze(C))return C.value;if(vs(C))return g(C);if(Ae(C))return d?d(C,2):C()})):Ae(e)?t?_=d?()=>d(e,2):e:_=()=>{if(b){is();try{b()}finally{os()}}const C=ms;ms=y;try{return d?d(e,3,[w]):e(w)}finally{ms=C}}:_=nn,t&&o){const C=_,$=o===!0?1/0:o;_=()=>Nn(C(),$)}const F=Yh(),U=()=>{y.stop(),F&&F.active&&Oc(F.effects,y)};if(c&&t){const C=t;t=(...$)=>{C(...$),U()}}let q=N?new Array(e.length).fill(Oi):Oi;const x=C=>{if(!(!(y.flags&1)||!y.dirty&&!C))if(t){const $=y.run();if(o||R||(N?$.some((B,K)=>Xn(B,q[K])):Xn($,q))){b&&b();const B=ms;ms=y;try{const K=[$,q===Oi?void 0:N&&q[0]===Oi?[]:q,w];d?d(t,3,K):t(...K),q=$}finally{ms=B}}}else y.run()};return f&&f(x),y=new Xh(_),y.scheduler=l?()=>l(x,!1):x,w=C=>Ub(C,!1,y),b=y.onStop=()=>{const C=$i.get(y);if(C){if(d)d(C,4);else for(const $ of C)$();$i.delete(y)}},t?r?x(!0):q=y.run():l?l(x.bind(null,!0),!0):y.run(),U.pause=y.pause.bind(y),U.resume=y.resume.bind(y),U.stop=U,U}function Nn(e,t=1/0,n){if(t<=0||!ze(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ze(e))Nn(e.value,t,n);else if(Ce(e))for(let r=0;r<e.length;r++)Nn(e[r],t,n);else if(Gh(e)||qs(e))e.forEach(r=>{Nn(r,t,n)});else if(Wh(e)){for(const r in e)Nn(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Nn(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ri(e,t,n,r){try{return r?e(...r):e()}catch(o){co(o,t,n)}}function cn(e,t,n,r){if(Ae(e)){const o=ri(e,t,n,r);return o&&jh(o)&&o.catch(c=>{co(c,t,n)}),o}if(Ce(e)){const o=[];for(let c=0;c<e.length;c++)o.push(cn(e[c],t,n,r));return o}}function co(e,t,n,r=!0){const o=t?t.vnode:null,{errorHandler:c,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Ke;if(t){let f=t.parent;const d=t.proxy,g=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const y=f.ec;if(y){for(let _=0;_<y.length;_++)if(y[_](e,d,g)===!1)return}f=f.parent}if(c){is(),ri(c,null,10,[e,d,g]),os();return}}Hb(e,n,o,r,l)}function Hb(e,t,n,r=!0,o=!1){if(o)throw e}const kt=[];let vn=-1;const Ks=[];let Kn=null,Bs=0;const md=Promise.resolve();let Wi=null;function Zn(e){const t=Wi||md;return e?t.then(this?e.bind(this):e):t}function Gb(e){let t=vn+1,n=kt.length;for(;t<n;){const r=t+n>>>1,o=kt[r],c=qr(o);c<e||c===e&&o.flags&2?t=r+1:n=r}return t}function Uc(e){if(!(e.flags&1)){const t=qr(e),n=kt[kt.length-1];!n||!(e.flags&2)&&t>=qr(n)?kt.push(e):kt.splice(Gb(t),0,e),e.flags|=1,yd()}}function yd(){Wi||(Wi=md.then(bd))}function jb(e){Ce(e)?Ks.push(...e):Kn&&e.id===-1?Kn.splice(Bs+1,0,e):e.flags&1||(Ks.push(e),e.flags|=1),yd()}function Tu(e,t,n=vn+1){for(;n<kt.length;n++){const r=kt[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;kt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function _d(e){if(Ks.length){const t=[...new Set(Ks)].sort((n,r)=>qr(n)-qr(r));if(Ks.length=0,Kn){Kn.push(...t);return}for(Kn=t,Bs=0;Bs<Kn.length;Bs++){const n=Kn[Bs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Kn=null,Bs=0}}const qr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function bd(e){try{for(vn=0;vn<kt.length;vn++){const t=kt[vn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ri(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;vn<kt.length;vn++){const t=kt[vn];t&&(t.flags&=-2)}vn=-1,kt.length=0,_d(),Wi=null,(kt.length||Ks.length)&&bd()}}let lt=null,vd=null;function Vi(e){const t=lt;return lt=e,vd=e&&e.type.__scopeId||null,t}function $b(e,t=lt,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&Hu(-1);const c=Vi(t);let l;try{l=e(...o)}finally{Vi(c),r._d&&Hu(1)}return l};return r._n=!0,r._c=!0,r._d=!0,r}function Ed(e,t){if(lt===null)return e;const n=po(lt),r=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[c,l,f,d=Ke]=t[o];c&&(Ae(c)&&(c={mounted:c,updated:c}),c.deep&&Nn(l),r.push({dir:c,instance:n,value:l,oldValue:void 0,arg:f,modifiers:d}))}return e}function fs(e,t,n,r){const o=e.dirs,c=t&&t.dirs;for(let l=0;l<o.length;l++){const f=o[l];c&&(f.oldValue=c[l].value);let d=f.dir[r];d&&(is(),cn(d,n,8,[e.el,f,e,t]),os())}}const Cd=Symbol("_vte"),Od=e=>e.__isTeleport,Fr=e=>e&&(e.disabled||e.disabled===""),Ru=e=>e&&(e.defer||e.defer===""),Au=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Iu=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Ma=(e,t)=>{const n=e&&e.to;return et(n)?t?t(n):null:n},wd={name:"Teleport",__isTeleport:!0,process(e,t,n,r,o,c,l,f,d,g){const{mc:y,pc:_,pbc:b,o:{insert:w,querySelector:R,createText:N,createComment:F}}=g,U=Fr(t.props);let{shapeFlag:q,children:x,dynamicChildren:C}=t;if(e==null){const $=t.el=N(""),B=t.anchor=N("");w($,n,r),w(B,n,r);const K=(D,le)=>{q&16&&(o&&o.isCE&&(o.ce._teleportTarget=D),y(x,D,le,o,c,l,f,d))},Y=()=>{const D=t.target=Ma(t.props,R),le=Td(D,t,N,w);D&&(l!=="svg"&&Au(D)?l="svg":l!=="mathml"&&Iu(D)&&(l="mathml"),U||(K(D,le),Li(t,!1)))};U&&(K(n,B),Li(t,!0)),Ru(t.props)?At(()=>{Y(),t.el.__isMounted=!0},c):Y()}else{if(Ru(t.props)&&!e.el.__isMounted){At(()=>{wd.process(e,t,n,r,o,c,l,f,d,g),delete e.el.__isMounted},c);return}t.el=e.el,t.targetStart=e.targetStart;const $=t.anchor=e.anchor,B=t.target=e.target,K=t.targetAnchor=e.targetAnchor,Y=Fr(e.props),D=Y?n:B,le=Y?$:K;if(l==="svg"||Au(B)?l="svg":(l==="mathml"||Iu(B))&&(l="mathml"),C?(b(e.dynamicChildren,C,D,o,c,l,f),Gc(e,t,!0)):d||_(e,t,D,le,o,c,l,f,!1),U)Y?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):wi(t,n,$,g,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const p=t.target=Ma(t.props,R);p&&wi(t,p,null,g,0)}else Y&&wi(t,B,K,g,1);Li(t,U)}},remove(e,t,n,{um:r,o:{remove:o}},c){const{shapeFlag:l,children:f,anchor:d,targetStart:g,targetAnchor:y,target:_,props:b}=e;if(_&&(o(g),o(y)),c&&o(d),l&16){const w=c||!Fr(b);for(let R=0;R<f.length;R++){const N=f[R];r(N,t,n,w,!!N.dynamicChildren)}}},move:wi,hydrate:Wb};function wi(e,t,n,{o:{insert:r},m:o},c=2){c===0&&r(e.targetAnchor,t,n);const{el:l,anchor:f,shapeFlag:d,children:g,props:y}=e,_=c===2;if(_&&r(l,t,n),(!_||Fr(y))&&d&16)for(let b=0;b<g.length;b++)o(g[b],t,n,2);_&&r(f,t,n)}function Wb(e,t,n,r,o,c,{o:{nextSibling:l,parentNode:f,querySelector:d,insert:g,createText:y}},_){const b=t.target=Ma(t.props,d);if(b){const w=Fr(t.props),R=b._lpa||b.firstChild;if(t.shapeFlag&16)if(w)t.anchor=_(l(e),t,f(e),n,r,o,c),t.targetStart=R,t.targetAnchor=R&&l(R);else{t.anchor=l(e);let N=R;for(;N;){if(N&&N.nodeType===8){if(N.data==="teleport start anchor")t.targetStart=N;else if(N.data==="teleport anchor"){t.targetAnchor=N,b._lpa=t.targetAnchor&&l(t.targetAnchor);break}}N=l(N)}t.targetAnchor||Td(b,t,y,g),_(R&&l(R),t,b,n,r,o,c)}Li(t,w)}return t.anchor&&l(t.anchor)}const Sd=wd;function Li(e,t){const n=e.ctx;if(n&&n.ut){let r,o;for(t?(r=e.el,o=e.anchor):(r=e.targetStart,o=e.targetAnchor);r&&r!==o;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Td(e,t,n,r){const o=t.targetStart=n(""),c=t.targetAnchor=n("");return o[Cd]=c,e&&(r(o,e),r(c,e)),c}const zn=Symbol("_leaveCb"),Si=Symbol("_enterCb");function Rd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ts(()=>{e.isMounted=!0}),ho(()=>{e.isUnmounting=!0}),e}const qt=[Function,Array],Ad={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:qt,onEnter:qt,onAfterEnter:qt,onEnterCancelled:qt,onBeforeLeave:qt,onLeave:qt,onAfterLeave:qt,onLeaveCancelled:qt,onBeforeAppear:qt,onAppear:qt,onAfterAppear:qt,onAppearCancelled:qt},Id=e=>{const t=e.subTree;return t.component?Id(t.component):t},Vb={name:"BaseTransition",props:Ad,setup(e,{slots:t}){const n=Ht(),r=Rd();return()=>{const o=t.default&&Bc(t.default(),!0);if(!o||!o.length)return;const c=Pd(o),l=Fe(e),{mode:f}=l;if(r.isLeaving)return fa(c);const d=Pu(c);if(!d)return fa(c);let g=Kr(d,l,r,n,_=>g=_);d.type!==Lt&&ws(d,g);let y=n.subTree&&Pu(n.subTree);if(y&&y.type!==Lt&&!ys(d,y)&&Id(n).type!==Lt){let _=Kr(y,l,r,n);if(ws(y,_),f==="out-in"&&d.type!==Lt)return r.isLeaving=!0,_.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete _.afterLeave,y=void 0},fa(c);f==="in-out"&&d.type!==Lt?_.delayLeave=(b,w,R)=>{const N=kd(r,y);N[String(y.key)]=y,b[zn]=()=>{w(),b[zn]=void 0,delete g.delayedLeave,y=void 0},g.delayedLeave=()=>{R(),delete g.delayedLeave,y=void 0}}:y=void 0}else y&&(y=void 0);return c}}};function Pd(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Lt){t=n;break}}return t}const qb=Vb;function kd(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Kr(e,t,n,r,o){const{appear:c,mode:l,persisted:f=!1,onBeforeEnter:d,onEnter:g,onAfterEnter:y,onEnterCancelled:_,onBeforeLeave:b,onLeave:w,onAfterLeave:R,onLeaveCancelled:N,onBeforeAppear:F,onAppear:U,onAfterAppear:q,onAppearCancelled:x}=t,C=String(e.key),$=kd(n,e),B=(D,le)=>{D&&cn(D,r,9,le)},K=(D,le)=>{const p=le[1];B(D,le),Ce(D)?D.every(v=>v.length<=1)&&p():D.length<=1&&p()},Y={mode:l,persisted:f,beforeEnter(D){let le=d;if(!n.isMounted)if(c)le=F||d;else return;D[zn]&&D[zn](!0);const p=$[C];p&&ys(e,p)&&p.el[zn]&&p.el[zn](),B(le,[D])},enter(D){let le=g,p=y,v=_;if(!n.isMounted)if(c)le=U||g,p=q||y,v=x||_;else return;let I=!1;const E=D[Si]=P=>{I||(I=!0,P?B(v,[D]):B(p,[D]),Y.delayedLeave&&Y.delayedLeave(),D[Si]=void 0)};le?K(le,[D,E]):E()},leave(D,le){const p=String(e.key);if(D[Si]&&D[Si](!0),n.isUnmounting)return le();B(b,[D]);let v=!1;const I=D[zn]=E=>{v||(v=!0,le(),E?B(N,[D]):B(R,[D]),D[zn]=void 0,$[p]===e&&delete $[p])};$[p]=e,w?K(w,[D,I]):I()},clone(D){const le=Kr(D,t,n,r,o);return o&&o(le),le}};return Y}function fa(e){if(lo(e))return e=es(e),e.children=null,e}function Pu(e){if(!lo(e))return Od(e.type)&&e.children?Pd(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Ae(n.default))return n.default()}}function ws(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ws(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Bc(e,t=!1,n){let r=[],o=0;for(let c=0;c<e.length;c++){let l=e[c];const f=n==null?l.key:String(n)+String(l.key!=null?l.key:c);l.type===mt?(l.patchFlag&128&&o++,r=r.concat(Bc(l.children,t,f))):(t||l.type!==Lt)&&r.push(f!=null?es(l,{key:f}):l)}if(o>1)for(let c=0;c<r.length;c++)r[c].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Mt(e,t){return Ae(e)?ft({name:e.name},t,{setup:e}):e}function Ld(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function qi(e,t,n,r,o=!1){if(Ce(e)){e.forEach((R,N)=>qi(R,t&&(Ce(t)?t[N]:t),n,r,o));return}if(zs(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&qi(e,t,n,r.component.subTree);return}const c=r.shapeFlag&4?po(r.component):r.el,l=o?null:c,{i:f,r:d}=e,g=t&&t.r,y=f.refs===Ke?f.refs={}:f.refs,_=f.setupState,b=Fe(_),w=_===Ke?()=>!1:R=>je(b,R);if(g!=null&&g!==d&&(et(g)?(y[g]=null,w(g)&&(_[g]=null)):Ze(g)&&(g.value=null)),Ae(d))ri(d,f,12,[l,y]);else{const R=et(d),N=Ze(d);if(R||N){const F=()=>{if(e.f){const U=R?w(d)?_[d]:y[d]:d.value;o?Ce(U)&&Oc(U,c):Ce(U)?U.includes(c)||U.push(c):R?(y[d]=[c],w(d)&&(_[d]=y[d])):(d.value=[c],e.k&&(y[e.k]=d.value))}else R?(y[d]=l,w(d)&&(_[d]=l)):N&&(d.value=l,e.k&&(y[e.k]=l))};l?(F.id=-1,At(F,n)):F()}}}ao().requestIdleCallback;ao().cancelIdleCallback;const zs=e=>!!e.type.__asyncLoader,lo=e=>e.type.__isKeepAlive;function uo(e,t){Md(e,"a",t)}function ii(e,t){Md(e,"da",t)}function Md(e,t,n=ht){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(fo(t,r,n),n){let o=n.parent;for(;o&&o.parent;)lo(o.parent.vnode)&&Kb(r,t,n,o),o=o.parent}}function Kb(e,t,n,r){const o=fo(t,e,r,!0);sr(()=>{Oc(r[t],o)},n)}function fo(e,t,n=ht,r=!1){if(n){const o=n[e]||(n[e]=[]),c=t.__weh||(t.__weh=(...l)=>{is();const f=ai(n),d=cn(t,n,e,l);return f(),os(),d});return r?o.unshift(c):o.push(c),c}}const Fn=e=>(t,n=ht)=>{(!Jr||e==="sp")&&fo(e,(...r)=>t(...r),n)},Nd=Fn("bm"),Ts=Fn("m"),zb=Fn("bu"),xd=Fn("u"),ho=Fn("bum"),sr=Fn("um"),Jb=Fn("sp"),Yb=Fn("rtg"),Xb=Fn("rtc");function Qb(e,t=ht){fo("ec",e,t)}const Dd="components";function xR(e,t){return Ud(Dd,e,!0,t)||e}const Fd=Symbol.for("v-ndc");function DR(e){return et(e)?Ud(Dd,e,!1)||e:e||Fd}function Ud(e,t,n=!0,r=!1){const o=lt||ht;if(o){const c=o.type;{const f=B0(c,!1);if(f&&(f===t||f===Jt(t)||f===oo(Jt(t))))return c}const l=ku(o[e]||c[e],t)||ku(o.appContext[e],t);return!l&&r?c:l}}function ku(e,t){return e&&(e[t]||e[Jt(t)]||e[oo(Jt(t))])}function FR(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(Ce(r))for(let o=0;o<r.length;o++)e[r[o].name]=r[o].fn;else r&&(e[r.name]=r.key?(...o)=>{const c=r.fn(...o);return c&&(c.key=r.key),c}:r.fn)}return e}function UR(e,t,n={},r,o){if(lt.ce||lt.parent&&zs(lt.parent)&&lt.parent.ce)return t!=="default"&&(n.name=t),zi(),Ji(mt,null,[ve("slot",n,r&&r())],64);let c=e[t];c&&c._c&&(c._d=!1),zi();const l=c&&Bd(c(n)),f=n.key||l&&l.key,d=Ji(mt,{key:(f&&!an(f)?f:`_${t}`)+(!l&&r?"_fb":"")},l||(r?r():[]),l&&e._===1?64:-2);return d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),c&&c._c&&(c._d=!0),d}function Bd(e){return e.some(t=>Ys(t)?!(t.type===Lt||t.type===mt&&!Bd(t.children)):!0)?e:null}const Na=e=>e?og(e)?po(e):Na(e.parent):null,Ur=ft(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Na(e.parent),$root:e=>Na(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>jd(e),$forceUpdate:e=>e.f||(e.f=()=>{Uc(e.update)}),$nextTick:e=>e.n||(e.n=Zn.bind(e.proxy)),$watch:e=>v0.bind(e)}),ha=(e,t)=>e!==Ke&&!e.__isScriptSetup&&je(e,t),Zb={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:c,accessCache:l,type:f,appContext:d}=e;let g;if(t[0]!=="$"){const w=l[t];if(w!==void 0)switch(w){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return c[t]}else{if(ha(r,t))return l[t]=1,r[t];if(o!==Ke&&je(o,t))return l[t]=2,o[t];if((g=e.propsOptions[0])&&je(g,t))return l[t]=3,c[t];if(n!==Ke&&je(n,t))return l[t]=4,n[t];xa&&(l[t]=0)}}const y=Ur[t];let _,b;if(y)return t==="$attrs"&&Ct(e.attrs,"get",""),y(e);if((_=f.__cssModules)&&(_=_[t]))return _;if(n!==Ke&&je(n,t))return l[t]=4,n[t];if(b=d.config.globalProperties,je(b,t))return b[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:c}=e;return ha(o,t)?(o[t]=n,!0):r!==Ke&&je(r,t)?(r[t]=n,!0):je(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(c[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:c}},l){let f;return!!n[l]||e!==Ke&&je(e,l)||ha(t,l)||(f=c[0])&&je(f,l)||je(r,l)||je(Ur,l)||je(o.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:je(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function BR(){return Hd().slots}function HR(){return Hd().attrs}function Hd(){const e=Ht();return e.setupContext||(e.setupContext=cg(e))}function Lu(e){return Ce(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let xa=!0;function e0(e){const t=jd(e),n=e.proxy,r=e.ctx;xa=!1,t.beforeCreate&&Mu(t.beforeCreate,e,"bc");const{data:o,computed:c,methods:l,watch:f,provide:d,inject:g,created:y,beforeMount:_,mounted:b,beforeUpdate:w,updated:R,activated:N,deactivated:F,beforeDestroy:U,beforeUnmount:q,destroyed:x,unmounted:C,render:$,renderTracked:B,renderTriggered:K,errorCaptured:Y,serverPrefetch:D,expose:le,inheritAttrs:p,components:v,directives:I,filters:E}=t;if(g&&t0(g,r,null),l)for(const j in l){const X=l[j];Ae(X)&&(r[j]=X.bind(n))}if(o){const j=o.call(n,n);ze(j)&&(e.data=On(j))}if(xa=!0,c)for(const j in c){const X=c[j],_e=Ae(X)?X.bind(n,n):Ae(X.get)?X.get.bind(n,n):nn,Ne=!Ae(X)&&Ae(X.set)?X.set.bind(n):nn,qe=$e({get:_e,set:Ne});Object.defineProperty(r,j,{enumerable:!0,configurable:!0,get:()=>qe.value,set:Me=>qe.value=Me})}if(f)for(const j in f)Gd(f[j],r,n,j);if(d){const j=Ae(d)?d.call(n):d;Reflect.ownKeys(j).forEach(X=>{Js(X,j[X])})}y&&Mu(y,e,"c");function ae(j,X){Ce(X)?X.forEach(_e=>j(_e.bind(n))):X&&j(X.bind(n))}if(ae(Nd,_),ae(Ts,b),ae(zb,w),ae(xd,R),ae(uo,N),ae(ii,F),ae(Qb,Y),ae(Xb,B),ae(Yb,K),ae(ho,q),ae(sr,C),ae(Jb,D),Ce(le))if(le.length){const j=e.exposed||(e.exposed={});le.forEach(X=>{Object.defineProperty(j,X,{get:()=>n[X],set:_e=>n[X]=_e})})}else e.exposed||(e.exposed={});$&&e.render===nn&&(e.render=$),p!=null&&(e.inheritAttrs=p),v&&(e.components=v),I&&(e.directives=I),D&&Ld(e)}function t0(e,t,n=nn){Ce(e)&&(e=Da(e));for(const r in e){const o=e[r];let c;ze(o)?"default"in o?c=Ut(o.from||r,o.default,!0):c=Ut(o.from||r):c=Ut(o),Ze(c)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:l=>c.value=l}):t[r]=c}}function Mu(e,t,n){cn(Ce(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Gd(e,t,n,r){let o=r.includes(".")?eg(n,r):()=>n[r];if(et(e)){const c=t[e];Ae(c)&&dt(o,c)}else if(Ae(e))dt(o,e.bind(n));else if(ze(e))if(Ce(e))e.forEach(c=>Gd(c,t,n,r));else{const c=Ae(e.handler)?e.handler.bind(n):t[e.handler];Ae(c)&&dt(o,c,e)}}function jd(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:c,config:{optionMergeStrategies:l}}=e.appContext,f=c.get(t);let d;return f?d=f:!o.length&&!n&&!r?d=t:(d={},o.length&&o.forEach(g=>Ki(d,g,l,!0)),Ki(d,t,l)),ze(t)&&c.set(t,d),d}function Ki(e,t,n,r=!1){const{mixins:o,extends:c}=t;c&&Ki(e,c,n,!0),o&&o.forEach(l=>Ki(e,l,n,!0));for(const l in t)if(!(r&&l==="expose")){const f=n0[l]||n&&n[l];e[l]=f?f(e[l],t[l]):t[l]}return e}const n0={data:Nu,props:xu,emits:xu,methods:Pr,computed:Pr,beforeCreate:Tt,created:Tt,beforeMount:Tt,mounted:Tt,beforeUpdate:Tt,updated:Tt,beforeDestroy:Tt,beforeUnmount:Tt,destroyed:Tt,unmounted:Tt,activated:Tt,deactivated:Tt,errorCaptured:Tt,serverPrefetch:Tt,components:Pr,directives:Pr,watch:r0,provide:Nu,inject:s0};function Nu(e,t){return t?e?function(){return ft(Ae(e)?e.call(this,this):e,Ae(t)?t.call(this,this):t)}:t:e}function s0(e,t){return Pr(Da(e),Da(t))}function Da(e){if(Ce(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Tt(e,t){return e?[...new Set([].concat(e,t))]:t}function Pr(e,t){return e?ft(Object.create(null),e,t):t}function xu(e,t){return e?Ce(e)&&Ce(t)?[...new Set([...e,...t])]:ft(Object.create(null),Lu(e),Lu(t??{})):t}function r0(e,t){if(!e)return t;if(!t)return e;const n=ft(Object.create(null),e);for(const r in t)n[r]=Tt(e[r],t[r]);return n}function $d(){return{app:null,config:{isNativeTag:Y_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let i0=0;function o0(e,t){return function(r,o=null){Ae(r)||(r=ft({},r)),o!=null&&!ze(o)&&(o=null);const c=$d(),l=new WeakSet,f=[];let d=!1;const g=c.app={_uid:i0++,_component:r,_props:o,_container:null,_context:c,_instance:null,version:G0,get config(){return c.config},set config(y){},use(y,..._){return l.has(y)||(y&&Ae(y.install)?(l.add(y),y.install(g,..._)):Ae(y)&&(l.add(y),y(g,..._))),g},mixin(y){return c.mixins.includes(y)||c.mixins.push(y),g},component(y,_){return _?(c.components[y]=_,g):c.components[y]},directive(y,_){return _?(c.directives[y]=_,g):c.directives[y]},mount(y,_,b){if(!d){const w=g._ceVNode||ve(r,o);return w.appContext=c,b===!0?b="svg":b===!1&&(b=void 0),e(w,y,b),d=!0,g._container=y,y.__vue_app__=g,po(w.component)}},onUnmount(y){f.push(y)},unmount(){d&&(cn(f,g._instance,16),e(null,g._container),delete g._container.__vue_app__)},provide(y,_){return c.provides[y]=_,g},runWithContext(y){const _=Es;Es=g;try{return y()}finally{Es=_}}};return g}}let Es=null;function Js(e,t){if(ht){let n=ht.provides;const r=ht.parent&&ht.parent.provides;r===n&&(n=ht.provides=Object.create(r)),n[e]=t}}function Ut(e,t,n=!1){const r=ht||lt;if(r||Es){const o=Es?Es._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Ae(t)?t.call(r&&r.proxy):t}}function a0(){return!!(ht||lt||Es)}const Wd={},Vd=()=>Object.create(Wd),qd=e=>Object.getPrototypeOf(e)===Wd;function c0(e,t,n,r=!1){const o={},c=Vd();e.propsDefaults=Object.create(null),Kd(e,t,o,c);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);n?e.props=r?o:fd(o):e.type.props?e.props=o:e.props=c,e.attrs=c}function l0(e,t,n,r){const{props:o,attrs:c,vnode:{patchFlag:l}}=e,f=Fe(o),[d]=e.propsOptions;let g=!1;if((r||l>0)&&!(l&16)){if(l&8){const y=e.vnode.dynamicProps;for(let _=0;_<y.length;_++){let b=y[_];if(go(e.emitsOptions,b))continue;const w=t[b];if(d)if(je(c,b))w!==c[b]&&(c[b]=w,g=!0);else{const R=Jt(b);o[R]=Fa(d,f,R,w,e,!1)}else w!==c[b]&&(c[b]=w,g=!0)}}}else{Kd(e,t,o,c)&&(g=!0);let y;for(const _ in f)(!t||!je(t,_)&&((y=rs(_))===_||!je(t,y)))&&(d?n&&(n[_]!==void 0||n[y]!==void 0)&&(o[_]=Fa(d,f,_,void 0,e,!0)):delete o[_]);if(c!==f)for(const _ in c)(!t||!je(t,_))&&(delete c[_],g=!0)}g&&Mn(e.attrs,"set","")}function Kd(e,t,n,r){const[o,c]=e.propsOptions;let l=!1,f;if(t)for(let d in t){if(Nr(d))continue;const g=t[d];let y;o&&je(o,y=Jt(d))?!c||!c.includes(y)?n[y]=g:(f||(f={}))[y]=g:go(e.emitsOptions,d)||(!(d in r)||g!==r[d])&&(r[d]=g,l=!0)}if(c){const d=Fe(n),g=f||Ke;for(let y=0;y<c.length;y++){const _=c[y];n[_]=Fa(o,d,_,g[_],e,!je(g,_))}}return l}function Fa(e,t,n,r,o,c){const l=e[n];if(l!=null){const f=je(l,"default");if(f&&r===void 0){const d=l.default;if(l.type!==Function&&!l.skipFactory&&Ae(d)){const{propsDefaults:g}=o;if(n in g)r=g[n];else{const y=ai(o);r=g[n]=d.call(null,t),y()}}else r=d;o.ce&&o.ce._setProp(n,r)}l[0]&&(c&&!f?r=!1:l[1]&&(r===""||r===rs(n))&&(r=!0))}return r}const u0=new WeakMap;function zd(e,t,n=!1){const r=n?u0:t.propsCache,o=r.get(e);if(o)return o;const c=e.props,l={},f=[];let d=!1;if(!Ae(e)){const y=_=>{d=!0;const[b,w]=zd(_,t,!0);ft(l,b),w&&f.push(...w)};!n&&t.mixins.length&&t.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}if(!c&&!d)return ze(e)&&r.set(e,Vs),Vs;if(Ce(c))for(let y=0;y<c.length;y++){const _=Jt(c[y]);Du(_)&&(l[_]=Ke)}else if(c)for(const y in c){const _=Jt(y);if(Du(_)){const b=c[y],w=l[_]=Ce(b)||Ae(b)?{type:b}:ft({},b),R=w.type;let N=!1,F=!0;if(Ce(R))for(let U=0;U<R.length;++U){const q=R[U],x=Ae(q)&&q.name;if(x==="Boolean"){N=!0;break}else x==="String"&&(F=!1)}else N=Ae(R)&&R.name==="Boolean";w[0]=N,w[1]=F,(N||je(w,"default"))&&f.push(_)}}const g=[l,f];return ze(e)&&r.set(e,g),g}function Du(e){return e[0]!=="$"&&!Nr(e)}const Jd=e=>e[0]==="_"||e==="$stable",Hc=e=>Ce(e)?e.map(En):[En(e)],f0=(e,t,n)=>{if(t._n)return t;const r=$b((...o)=>Hc(t(...o)),n);return r._c=!1,r},Yd=(e,t,n)=>{const r=e._ctx;for(const o in e){if(Jd(o))continue;const c=e[o];if(Ae(c))t[o]=f0(o,c,r);else if(c!=null){const l=Hc(c);t[o]=()=>l}}},Xd=(e,t)=>{const n=Hc(t);e.slots.default=()=>n},Qd=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},h0=(e,t,n)=>{const r=e.slots=Vd();if(e.vnode.shapeFlag&32){const o=t._;o?(Qd(r,t,n),n&&Vh(r,"_",o,!0)):Yd(t,r)}else t&&Xd(e,t)},d0=(e,t,n)=>{const{vnode:r,slots:o}=e;let c=!0,l=Ke;if(r.shapeFlag&32){const f=t._;f?n&&f===1?c=!1:Qd(o,t,n):(c=!t.$stable,Yd(t,o)),l=t}else t&&(Xd(e,t),l={default:1});if(c)for(const f in o)!Jd(f)&&l[f]==null&&delete o[f]},At=R0;function g0(e){return p0(e)}function p0(e,t){const n=ao();n.__VUE__=!0;const{insert:r,remove:o,patchProp:c,createElement:l,createText:f,createComment:d,setText:g,setElementText:y,parentNode:_,nextSibling:b,setScopeId:w=nn,insertStaticContent:R}=e,N=(k,M,A,z=null,re=null,ee=null,ue=void 0,ce=null,S=!!M.dynamicChildren)=>{if(k===M)return;k&&!ys(k,M)&&(z=te(k),Me(k,re,ee,!0),k=null),M.patchFlag===-2&&(S=!1,M.dynamicChildren=null);const{type:T,ref:H,shapeFlag:Q}=M;switch(T){case oi:F(k,M,A,z);break;case Lt:U(k,M,A,z);break;case Mi:k==null&&q(M,A,z,ue);break;case mt:v(k,M,A,z,re,ee,ue,ce,S);break;default:Q&1?$(k,M,A,z,re,ee,ue,ce,S):Q&6?I(k,M,A,z,re,ee,ue,ce,S):(Q&64||Q&128)&&T.process(k,M,A,z,re,ee,ue,ce,S,be)}H!=null&&re&&qi(H,k&&k.ref,ee,M||k,!M)},F=(k,M,A,z)=>{if(k==null)r(M.el=f(M.children),A,z);else{const re=M.el=k.el;M.children!==k.children&&g(re,M.children)}},U=(k,M,A,z)=>{k==null?r(M.el=d(M.children||""),A,z):M.el=k.el},q=(k,M,A,z)=>{[k.el,k.anchor]=R(k.children,M,A,z,k.el,k.anchor)},x=({el:k,anchor:M},A,z)=>{let re;for(;k&&k!==M;)re=b(k),r(k,A,z),k=re;r(M,A,z)},C=({el:k,anchor:M})=>{let A;for(;k&&k!==M;)A=b(k),o(k),k=A;o(M)},$=(k,M,A,z,re,ee,ue,ce,S)=>{M.type==="svg"?ue="svg":M.type==="math"&&(ue="mathml"),k==null?B(M,A,z,re,ee,ue,ce,S):D(k,M,re,ee,ue,ce,S)},B=(k,M,A,z,re,ee,ue,ce)=>{let S,T;const{props:H,shapeFlag:Q,transition:he,dirs:oe}=k;if(S=k.el=l(k.type,ee,H&&H.is,H),Q&8?y(S,k.children):Q&16&&Y(k.children,S,null,z,re,da(k,ee),ue,ce),oe&&fs(k,null,z,"created"),K(S,k,k.scopeId,ue,z),H){for(const Z in H)Z!=="value"&&!Nr(Z)&&c(S,Z,null,H[Z],ee,z);"value"in H&&c(S,"value",null,H.value,ee),(T=H.onVnodeBeforeMount)&&mn(T,z,k)}oe&&fs(k,null,z,"beforeMount");const V=m0(re,he);V&&he.beforeEnter(S),r(S,M,A),((T=H&&H.onVnodeMounted)||V||oe)&&At(()=>{T&&mn(T,z,k),V&&he.enter(S),oe&&fs(k,null,z,"mounted")},re)},K=(k,M,A,z,re)=>{if(A&&w(k,A),z)for(let ee=0;ee<z.length;ee++)w(k,z[ee]);if(re){let ee=re.subTree;if(M===ee||ng(ee.type)&&(ee.ssContent===M||ee.ssFallback===M)){const ue=re.vnode;K(k,ue,ue.scopeId,ue.slotScopeIds,re.parent)}}},Y=(k,M,A,z,re,ee,ue,ce,S=0)=>{for(let T=S;T<k.length;T++){const H=k[T]=ce?Jn(k[T]):En(k[T]);N(null,H,M,A,z,re,ee,ue,ce)}},D=(k,M,A,z,re,ee,ue)=>{const ce=M.el=k.el;let{patchFlag:S,dynamicChildren:T,dirs:H}=M;S|=k.patchFlag&16;const Q=k.props||Ke,he=M.props||Ke;let oe;if(A&&hs(A,!1),(oe=he.onVnodeBeforeUpdate)&&mn(oe,A,M,k),H&&fs(M,k,A,"beforeUpdate"),A&&hs(A,!0),(Q.innerHTML&&he.innerHTML==null||Q.textContent&&he.textContent==null)&&y(ce,""),T?le(k.dynamicChildren,T,ce,A,z,da(M,re),ee):ue||X(k,M,ce,null,A,z,da(M,re),ee,!1),S>0){if(S&16)p(ce,Q,he,A,re);else if(S&2&&Q.class!==he.class&&c(ce,"class",null,he.class,re),S&4&&c(ce,"style",Q.style,he.style,re),S&8){const V=M.dynamicProps;for(let Z=0;Z<V.length;Z++){const me=V[Z],Se=Q[me],De=he[me];(De!==Se||me==="value")&&c(ce,me,Se,De,re,A)}}S&1&&k.children!==M.children&&y(ce,M.children)}else!ue&&T==null&&p(ce,Q,he,A,re);((oe=he.onVnodeUpdated)||H)&&At(()=>{oe&&mn(oe,A,M,k),H&&fs(M,k,A,"updated")},z)},le=(k,M,A,z,re,ee,ue)=>{for(let ce=0;ce<M.length;ce++){const S=k[ce],T=M[ce],H=S.el&&(S.type===mt||!ys(S,T)||S.shapeFlag&70)?_(S.el):A;N(S,T,H,null,z,re,ee,ue,!0)}},p=(k,M,A,z,re)=>{if(M!==A){if(M!==Ke)for(const ee in M)!Nr(ee)&&!(ee in A)&&c(k,ee,M[ee],null,re,z);for(const ee in A){if(Nr(ee))continue;const ue=A[ee],ce=M[ee];ue!==ce&&ee!=="value"&&c(k,ee,ce,ue,re,z)}"value"in A&&c(k,"value",M.value,A.value,re)}},v=(k,M,A,z,re,ee,ue,ce,S)=>{const T=M.el=k?k.el:f(""),H=M.anchor=k?k.anchor:f("");let{patchFlag:Q,dynamicChildren:he,slotScopeIds:oe}=M;oe&&(ce=ce?ce.concat(oe):oe),k==null?(r(T,A,z),r(H,A,z),Y(M.children||[],A,H,re,ee,ue,ce,S)):Q>0&&Q&64&&he&&k.dynamicChildren?(le(k.dynamicChildren,he,A,re,ee,ue,ce),(M.key!=null||re&&M===re.subTree)&&Gc(k,M,!0)):X(k,M,A,H,re,ee,ue,ce,S)},I=(k,M,A,z,re,ee,ue,ce,S)=>{M.slotScopeIds=ce,k==null?M.shapeFlag&512?re.ctx.activate(M,A,z,ue,S):E(M,A,z,re,ee,ue,S):P(k,M,S)},E=(k,M,A,z,re,ee,ue)=>{const ce=k.component=x0(k,z,re);if(lo(k)&&(ce.ctx.renderer=be),D0(ce,!1,ue),ce.asyncDep){if(re&&re.registerDep(ce,ae,ue),!k.el){const S=ce.subTree=ve(Lt);U(null,S,M,A)}}else ae(ce,k,M,A,re,ee,ue)},P=(k,M,A)=>{const z=M.component=k.component;if(S0(k,M,A))if(z.asyncDep&&!z.asyncResolved){j(z,M,A);return}else z.next=M,z.update();else M.el=k.el,z.vnode=M},ae=(k,M,A,z,re,ee,ue)=>{const ce=()=>{if(k.isMounted){let{next:Q,bu:he,u:oe,parent:V,vnode:Z}=k;{const ot=Zd(k);if(ot){Q&&(Q.el=Z.el,j(k,Q,ue)),ot.asyncDep.then(()=>{k.isUnmounted||ce()});return}}let me=Q,Se;hs(k,!1),Q?(Q.el=Z.el,j(k,Q,ue)):Q=Z,he&&ki(he),(Se=Q.props&&Q.props.onVnodeBeforeUpdate)&&mn(Se,V,Q,Z),hs(k,!0);const De=Uu(k),at=k.subTree;k.subTree=De,N(at,De,_(at.el),te(at),k,re,ee),Q.el=De.el,me===null&&T0(k,De.el),oe&&At(oe,re),(Se=Q.props&&Q.props.onVnodeUpdated)&&At(()=>mn(Se,V,Q,Z),re)}else{let Q;const{el:he,props:oe}=M,{bm:V,m:Z,parent:me,root:Se,type:De}=k,at=zs(M);hs(k,!1),V&&ki(V),!at&&(Q=oe&&oe.onVnodeBeforeMount)&&mn(Q,me,M),hs(k,!0);{Se.ce&&Se.ce._injectChildStyle(De);const ot=k.subTree=Uu(k);N(null,ot,A,z,k,re,ee),M.el=ot.el}if(Z&&At(Z,re),!at&&(Q=oe&&oe.onVnodeMounted)){const ot=M;At(()=>mn(Q,me,ot),re)}(M.shapeFlag&256||me&&zs(me.vnode)&&me.vnode.shapeFlag&256)&&k.a&&At(k.a,re),k.isMounted=!0,M=A=z=null}};k.scope.on();const S=k.effect=new Xh(ce);k.scope.off();const T=k.update=S.run.bind(S),H=k.job=S.runIfDirty.bind(S);H.i=k,H.id=k.uid,S.scheduler=()=>Uc(H),hs(k,!0),T()},j=(k,M,A)=>{M.component=k;const z=k.vnode.props;k.vnode=M,k.next=null,l0(k,M.props,z,A),d0(k,M.children,A),is(),Tu(k),os()},X=(k,M,A,z,re,ee,ue,ce,S=!1)=>{const T=k&&k.children,H=k?k.shapeFlag:0,Q=M.children,{patchFlag:he,shapeFlag:oe}=M;if(he>0){if(he&128){Ne(T,Q,A,z,re,ee,ue,ce,S);return}else if(he&256){_e(T,Q,A,z,re,ee,ue,ce,S);return}}oe&8?(H&16&&it(T,re,ee),Q!==T&&y(A,Q)):H&16?oe&16?Ne(T,Q,A,z,re,ee,ue,ce,S):it(T,re,ee,!0):(H&8&&y(A,""),oe&16&&Y(Q,A,z,re,ee,ue,ce,S))},_e=(k,M,A,z,re,ee,ue,ce,S)=>{k=k||Vs,M=M||Vs;const T=k.length,H=M.length,Q=Math.min(T,H);let he;for(he=0;he<Q;he++){const oe=M[he]=S?Jn(M[he]):En(M[he]);N(k[he],oe,A,null,re,ee,ue,ce,S)}T>H?it(k,re,ee,!0,!1,Q):Y(M,A,z,re,ee,ue,ce,S,Q)},Ne=(k,M,A,z,re,ee,ue,ce,S)=>{let T=0;const H=M.length;let Q=k.length-1,he=H-1;for(;T<=Q&&T<=he;){const oe=k[T],V=M[T]=S?Jn(M[T]):En(M[T]);if(ys(oe,V))N(oe,V,A,null,re,ee,ue,ce,S);else break;T++}for(;T<=Q&&T<=he;){const oe=k[Q],V=M[he]=S?Jn(M[he]):En(M[he]);if(ys(oe,V))N(oe,V,A,null,re,ee,ue,ce,S);else break;Q--,he--}if(T>Q){if(T<=he){const oe=he+1,V=oe<H?M[oe].el:z;for(;T<=he;)N(null,M[T]=S?Jn(M[T]):En(M[T]),A,V,re,ee,ue,ce,S),T++}}else if(T>he)for(;T<=Q;)Me(k[T],re,ee,!0),T++;else{const oe=T,V=T,Z=new Map;for(T=V;T<=he;T++){const pt=M[T]=S?Jn(M[T]):En(M[T]);pt.key!=null&&Z.set(pt.key,T)}let me,Se=0;const De=he-V+1;let at=!1,ot=0;const hn=new Array(De);for(T=0;T<De;T++)hn[T]=0;for(T=oe;T<=Q;T++){const pt=k[T];if(Se>=De){Me(pt,re,ee,!0);continue}let xt;if(pt.key!=null)xt=Z.get(pt.key);else for(me=V;me<=he;me++)if(hn[me-V]===0&&ys(pt,M[me])){xt=me;break}xt===void 0?Me(pt,re,ee,!0):(hn[xt-V]=T+1,xt>=ot?ot=xt:at=!0,N(pt,M[xt],A,null,re,ee,ue,ce,S),Se++)}const Rs=at?y0(hn):Vs;for(me=Rs.length-1,T=De-1;T>=0;T--){const pt=V+T,xt=M[pt],cr=pt+1<H?M[pt+1].el:z;hn[T]===0?N(null,xt,A,cr,re,ee,ue,ce,S):at&&(me<0||T!==Rs[me]?qe(xt,A,cr,2):me--)}}},qe=(k,M,A,z,re=null)=>{const{el:ee,type:ue,transition:ce,children:S,shapeFlag:T}=k;if(T&6){qe(k.component.subTree,M,A,z);return}if(T&128){k.suspense.move(M,A,z);return}if(T&64){ue.move(k,M,A,be);return}if(ue===mt){r(ee,M,A);for(let Q=0;Q<S.length;Q++)qe(S[Q],M,A,z);r(k.anchor,M,A);return}if(ue===Mi){x(k,M,A);return}if(z!==2&&T&1&&ce)if(z===0)ce.beforeEnter(ee),r(ee,M,A),At(()=>ce.enter(ee),re);else{const{leave:Q,delayLeave:he,afterLeave:oe}=ce,V=()=>r(ee,M,A),Z=()=>{Q(ee,()=>{V(),oe&&oe()})};he?he(ee,V,Z):Z()}else r(ee,M,A)},Me=(k,M,A,z=!1,re=!1)=>{const{type:ee,props:ue,ref:ce,children:S,dynamicChildren:T,shapeFlag:H,patchFlag:Q,dirs:he,cacheIndex:oe}=k;if(Q===-2&&(re=!1),ce!=null&&qi(ce,null,A,k,!0),oe!=null&&(M.renderCache[oe]=void 0),H&256){M.ctx.deactivate(k);return}const V=H&1&&he,Z=!zs(k);let me;if(Z&&(me=ue&&ue.onVnodeBeforeUnmount)&&mn(me,M,k),H&6)Vt(k.component,A,z);else{if(H&128){k.suspense.unmount(A,z);return}V&&fs(k,null,M,"beforeUnmount"),H&64?k.type.remove(k,M,A,be,z):T&&!T.hasOnce&&(ee!==mt||Q>0&&Q&64)?it(T,M,A,!1,!0):(ee===mt&&Q&384||!re&&H&16)&&it(S,M,A),z&&Nt(k)}(Z&&(me=ue&&ue.onVnodeUnmounted)||V)&&At(()=>{me&&mn(me,M,k),V&&fs(k,null,M,"unmounted")},A)},Nt=k=>{const{type:M,el:A,anchor:z,transition:re}=k;if(M===mt){_t(A,z);return}if(M===Mi){C(k);return}const ee=()=>{o(A),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(k.shapeFlag&1&&re&&!re.persisted){const{leave:ue,delayLeave:ce}=re,S=()=>ue(A,ee);ce?ce(k.el,ee,S):S()}else ee()},_t=(k,M)=>{let A;for(;k!==M;)A=b(k),o(k),k=A;o(M)},Vt=(k,M,A)=>{const{bum:z,scope:re,job:ee,subTree:ue,um:ce,m:S,a:T}=k;Fu(S),Fu(T),z&&ki(z),re.stop(),ee&&(ee.flags|=8,Me(ue,k,M,A)),ce&&At(ce,M),At(()=>{k.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},it=(k,M,A,z=!1,re=!1,ee=0)=>{for(let ue=ee;ue<k.length;ue++)Me(k[ue],M,A,z,re)},te=k=>{if(k.shapeFlag&6)return te(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const M=b(k.anchor||k.el),A=M&&M[Cd];return A?b(A):M};let ge=!1;const fe=(k,M,A)=>{k==null?M._vnode&&Me(M._vnode,null,null,!0):N(M._vnode||null,k,M,null,null,null,A),M._vnode=k,ge||(ge=!0,Tu(),_d(),ge=!1)},be={p:N,um:Me,m:qe,r:Nt,mt:E,mc:Y,pc:X,pbc:le,n:te,o:e};return{render:fe,hydrate:void 0,createApp:o0(fe)}}function da({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function hs({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function m0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Gc(e,t,n=!1){const r=e.children,o=t.children;if(Ce(r)&&Ce(o))for(let c=0;c<r.length;c++){const l=r[c];let f=o[c];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[c]=Jn(o[c]),f.el=l.el),!n&&f.patchFlag!==-2&&Gc(l,f)),f.type===oi&&(f.el=l.el)}}function y0(e){const t=e.slice(),n=[0];let r,o,c,l,f;const d=e.length;for(r=0;r<d;r++){const g=e[r];if(g!==0){if(o=n[n.length-1],e[o]<g){t[r]=o,n.push(r);continue}for(c=0,l=n.length-1;c<l;)f=c+l>>1,e[n[f]]<g?c=f+1:l=f;g<e[n[c]]&&(c>0&&(t[r]=n[c-1]),n[c]=r)}}for(c=n.length,l=n[c-1];c-- >0;)n[c]=l,l=t[l];return n}function Zd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Zd(t)}function Fu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const _0=Symbol.for("v-scx"),b0=()=>Ut(_0);function GR(e,t){return jc(e,null,t)}function dt(e,t,n){return jc(e,t,n)}function jc(e,t,n=Ke){const{immediate:r,deep:o,flush:c,once:l}=n,f=ft({},n),d=t&&r||!t&&c!=="post";let g;if(Jr){if(c==="sync"){const w=b0();g=w.__watcherHandles||(w.__watcherHandles=[])}else if(!d){const w=()=>{};return w.stop=nn,w.resume=nn,w.pause=nn,w}}const y=ht;f.call=(w,R,N)=>cn(w,y,R,N);let _=!1;c==="post"?f.scheduler=w=>{At(w,y&&y.suspense)}:c!=="sync"&&(_=!0,f.scheduler=(w,R)=>{R?w():Uc(w)}),f.augmentJob=w=>{t&&(w.flags|=4),_&&(w.flags|=2,y&&(w.id=y.uid,w.i=y))};const b=Bb(e,t,f);return Jr&&(g?g.push(b):d&&b()),b}function v0(e,t,n){const r=this.proxy,o=et(e)?e.includes(".")?eg(r,e):()=>r[e]:e.bind(r,r);let c;Ae(t)?c=t:(c=t.handler,n=t);const l=ai(this),f=jc(o,c.bind(r),n);return l(),f}function eg(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const E0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Jt(t)}Modifiers`]||e[`${rs(t)}Modifiers`];function C0(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ke;let o=n;const c=t.startsWith("update:"),l=c&&E0(r,t.slice(7));l&&(l.trim&&(o=n.map(y=>et(y)?y.trim():y)),l.number&&(o=n.map(tb)));let f,d=r[f=oa(t)]||r[f=oa(Jt(t))];!d&&c&&(d=r[f=oa(rs(t))]),d&&cn(d,e,6,o);const g=r[f+"Once"];if(g){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,cn(g,e,6,o)}}function tg(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const c=e.emits;let l={},f=!1;if(!Ae(e)){const d=g=>{const y=tg(g,t,!0);y&&(f=!0,ft(l,y))};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!c&&!f?(ze(e)&&r.set(e,null),null):(Ce(c)?c.forEach(d=>l[d]=null):ft(l,c),ze(e)&&r.set(e,l),l)}function go(e,t){return!e||!ro(t)?!1:(t=t.slice(2).replace(/Once$/,""),je(e,t[0].toLowerCase()+t.slice(1))||je(e,rs(t))||je(e,t))}function Uu(e){const{type:t,vnode:n,proxy:r,withProxy:o,propsOptions:[c],slots:l,attrs:f,emit:d,render:g,renderCache:y,props:_,data:b,setupState:w,ctx:R,inheritAttrs:N}=e,F=Vi(e);let U,q;try{if(n.shapeFlag&4){const C=o||r,$=C;U=En(g.call($,C,y,_,w,b,R)),q=f}else{const C=t;U=En(C.length>1?C(_,{attrs:f,slots:l,emit:d}):C(_,null)),q=t.props?f:O0(f)}}catch(C){Br.length=0,co(C,e,1),U=ve(Lt)}let x=U;if(q&&N!==!1){const C=Object.keys(q),{shapeFlag:$}=x;C.length&&$&7&&(c&&C.some(Cc)&&(q=w0(q,c)),x=es(x,q,!1,!0))}return n.dirs&&(x=es(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&ws(x,n.transition),U=x,Vi(F),U}const O0=e=>{let t;for(const n in e)(n==="class"||n==="style"||ro(n))&&((t||(t={}))[n]=e[n]);return t},w0=(e,t)=>{const n={};for(const r in e)(!Cc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function S0(e,t,n){const{props:r,children:o,component:c}=e,{props:l,children:f,patchFlag:d}=t,g=c.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return r?Bu(r,l,g):!!l;if(d&8){const y=t.dynamicProps;for(let _=0;_<y.length;_++){const b=y[_];if(l[b]!==r[b]&&!go(g,b))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:r===l?!1:r?l?Bu(r,l,g):!0:!!l;return!1}function Bu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const c=r[o];if(t[c]!==e[c]&&!go(n,c))return!0}return!1}function T0({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const ng=e=>e.__isSuspense;function R0(e,t){t&&t.pendingBranch?Ce(e)?t.effects.push(...e):t.effects.push(e):jb(e)}const mt=Symbol.for("v-fgt"),oi=Symbol.for("v-txt"),Lt=Symbol.for("v-cmt"),Mi=Symbol.for("v-stc"),Br=[];let $t=null;function zi(e=!1){Br.push($t=e?null:[])}function A0(){Br.pop(),$t=Br[Br.length-1]||null}let zr=1;function Hu(e,t=!1){zr+=e,e<0&&$t&&t&&($t.hasOnce=!0)}function sg(e){return e.dynamicChildren=zr>0?$t||Vs:null,A0(),zr>0&&$t&&$t.push(e),e}function jR(e,t,n,r,o,c){return sg(ig(e,t,n,r,o,c,!0))}function Ji(e,t,n,r,o){return sg(ve(e,t,n,r,o,!0))}function Ys(e){return e?e.__v_isVNode===!0:!1}function ys(e,t){return e.type===t.type&&e.key===t.key}const rg=({key:e})=>e??null,Ni=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?et(e)||Ze(e)||Ae(e)?{i:lt,r:e,k:t,f:!!n}:e:null);function ig(e,t=null,n=null,r=0,o=null,c=e===mt?0:1,l=!1,f=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&rg(t),ref:t&&Ni(t),scopeId:vd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:lt};return f?($c(d,n),c&128&&e.normalize(d)):n&&(d.shapeFlag|=et(n)?8:16),zr>0&&!l&&$t&&(d.patchFlag>0||c&6)&&d.patchFlag!==32&&$t.push(d),d}const ve=I0;function I0(e,t=null,n=null,r=0,o=null,c=!1){if((!e||e===Fd)&&(e=Lt),Ys(e)){const f=es(e,t,!0);return n&&$c(f,n),zr>0&&!c&&$t&&(f.shapeFlag&6?$t[$t.indexOf(e)]=f:$t.push(f)),f.patchFlag=-2,f}if(H0(e)&&(e=e.__vccOpts),t){t=P0(t);let{class:f,style:d}=t;f&&!et(f)&&(t.class=Tc(f)),ze(d)&&(xc(d)&&!Ce(d)&&(d=ft({},d)),t.style=Sc(d))}const l=et(e)?1:ng(e)?128:Od(e)?64:ze(e)?4:Ae(e)?2:0;return ig(e,t,n,r,o,l,c,!0)}function P0(e){return e?xc(e)||qd(e)?ft({},e):e:null}function es(e,t,n=!1,r=!1){const{props:o,ref:c,patchFlag:l,children:f,transition:d}=e,g=t?ts(o||{},t):o,y={__v_isVNode:!0,__v_skip:!0,type:e.type,props:g,key:g&&rg(g),ref:t&&t.ref?n&&c?Ce(c)?c.concat(Ni(t)):[c,Ni(t)]:Ni(t):c,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==mt?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&es(e.ssContent),ssFallback:e.ssFallback&&es(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&r&&ws(y,d.clone(y)),y}function k0(e=" ",t=0){return ve(oi,null,e,t)}function $R(e,t){const n=ve(Mi,null,e);return n.staticCount=t,n}function L0(e="",t=!1){return t?(zi(),Ji(Lt,null,e)):ve(Lt,null,e)}function En(e){return e==null||typeof e=="boolean"?ve(Lt):Ce(e)?ve(mt,null,e.slice()):Ys(e)?Jn(e):ve(oi,null,String(e))}function Jn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:es(e)}function $c(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ce(t))n=16;else if(typeof t=="object")if(r&65){const o=t.default;o&&(o._c&&(o._d=!1),$c(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!qd(t)?t._ctx=lt:o===3&&lt&&(lt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ae(t)?(t={default:t,_ctx:lt},n=32):(t=String(t),r&64?(n=16,t=[k0(t)]):n=8);e.children=t,e.shapeFlag|=n}function ts(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=Tc([t.class,r.class]));else if(o==="style")t.style=Sc([t.style,r.style]);else if(ro(o)){const c=t[o],l=r[o];l&&c!==l&&!(Ce(c)&&c.includes(l))&&(t[o]=c?[].concat(c,l):l)}else o!==""&&(t[o]=r[o])}return t}function mn(e,t,n,r=null){cn(e,t,7,[n,r])}const M0=$d();let N0=0;function x0(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||M0,c={uid:N0++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Jh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zd(r,o),emitsOptions:tg(r,o),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:r.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=t?t.root:c,c.emit=C0.bind(null,c),e.ce&&e.ce(c),c}let ht=null;const Ht=()=>ht||lt;let Yi,Ua;{const e=ao(),t=(n,r)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(r),c=>{o.length>1?o.forEach(l=>l(c)):o[0](c)}};Yi=t("__VUE_INSTANCE_SETTERS__",n=>ht=n),Ua=t("__VUE_SSR_SETTERS__",n=>Jr=n)}const ai=e=>{const t=ht;return Yi(e),e.scope.on(),()=>{e.scope.off(),Yi(t)}},Gu=()=>{ht&&ht.scope.off(),Yi(null)};function og(e){return e.vnode.shapeFlag&4}let Jr=!1;function D0(e,t=!1,n=!1){t&&Ua(t);const{props:r,children:o}=e.vnode,c=og(e);c0(e,r,c,t),h0(e,o,n);const l=c?F0(e,t):void 0;return t&&Ua(!1),l}function F0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Zb);const{setup:r}=n;if(r){is();const o=e.setupContext=r.length>1?cg(e):null,c=ai(e),l=ri(r,e,0,[e.props,o]),f=jh(l);if(os(),c(),(f||e.sp)&&!zs(e)&&Ld(e),f){if(l.then(Gu,Gu),t)return l.then(d=>{ju(e,d)}).catch(d=>{co(d,e,0)});e.asyncDep=l}else ju(e,l)}else ag(e)}function ju(e,t,n){Ae(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ze(t)&&(e.setupState=gd(t)),ag(e)}function ag(e,t,n){const r=e.type;e.render||(e.render=r.render||nn);{const o=ai(e);is();try{e0(e)}finally{os(),o()}}}const U0={get(e,t){return Ct(e,"get",""),e[t]}};function cg(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,U0),slots:e.slots,emit:e.emit,expose:t}}function po(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(gd(Dc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ur)return Ur[n](e)},has(t,n){return n in t||n in Ur}})):e.proxy}function B0(e,t=!0){return Ae(e)?e.displayName||e.name:e.name||t&&e.__name}function H0(e){return Ae(e)&&"__vccOpts"in e}const $e=(e,t)=>Fb(e,t,Jr);function ci(e,t,n){const r=arguments.length;return r===2?ze(t)&&!Ce(t)?Ys(t)?ve(e,null,[t]):ve(e,t):ve(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ys(n)&&(n=[n]),ve(e,t,n))}const G0="3.5.13",WR=nn;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ba;const $u=typeof window<"u"&&window.trustedTypes;if($u)try{Ba=$u.createPolicy("vue",{createHTML:e=>e})}catch{}const lg=Ba?e=>Ba.createHTML(e):e=>e,j0="http://www.w3.org/2000/svg",$0="http://www.w3.org/1998/Math/MathML",Ln=typeof document<"u"?document:null,Wu=Ln&&Ln.createElement("template"),W0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t==="svg"?Ln.createElementNS(j0,e):t==="mathml"?Ln.createElementNS($0,e):n?Ln.createElement(e,{is:n}):Ln.createElement(e);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>Ln.createTextNode(e),createComment:e=>Ln.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ln.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,c){const l=n?n.previousSibling:t.lastChild;if(o&&(o===c||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===c||!(o=o.nextSibling)););else{Wu.innerHTML=lg(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const f=Wu.content;if(r==="svg"||r==="mathml"){const d=f.firstChild;for(;d.firstChild;)f.appendChild(d.firstChild);f.removeChild(d)}t.insertBefore(f,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},jn="transition",Cr="animation",Xs=Symbol("_vtc"),ug={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},fg=ft({},Ad,ug),V0=e=>(e.displayName="Transition",e.props=fg,e),hg=V0((e,{slots:t})=>ci(qb,dg(e),t)),ds=(e,t=[])=>{Ce(e)?e.forEach(n=>n(...t)):e&&e(...t)},Vu=e=>e?Ce(e)?e.some(t=>t.length>1):e.length>1:!1;function dg(e){const t={};for(const v in e)v in ug||(t[v]=e[v]);if(e.css===!1)return t;const{name:n="v",type:r,duration:o,enterFromClass:c=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:d=c,appearActiveClass:g=l,appearToClass:y=f,leaveFromClass:_=`${n}-leave-from`,leaveActiveClass:b=`${n}-leave-active`,leaveToClass:w=`${n}-leave-to`}=e,R=q0(o),N=R&&R[0],F=R&&R[1],{onBeforeEnter:U,onEnter:q,onEnterCancelled:x,onLeave:C,onLeaveCancelled:$,onBeforeAppear:B=U,onAppear:K=q,onAppearCancelled:Y=x}=t,D=(v,I,E,P)=>{v._enterCancelled=P,Vn(v,I?y:f),Vn(v,I?g:l),E&&E()},le=(v,I)=>{v._isLeaving=!1,Vn(v,_),Vn(v,w),Vn(v,b),I&&I()},p=v=>(I,E)=>{const P=v?K:q,ae=()=>D(I,v,E);ds(P,[I,ae]),qu(()=>{Vn(I,v?d:c),_n(I,v?y:f),Vu(P)||Ku(I,r,N,ae)})};return ft(t,{onBeforeEnter(v){ds(U,[v]),_n(v,c),_n(v,l)},onBeforeAppear(v){ds(B,[v]),_n(v,d),_n(v,g)},onEnter:p(!1),onAppear:p(!0),onLeave(v,I){v._isLeaving=!0;const E=()=>le(v,I);_n(v,_),v._enterCancelled?(_n(v,b),Ha()):(Ha(),_n(v,b)),qu(()=>{v._isLeaving&&(Vn(v,_),_n(v,w),Vu(C)||Ku(v,r,F,E))}),ds(C,[v,E])},onEnterCancelled(v){D(v,!1,void 0,!0),ds(x,[v])},onAppearCancelled(v){D(v,!0,void 0,!0),ds(Y,[v])},onLeaveCancelled(v){le(v),ds($,[v])}})}function q0(e){if(e==null)return null;if(ze(e))return[ga(e.enter),ga(e.leave)];{const t=ga(e);return[t,t]}}function ga(e){return nb(e)}function _n(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Xs]||(e[Xs]=new Set)).add(t)}function Vn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[Xs];n&&(n.delete(t),n.size||(e[Xs]=void 0))}function qu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let K0=0;function Ku(e,t,n,r){const o=e._endId=++K0,c=()=>{o===e._endId&&r()};if(n!=null)return setTimeout(c,n);const{type:l,timeout:f,propCount:d}=gg(e,t);if(!l)return r();const g=l+"end";let y=0;const _=()=>{e.removeEventListener(g,b),c()},b=w=>{w.target===e&&++y>=d&&_()};setTimeout(()=>{y<d&&_()},f+1),e.addEventListener(g,b)}function gg(e,t){const n=window.getComputedStyle(e),r=R=>(n[R]||"").split(", "),o=r(`${jn}Delay`),c=r(`${jn}Duration`),l=zu(o,c),f=r(`${Cr}Delay`),d=r(`${Cr}Duration`),g=zu(f,d);let y=null,_=0,b=0;t===jn?l>0&&(y=jn,_=l,b=c.length):t===Cr?g>0&&(y=Cr,_=g,b=d.length):(_=Math.max(l,g),y=_>0?l>g?jn:Cr:null,b=y?y===jn?c.length:d.length:0);const w=y===jn&&/\b(transform|all)(,|$)/.test(r(`${jn}Property`).toString());return{type:y,timeout:_,propCount:b,hasTransform:w}}function zu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Ju(n)+Ju(e[r])))}function Ju(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ha(){return document.body.offsetHeight}function z0(e,t,n){const r=e[Xs];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Xi=Symbol("_vod"),pg=Symbol("_vsh"),mg={beforeMount(e,{value:t},{transition:n}){e[Xi]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Or(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Or(e,!0),r.enter(e)):r.leave(e,()=>{Or(e,!1)}):Or(e,t))},beforeUnmount(e,{value:t}){Or(e,t)}};function Or(e,t){e.style.display=t?e[Xi]:"none",e[pg]=!t}const J0=Symbol(""),Y0=/(^|;)\s*display\s*:/;function X0(e,t,n){const r=e.style,o=et(n);let c=!1;if(n&&!o){if(t)if(et(t))for(const l of t.split(";")){const f=l.slice(0,l.indexOf(":")).trim();n[f]==null&&xi(r,f,"")}else for(const l in t)n[l]==null&&xi(r,l,"");for(const l in n)l==="display"&&(c=!0),xi(r,l,n[l])}else if(o){if(t!==n){const l=r[J0];l&&(n+=";"+l),r.cssText=n,c=Y0.test(n)}}else t&&e.removeAttribute("style");Xi in e&&(e[Xi]=c?r.display:"",e[pg]&&(r.display="none"))}const Yu=/\s*!important$/;function xi(e,t,n){if(Ce(n))n.forEach(r=>xi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Q0(e,t);Yu.test(n)?e.setProperty(rs(r),n.replace(Yu,""),"important"):e[r]=n}}const Xu=["Webkit","Moz","ms"],pa={};function Q0(e,t){const n=pa[t];if(n)return n;let r=Jt(t);if(r!=="filter"&&r in e)return pa[t]=r;r=oo(r);for(let o=0;o<Xu.length;o++){const c=Xu[o]+r;if(c in e)return pa[t]=c}return t}const Qu="http://www.w3.org/1999/xlink";function Zu(e,t,n,r,o,c=cb(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Qu,t.slice(6,t.length)):e.setAttributeNS(Qu,t,n):n==null||c&&!qh(n)?e.removeAttribute(t):e.setAttribute(t,c?"":an(n)?String(n):n)}function ef(e,t,n,r,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?lg(n):n);return}const c=e.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){const f=c==="OPTION"?e.getAttribute("value")||"":e.value,d=n==null?e.type==="checkbox"?"on":"":String(n);(f!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=qh(n):n==null&&f==="string"?(n="",l=!0):f==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(o||t)}function yg(e,t,n,r){e.addEventListener(t,n,r)}function Z0(e,t,n,r){e.removeEventListener(t,n,r)}const tf=Symbol("_vei");function ev(e,t,n,r,o=null){const c=e[tf]||(e[tf]={}),l=c[t];if(r&&l)l.value=r;else{const[f,d]=tv(t);if(r){const g=c[t]=rv(r,o);yg(e,f,g,d)}else l&&(Z0(e,f,l,d),c[t]=void 0)}}const nf=/(?:Once|Passive|Capture)$/;function tv(e){let t;if(nf.test(e)){t={};let r;for(;r=e.match(nf);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):rs(e.slice(2)),t]}let ma=0;const nv=Promise.resolve(),sv=()=>ma||(nv.then(()=>ma=0),ma=Date.now());function rv(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;cn(iv(r,n.value),t,5,[r])};return n.value=e,n.attached=sv(),n}function iv(e,t){if(Ce(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r&&r(o))}else return t}const sf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ov=(e,t,n,r,o,c)=>{const l=o==="svg";t==="class"?z0(e,r,l):t==="style"?X0(e,n,r):ro(t)?Cc(t)||ev(e,t,n,r,c):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):av(e,t,r,l))?(ef(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Zu(e,t,r,l,c,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!et(r))?ef(e,Jt(t),r,c,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Zu(e,t,r,l))};function av(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&sf(t)&&Ae(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return sf(t)&&et(n)?!1:t in e}const _g=new WeakMap,bg=new WeakMap,Qi=Symbol("_moveCb"),rf=Symbol("_enterCb"),cv=e=>(delete e.props.mode,e),lv=cv({name:"TransitionGroup",props:ft({},fg,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Ht(),r=Rd();let o,c;return xd(()=>{if(!o.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!dv(o[0].el,n.vnode.el,l))return;o.forEach(uv),o.forEach(fv);const f=o.filter(hv);Ha(),f.forEach(d=>{const g=d.el,y=g.style;_n(g,l),y.transform=y.webkitTransform=y.transitionDuration="";const _=g[Qi]=b=>{b&&b.target!==g||(!b||/transform$/.test(b.propertyName))&&(g.removeEventListener("transitionend",_),g[Qi]=null,Vn(g,l))};g.addEventListener("transitionend",_)})}),()=>{const l=Fe(e),f=dg(l);let d=l.tag||mt;if(o=[],c)for(let g=0;g<c.length;g++){const y=c[g];y.el&&y.el instanceof Element&&(o.push(y),ws(y,Kr(y,f,r,n)),_g.set(y,y.el.getBoundingClientRect()))}c=t.default?Bc(t.default()):[];for(let g=0;g<c.length;g++){const y=c[g];y.key!=null&&ws(y,Kr(y,f,r,n))}return ve(d,null,c)}}}),VR=lv;function uv(e){const t=e.el;t[Qi]&&t[Qi](),t[rf]&&t[rf]()}function fv(e){bg.set(e,e.el.getBoundingClientRect())}function hv(e){const t=_g.get(e),n=bg.get(e),r=t.left-n.left,o=t.top-n.top;if(r||o){const c=e.el.style;return c.transform=c.webkitTransform=`translate(${r}px,${o}px)`,c.transitionDuration="0s",e}}function dv(e,t,n){const r=e.cloneNode(),o=e[Xs];o&&o.forEach(f=>{f.split(/\s+/).forEach(d=>d&&r.classList.remove(d))}),n.split(/\s+/).forEach(f=>f&&r.classList.add(f)),r.style.display="none";const c=t.nodeType===1?t:t.parentNode;c.appendChild(r);const{hasTransform:l}=gg(r);return c.removeChild(r),l}const of=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ce(t)?n=>ki(t,n):t},ya=Symbol("_assign"),qR={created(e,{value:t},n){e.checked=Gi(t,n.props.value),e[ya]=of(n),yg(e,"change",()=>{e[ya](gv(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[ya]=of(r),t!==n&&(e.checked=Gi(t,r.props.value))}};function gv(e){return"_value"in e?e._value:e.value}const pv=["ctrl","shift","alt","meta"],mv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>pv.some(n=>e[`${n}Key`]&&!t.includes(n))},KR=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(o,...c)=>{for(let l=0;l<t.length;l++){const f=mv[t[l]];if(f&&f(o,t))return}return e(o,...c)})},yv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},_v=(e,t)=>{const n=e._withKeys||(e._withKeys={}),r=t.join(".");return n[r]||(n[r]=o=>{if(!("key"in o))return;const c=rs(o.key);if(t.some(l=>l===c||yv[l]===c))return e(o)})},bv=ft({patchProp:ov},W0);let af;function vg(){return af||(af=g0(bv))}const zR=(...e)=>{vg().render(...e)},Eg=(...e)=>{const t=vg().createApp(...e),{mount:n}=t;return t.mount=r=>{const o=Ev(r);if(!o)return;const c=t._component;!Ae(c)&&!c.render&&!c.template&&(c.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=n(o,!1,vv(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t};function vv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ev(e){return et(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Cg;const mo=e=>Cg=e,Og=Symbol();function Ga(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Hr;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Hr||(Hr={}));function Cv(){const e=Rc(!0),t=e.run(()=>He({}));let n=[],r=[];const o=Dc({install(c){mo(o),o._a=c,c.provide(Og,o),c.config.globalProperties.$pinia=o,r.forEach(l=>n.push(l)),r=[]},use(c){return this._a?n.push(c):r.push(c),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const wg=()=>{};function cf(e,t,n,r=wg){e.push(t);const o=()=>{const c=e.indexOf(t);c>-1&&(e.splice(c,1),r())};return!n&&Yh()&&fb(o),o}function Ds(e,...t){e.slice().forEach(n=>{n(...t)})}const Ov=e=>e(),lf=Symbol(),_a=Symbol();function ja(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];Ga(o)&&Ga(r)&&e.hasOwnProperty(n)&&!Ze(r)&&!vs(r)?e[n]=ja(o,r):e[n]=r}return e}const wv=Symbol();function Sv(e){return!Ga(e)||!e.hasOwnProperty(wv)}const{assign:qn}=Object;function Tv(e){return!!(Ze(e)&&e.effect)}function Rv(e,t,n,r){const{state:o,actions:c,getters:l}=t,f=n.state.value[e];let d;function g(){f||(n.state.value[e]=o?o():{});const y=Mb(n.state.value[e]);return qn(y,c,Object.keys(l||{}).reduce((_,b)=>(_[b]=Dc($e(()=>{mo(n);const w=n._s.get(e);return l[b].call(w,w)})),_),{}))}return d=Sg(e,g,t,n,r,!0),d}function Sg(e,t,n={},r,o,c){let l;const f=qn({actions:{}},n),d={deep:!0};let g,y,_=[],b=[],w;const R=r.state.value[e];!c&&!R&&(r.state.value[e]={}),He({});let N;function F(Y){let D;g=y=!1,typeof Y=="function"?(Y(r.state.value[e]),D={type:Hr.patchFunction,storeId:e,events:w}):(ja(r.state.value[e],Y),D={type:Hr.patchObject,payload:Y,storeId:e,events:w});const le=N=Symbol();Zn().then(()=>{N===le&&(g=!0)}),y=!0,Ds(_,D,r.state.value[e])}const U=c?function(){const{state:D}=n,le=D?D():{};this.$patch(p=>{qn(p,le)})}:wg;function q(){l.stop(),_=[],b=[],r._s.delete(e)}const x=(Y,D="")=>{if(lf in Y)return Y[_a]=D,Y;const le=function(){mo(r);const p=Array.from(arguments),v=[],I=[];function E(j){v.push(j)}function P(j){I.push(j)}Ds(b,{args:p,name:le[_a],store:$,after:E,onError:P});let ae;try{ae=Y.apply(this&&this.$id===e?this:$,p)}catch(j){throw Ds(I,j),j}return ae instanceof Promise?ae.then(j=>(Ds(v,j),j)).catch(j=>(Ds(I,j),Promise.reject(j))):(Ds(v,ae),ae)};return le[lf]=!0,le[_a]=D,le},C={_p:r,$id:e,$onAction:cf.bind(null,b),$patch:F,$reset:U,$subscribe(Y,D={}){const le=cf(_,Y,D.detached,()=>p()),p=l.run(()=>dt(()=>r.state.value[e],v=>{(D.flush==="sync"?y:g)&&Y({storeId:e,type:Hr.direct,events:w},v)},qn({},d,D)));return le},$dispose:q},$=On(C);r._s.set(e,$);const K=(r._a&&r._a.runWithContext||Ov)(()=>r._e.run(()=>(l=Rc()).run(()=>t({action:x}))));for(const Y in K){const D=K[Y];if(Ze(D)&&!Tv(D)||vs(D))c||(R&&Sv(D)&&(Ze(D)?D.value=R[Y]:ja(D,R[Y])),r.state.value[e][Y]=D);else if(typeof D=="function"){const le=x(D,Y);K[Y]=le,f.actions[Y]=D}}return qn($,K),qn(Fe($),K),Object.defineProperty($,"$state",{get:()=>r.state.value[e],set:Y=>{F(D=>{qn(D,Y)})}}),r._p.forEach(Y=>{qn($,l.run(()=>Y({store:$,app:r._a,pinia:r,options:f})))}),R&&c&&n.hydrate&&n.hydrate($.$state,R),g=!0,y=!0,$}/*! #__NO_SIDE_EFFECTS__ */function Tg(e,t,n){let r,o;const c=typeof t=="function";typeof e=="string"?(r=e,o=c?n:t):(o=e,r=e.id);function l(f,d){const g=a0();return f=f||(g?Ut(Og,null):null),f&&mo(f),f=Cg,f._s.has(r)||(c?Sg(r,t,o,f):Rv(r,o,f)),f._s.get(r)}return l.$id=r,l}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Hs=typeof document<"u";function Rg(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Av(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Rg(e.default)}const Ge=Object.assign;function ba(e,t){const n={};for(const r in t){const o=t[r];n[r]=ln(o)?o.map(e):e(o)}return n}const Gr=()=>{},ln=Array.isArray,Ag=/#/g,Iv=/&/g,Pv=/\//g,kv=/=/g,Lv=/\?/g,Ig=/\+/g,Mv=/%5B/g,Nv=/%5D/g,Pg=/%5E/g,xv=/%60/g,kg=/%7B/g,Dv=/%7C/g,Lg=/%7D/g,Fv=/%20/g;function Wc(e){return encodeURI(""+e).replace(Dv,"|").replace(Mv,"[").replace(Nv,"]")}function Uv(e){return Wc(e).replace(kg,"{").replace(Lg,"}").replace(Pg,"^")}function $a(e){return Wc(e).replace(Ig,"%2B").replace(Fv,"+").replace(Ag,"%23").replace(Iv,"%26").replace(xv,"`").replace(kg,"{").replace(Lg,"}").replace(Pg,"^")}function Bv(e){return $a(e).replace(kv,"%3D")}function Hv(e){return Wc(e).replace(Ag,"%23").replace(Lv,"%3F")}function Gv(e){return e==null?"":Hv(e).replace(Pv,"%2F")}function Yr(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const jv=/\/$/,$v=e=>e.replace(jv,"");function va(e,t,n="/"){let r,o={},c="",l="";const f=t.indexOf("#");let d=t.indexOf("?");return f<d&&f>=0&&(d=-1),d>-1&&(r=t.slice(0,d),c=t.slice(d+1,f>-1?f:t.length),o=e(c)),f>-1&&(r=r||t.slice(0,f),l=t.slice(f,t.length)),r=Kv(r??t,n),{fullPath:r+(c&&"?")+c+l,path:r,query:o,hash:Yr(l)}}function Wv(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function uf(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Vv(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&Qs(t.matched[r],n.matched[o])&&Mg(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Qs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Mg(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!qv(e[n],t[n]))return!1;return!0}function qv(e,t){return ln(e)?ff(e,t):ln(t)?ff(t,e):e===t}function ff(e,t){return ln(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Kv(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let c=n.length-1,l,f;for(l=0;l<r.length;l++)if(f=r[l],f!==".")if(f==="..")c>1&&c--;else break;return n.slice(0,c).join("/")+"/"+r.slice(l).join("/")}const $n={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Xr;(function(e){e.pop="pop",e.push="push"})(Xr||(Xr={}));var jr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(jr||(jr={}));function zv(e){if(!e)if(Hs){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),$v(e)}const Jv=/^[^#]+#/;function Yv(e,t){return e.replace(Jv,"#")+t}function Xv(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const yo=()=>({left:window.scrollX,top:window.scrollY});function Qv(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=Xv(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function hf(e,t){return(history.state?history.state.position-t:-1)+e}const Wa=new Map;function Zv(e,t){Wa.set(e,t)}function eE(e){const t=Wa.get(e);return Wa.delete(e),t}let tE=()=>location.protocol+"//"+location.host;function Ng(e,t){const{pathname:n,search:r,hash:o}=t,c=e.indexOf("#");if(c>-1){let f=o.includes(e.slice(c))?e.slice(c).length:1,d=o.slice(f);return d[0]!=="/"&&(d="/"+d),uf(d,"")}return uf(n,e)+r+o}function nE(e,t,n,r){let o=[],c=[],l=null;const f=({state:b})=>{const w=Ng(e,location),R=n.value,N=t.value;let F=0;if(b){if(n.value=w,t.value=b,l&&l===R){l=null;return}F=N?b.position-N.position:0}else r(w);o.forEach(U=>{U(n.value,R,{delta:F,type:Xr.pop,direction:F?F>0?jr.forward:jr.back:jr.unknown})})};function d(){l=n.value}function g(b){o.push(b);const w=()=>{const R=o.indexOf(b);R>-1&&o.splice(R,1)};return c.push(w),w}function y(){const{history:b}=window;b.state&&b.replaceState(Ge({},b.state,{scroll:yo()}),"")}function _(){for(const b of c)b();c=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",y)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",y,{passive:!0}),{pauseListeners:d,listen:g,destroy:_}}function df(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?yo():null}}function sE(e){const{history:t,location:n}=window,r={value:Ng(e,n)},o={value:t.state};o.value||c(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function c(d,g,y){const _=e.indexOf("#"),b=_>-1?(n.host&&document.querySelector("base")?e:e.slice(_))+d:tE()+e+d;try{t[y?"replaceState":"pushState"](g,"",b),o.value=g}catch{n[y?"replace":"assign"](b)}}function l(d,g){const y=Ge({},t.state,df(o.value.back,d,o.value.forward,!0),g,{position:o.value.position});c(d,y,!0),r.value=d}function f(d,g){const y=Ge({},o.value,t.state,{forward:d,scroll:yo()});c(y.current,y,!0);const _=Ge({},df(r.value,d,null),{position:y.position+1},g);c(d,_,!1),r.value=d}return{location:r,state:o,push:f,replace:l}}function rE(e){e=zv(e);const t=sE(e),n=nE(e,t.state,t.location,t.replace);function r(c,l=!0){l||n.pauseListeners(),history.go(c)}const o=Ge({location:"",base:e,go:r,createHref:Yv.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function iE(e){return typeof e=="string"||e&&typeof e=="object"}function xg(e){return typeof e=="string"||typeof e=="symbol"}const Dg=Symbol("");var gf;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(gf||(gf={}));function Zs(e,t){return Ge(new Error,{type:e,[Dg]:!0},t)}function In(e,t){return e instanceof Error&&Dg in e&&(t==null||!!(e.type&t))}const pf="[^/]+?",oE={sensitive:!1,strict:!1,start:!0,end:!0},aE=/[.+*?^${}()[\]/\\]/g;function cE(e,t){const n=Ge({},oE,t),r=[];let o=n.start?"^":"";const c=[];for(const g of e){const y=g.length?[]:[90];n.strict&&!g.length&&(o+="/");for(let _=0;_<g.length;_++){const b=g[_];let w=40+(n.sensitive?.25:0);if(b.type===0)_||(o+="/"),o+=b.value.replace(aE,"\\$&"),w+=40;else if(b.type===1){const{value:R,repeatable:N,optional:F,regexp:U}=b;c.push({name:R,repeatable:N,optional:F});const q=U||pf;if(q!==pf){w+=10;try{new RegExp(`(${q})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${R}" (${q}): `+C.message)}}let x=N?`((?:${q})(?:/(?:${q}))*)`:`(${q})`;_||(x=F&&g.length<2?`(?:/${x})`:"/"+x),F&&(x+="?"),o+=x,w+=20,F&&(w+=-8),N&&(w+=-20),q===".*"&&(w+=-50)}y.push(w)}r.push(y)}if(n.strict&&n.end){const g=r.length-1;r[g][r[g].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,n.sensitive?"":"i");function f(g){const y=g.match(l),_={};if(!y)return null;for(let b=1;b<y.length;b++){const w=y[b]||"",R=c[b-1];_[R.name]=w&&R.repeatable?w.split("/"):w}return _}function d(g){let y="",_=!1;for(const b of e){(!_||!y.endsWith("/"))&&(y+="/"),_=!1;for(const w of b)if(w.type===0)y+=w.value;else if(w.type===1){const{value:R,repeatable:N,optional:F}=w,U=R in g?g[R]:"";if(ln(U)&&!N)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const q=ln(U)?U.join("/"):U;if(!q)if(F)b.length<2&&(y.endsWith("/")?y=y.slice(0,-1):_=!0);else throw new Error(`Missing required param "${R}"`);y+=q}}return y||"/"}return{re:l,score:r,keys:c,parse:f,stringify:d}}function lE(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Fg(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const c=lE(r[n],o[n]);if(c)return c;n++}if(Math.abs(o.length-r.length)===1){if(mf(r))return 1;if(mf(o))return-1}return o.length-r.length}function mf(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const uE={type:0,value:""},fE=/[a-zA-Z0-9_]/;function hE(e){if(!e)return[[]];if(e==="/")return[[uE]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(w){throw new Error(`ERR (${n})/"${g}": ${w}`)}let n=0,r=n;const o=[];let c;function l(){c&&o.push(c),c=[]}let f=0,d,g="",y="";function _(){g&&(n===0?c.push({type:0,value:g}):n===1||n===2||n===3?(c.length>1&&(d==="*"||d==="+")&&t(`A repeatable param (${g}) must be alone in its segment. eg: '/:ids+.`),c.push({type:1,value:g,regexp:y,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):t("Invalid state to consume buffer"),g="")}function b(){g+=d}for(;f<e.length;){if(d=e[f++],d==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:d==="/"?(g&&_(),l()):d===":"?(_(),n=1):b();break;case 4:b(),n=r;break;case 1:d==="("?n=2:fE.test(d)?b():(_(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&f--);break;case 2:d===")"?y[y.length-1]=="\\"?y=y.slice(0,-1)+d:n=3:y+=d;break;case 3:_(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&f--,y="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${g}"`),_(),l(),o}function dE(e,t,n){const r=cE(hE(e.path),n),o=Ge(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function gE(e,t){const n=[],r=new Map;t=vf({strict:!1,end:!0,sensitive:!1},t);function o(_){return r.get(_)}function c(_,b,w){const R=!w,N=_f(_);N.aliasOf=w&&w.record;const F=vf(t,_),U=[N];if("alias"in _){const C=typeof _.alias=="string"?[_.alias]:_.alias;for(const $ of C)U.push(_f(Ge({},N,{components:w?w.record.components:N.components,path:$,aliasOf:w?w.record:N})))}let q,x;for(const C of U){const{path:$}=C;if(b&&$[0]!=="/"){const B=b.record.path,K=B[B.length-1]==="/"?"":"/";C.path=b.record.path+($&&K+$)}if(q=dE(C,b,F),w?w.alias.push(q):(x=x||q,x!==q&&x.alias.push(q),R&&_.name&&!bf(q)&&l(_.name)),Ug(q)&&d(q),N.children){const B=N.children;for(let K=0;K<B.length;K++)c(B[K],q,w&&w.children[K])}w=w||q}return x?()=>{l(x)}:Gr}function l(_){if(xg(_)){const b=r.get(_);b&&(r.delete(_),n.splice(n.indexOf(b),1),b.children.forEach(l),b.alias.forEach(l))}else{const b=n.indexOf(_);b>-1&&(n.splice(b,1),_.record.name&&r.delete(_.record.name),_.children.forEach(l),_.alias.forEach(l))}}function f(){return n}function d(_){const b=yE(_,n);n.splice(b,0,_),_.record.name&&!bf(_)&&r.set(_.record.name,_)}function g(_,b){let w,R={},N,F;if("name"in _&&_.name){if(w=r.get(_.name),!w)throw Zs(1,{location:_});F=w.record.name,R=Ge(yf(b.params,w.keys.filter(x=>!x.optional).concat(w.parent?w.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),_.params&&yf(_.params,w.keys.map(x=>x.name))),N=w.stringify(R)}else if(_.path!=null)N=_.path,w=n.find(x=>x.re.test(N)),w&&(R=w.parse(N),F=w.record.name);else{if(w=b.name?r.get(b.name):n.find(x=>x.re.test(b.path)),!w)throw Zs(1,{location:_,currentLocation:b});F=w.record.name,R=Ge({},b.params,_.params),N=w.stringify(R)}const U=[];let q=w;for(;q;)U.unshift(q.record),q=q.parent;return{name:F,path:N,params:R,matched:U,meta:mE(U)}}e.forEach(_=>c(_));function y(){n.length=0,r.clear()}return{addRoute:c,resolve:g,removeRoute:l,clearRoutes:y,getRoutes:f,getRecordMatcher:o}}function yf(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function _f(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:pE(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function pE(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function bf(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mE(e){return e.reduce((t,n)=>Ge(t,n.meta),{})}function vf(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function yE(e,t){let n=0,r=t.length;for(;n!==r;){const c=n+r>>1;Fg(e,t[c])<0?r=c:n=c+1}const o=_E(e);return o&&(r=t.lastIndexOf(o,r-1)),r}function _E(e){let t=e;for(;t=t.parent;)if(Ug(t)&&Fg(e,t)===0)return t}function Ug({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function bE(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const c=r[o].replace(Ig," "),l=c.indexOf("="),f=Yr(l<0?c:c.slice(0,l)),d=l<0?null:Yr(c.slice(l+1));if(f in t){let g=t[f];ln(g)||(g=t[f]=[g]),g.push(d)}else t[f]=d}return t}function Ef(e){let t="";for(let n in e){const r=e[n];if(n=Bv(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(ln(r)?r.map(c=>c&&$a(c)):[r&&$a(r)]).forEach(c=>{c!==void 0&&(t+=(t.length?"&":"")+n,c!=null&&(t+="="+c))})}return t}function vE(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=ln(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return t}const EE=Symbol(""),Cf=Symbol(""),Vc=Symbol(""),Bg=Symbol(""),Va=Symbol("");function wr(){let e=[];function t(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Yn(e,t,n,r,o,c=l=>l()){const l=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((f,d)=>{const g=b=>{b===!1?d(Zs(4,{from:n,to:t})):b instanceof Error?d(b):iE(b)?d(Zs(2,{from:t,to:b})):(l&&r.enterCallbacks[o]===l&&typeof b=="function"&&l.push(b),f())},y=c(()=>e.call(r&&r.instances[o],t,n,g));let _=Promise.resolve(y);e.length<3&&(_=_.then(g)),_.catch(b=>d(b))})}function Ea(e,t,n,r,o=c=>c()){const c=[];for(const l of e)for(const f in l.components){let d=l.components[f];if(!(t!=="beforeRouteEnter"&&!l.instances[f]))if(Rg(d)){const y=(d.__vccOpts||d)[t];y&&c.push(Yn(y,n,r,l,f,o))}else{let g=d();c.push(()=>g.then(y=>{if(!y)throw new Error(`Couldn't resolve component "${f}" at "${l.path}"`);const _=Av(y)?y.default:y;l.mods[f]=y,l.components[f]=_;const w=(_.__vccOpts||_)[t];return w&&Yn(w,n,r,l,f,o)()}))}}return c}function Of(e){const t=Ut(Vc),n=Ut(Bg),r=$e(()=>{const d=on(e.to);return t.resolve(d)}),o=$e(()=>{const{matched:d}=r.value,{length:g}=d,y=d[g-1],_=n.matched;if(!y||!_.length)return-1;const b=_.findIndex(Qs.bind(null,y));if(b>-1)return b;const w=wf(d[g-2]);return g>1&&wf(y)===w&&_[_.length-1].path!==w?_.findIndex(Qs.bind(null,d[g-2])):b}),c=$e(()=>o.value>-1&&TE(n.params,r.value.params)),l=$e(()=>o.value>-1&&o.value===n.matched.length-1&&Mg(n.params,r.value.params));function f(d={}){if(SE(d)){const g=t[on(e.replace)?"replace":"push"](on(e.to)).catch(Gr);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>g),g}return Promise.resolve()}return{route:r,href:$e(()=>r.value.href),isActive:c,isExactActive:l,navigate:f}}function CE(e){return e.length===1?e[0]:e}const OE=Mt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Of,setup(e,{slots:t}){const n=On(Of(e)),{options:r}=Ut(Vc),o=$e(()=>({[Sf(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Sf(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const c=t.default&&CE(t.default(n));return e.custom?c:ci("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},c)}}}),wE=OE;function SE(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function TE(e,t){for(const n in t){const r=t[n],o=e[n];if(typeof r=="string"){if(r!==o)return!1}else if(!ln(o)||o.length!==r.length||r.some((c,l)=>c!==o[l]))return!1}return!0}function wf(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Sf=(e,t,n)=>e??t??n,RE=Mt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Ut(Va),o=$e(()=>e.route||r.value),c=Ut(Cf,0),l=$e(()=>{let g=on(c);const{matched:y}=o.value;let _;for(;(_=y[g])&&!_.components;)g++;return g}),f=$e(()=>o.value.matched[l.value]);Js(Cf,$e(()=>l.value+1)),Js(EE,f),Js(Va,o);const d=He();return dt(()=>[d.value,f.value,e.name],([g,y,_],[b,w,R])=>{y&&(y.instances[_]=g,w&&w!==y&&g&&g===b&&(y.leaveGuards.size||(y.leaveGuards=w.leaveGuards),y.updateGuards.size||(y.updateGuards=w.updateGuards))),g&&y&&(!w||!Qs(y,w)||!b)&&(y.enterCallbacks[_]||[]).forEach(N=>N(g))},{flush:"post"}),()=>{const g=o.value,y=e.name,_=f.value,b=_&&_.components[y];if(!b)return Tf(n.default,{Component:b,route:g});const w=_.props[y],R=w?w===!0?g.params:typeof w=="function"?w(g):w:null,F=ci(b,Ge({},R,t,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(_.instances[y]=null)},ref:d}));return Tf(n.default,{Component:F,route:g})||F}}});function Tf(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Hg=RE;function AE(e){const t=gE(e.routes,e),n=e.parseQuery||bE,r=e.stringifyQuery||Ef,o=e.history,c=wr(),l=wr(),f=wr(),d=Fc($n);let g=$n;Hs&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=ba.bind(null,te=>""+te),_=ba.bind(null,Gv),b=ba.bind(null,Yr);function w(te,ge){let fe,be;return xg(te)?(fe=t.getRecordMatcher(te),be=ge):be=te,t.addRoute(be,fe)}function R(te){const ge=t.getRecordMatcher(te);ge&&t.removeRoute(ge)}function N(){return t.getRoutes().map(te=>te.record)}function F(te){return!!t.getRecordMatcher(te)}function U(te,ge){if(ge=Ge({},ge||d.value),typeof te=="string"){const A=va(n,te,ge.path),z=t.resolve({path:A.path},ge),re=o.createHref(A.fullPath);return Ge(A,z,{params:b(z.params),hash:Yr(A.hash),redirectedFrom:void 0,href:re})}let fe;if(te.path!=null)fe=Ge({},te,{path:va(n,te.path,ge.path).path});else{const A=Ge({},te.params);for(const z in A)A[z]==null&&delete A[z];fe=Ge({},te,{params:_(A)}),ge.params=_(ge.params)}const be=t.resolve(fe,ge),xe=te.hash||"";be.params=y(b(be.params));const k=Wv(r,Ge({},te,{hash:Uv(xe),path:be.path})),M=o.createHref(k);return Ge({fullPath:k,hash:xe,query:r===Ef?vE(te.query):te.query||{}},be,{redirectedFrom:void 0,href:M})}function q(te){return typeof te=="string"?va(n,te,d.value.path):Ge({},te)}function x(te,ge){if(g!==te)return Zs(8,{from:ge,to:te})}function C(te){return K(te)}function $(te){return C(Ge(q(te),{replace:!0}))}function B(te){const ge=te.matched[te.matched.length-1];if(ge&&ge.redirect){const{redirect:fe}=ge;let be=typeof fe=="function"?fe(te):fe;return typeof be=="string"&&(be=be.includes("?")||be.includes("#")?be=q(be):{path:be},be.params={}),Ge({query:te.query,hash:te.hash,params:be.path!=null?{}:te.params},be)}}function K(te,ge){const fe=g=U(te),be=d.value,xe=te.state,k=te.force,M=te.replace===!0,A=B(fe);if(A)return K(Ge(q(A),{state:typeof A=="object"?Ge({},xe,A.state):xe,force:k,replace:M}),ge||fe);const z=fe;z.redirectedFrom=ge;let re;return!k&&Vv(r,be,fe)&&(re=Zs(16,{to:z,from:be}),qe(be,be,!0,!1)),(re?Promise.resolve(re):le(z,be)).catch(ee=>In(ee)?In(ee,2)?ee:Ne(ee):X(ee,z,be)).then(ee=>{if(ee){if(In(ee,2))return K(Ge({replace:M},q(ee.to),{state:typeof ee.to=="object"?Ge({},xe,ee.to.state):xe,force:k}),ge||z)}else ee=v(z,be,!0,M,xe);return p(z,be,ee),ee})}function Y(te,ge){const fe=x(te,ge);return fe?Promise.reject(fe):Promise.resolve()}function D(te){const ge=_t.values().next().value;return ge&&typeof ge.runWithContext=="function"?ge.runWithContext(te):te()}function le(te,ge){let fe;const[be,xe,k]=IE(te,ge);fe=Ea(be.reverse(),"beforeRouteLeave",te,ge);for(const A of be)A.leaveGuards.forEach(z=>{fe.push(Yn(z,te,ge))});const M=Y.bind(null,te,ge);return fe.push(M),it(fe).then(()=>{fe=[];for(const A of c.list())fe.push(Yn(A,te,ge));return fe.push(M),it(fe)}).then(()=>{fe=Ea(xe,"beforeRouteUpdate",te,ge);for(const A of xe)A.updateGuards.forEach(z=>{fe.push(Yn(z,te,ge))});return fe.push(M),it(fe)}).then(()=>{fe=[];for(const A of k)if(A.beforeEnter)if(ln(A.beforeEnter))for(const z of A.beforeEnter)fe.push(Yn(z,te,ge));else fe.push(Yn(A.beforeEnter,te,ge));return fe.push(M),it(fe)}).then(()=>(te.matched.forEach(A=>A.enterCallbacks={}),fe=Ea(k,"beforeRouteEnter",te,ge,D),fe.push(M),it(fe))).then(()=>{fe=[];for(const A of l.list())fe.push(Yn(A,te,ge));return fe.push(M),it(fe)}).catch(A=>In(A,8)?A:Promise.reject(A))}function p(te,ge,fe){f.list().forEach(be=>D(()=>be(te,ge,fe)))}function v(te,ge,fe,be,xe){const k=x(te,ge);if(k)return k;const M=ge===$n,A=Hs?history.state:{};fe&&(be||M?o.replace(te.fullPath,Ge({scroll:M&&A&&A.scroll},xe)):o.push(te.fullPath,xe)),d.value=te,qe(te,ge,fe,M),Ne()}let I;function E(){I||(I=o.listen((te,ge,fe)=>{if(!Vt.listening)return;const be=U(te),xe=B(be);if(xe){K(Ge(xe,{replace:!0,force:!0}),be).catch(Gr);return}g=be;const k=d.value;Hs&&Zv(hf(k.fullPath,fe.delta),yo()),le(be,k).catch(M=>In(M,12)?M:In(M,2)?(K(Ge(q(M.to),{force:!0}),be).then(A=>{In(A,20)&&!fe.delta&&fe.type===Xr.pop&&o.go(-1,!1)}).catch(Gr),Promise.reject()):(fe.delta&&o.go(-fe.delta,!1),X(M,be,k))).then(M=>{M=M||v(be,k,!1),M&&(fe.delta&&!In(M,8)?o.go(-fe.delta,!1):fe.type===Xr.pop&&In(M,20)&&o.go(-1,!1)),p(be,k,M)}).catch(Gr)}))}let P=wr(),ae=wr(),j;function X(te,ge,fe){Ne(te);const be=ae.list();return be.length&&be.forEach(xe=>xe(te,ge,fe)),Promise.reject(te)}function _e(){return j&&d.value!==$n?Promise.resolve():new Promise((te,ge)=>{P.add([te,ge])})}function Ne(te){return j||(j=!te,E(),P.list().forEach(([ge,fe])=>te?fe(te):ge()),P.reset()),te}function qe(te,ge,fe,be){const{scrollBehavior:xe}=e;if(!Hs||!xe)return Promise.resolve();const k=!fe&&eE(hf(te.fullPath,0))||(be||!fe)&&history.state&&history.state.scroll||null;return Zn().then(()=>xe(te,ge,k)).then(M=>M&&Qv(M)).catch(M=>X(M,te,ge))}const Me=te=>o.go(te);let Nt;const _t=new Set,Vt={currentRoute:d,listening:!0,addRoute:w,removeRoute:R,clearRoutes:t.clearRoutes,hasRoute:F,getRoutes:N,resolve:U,options:e,push:C,replace:$,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:c.add,beforeResolve:l.add,afterEach:f.add,onError:ae.add,isReady:_e,install(te){const ge=this;te.component("RouterLink",wE),te.component("RouterView",Hg),te.config.globalProperties.$router=ge,Object.defineProperty(te.config.globalProperties,"$route",{enumerable:!0,get:()=>on(d)}),Hs&&!Nt&&d.value===$n&&(Nt=!0,C(o.location).catch(xe=>{}));const fe={};for(const xe in $n)Object.defineProperty(fe,xe,{get:()=>d.value[xe],enumerable:!0});te.provide(Vc,ge),te.provide(Bg,fd(fe)),te.provide(Va,d);const be=te.unmount;_t.add(te),te.unmount=function(){_t.delete(te),_t.size<1&&(g=$n,I&&I(),I=null,d.value=$n,Nt=!1,j=!1),be()}}};function it(te){return te.reduce((ge,fe)=>ge.then(()=>D(fe)),Promise.resolve())}return Vt}function IE(e,t){const n=[],r=[],o=[],c=Math.max(t.matched.length,e.matched.length);for(let l=0;l<c;l++){const f=t.matched[l];f&&(e.matched.find(g=>Qs(g,f))?r.push(f):n.push(f));const d=e.matched[l];d&&(t.matched.find(g=>Qs(g,d))||o.push(d))}return[n,r,o]}const PE={},kE=Object.freeze(Object.defineProperty({__proto__:null,default:PE},Symbol.toStringTag,{value:"Module"})),LE={loadingTips:"Đơn hàng được xử lý, vui lòng kiên nhẫn đợi",accessAuthTip:"Tham số sai, hãy gửi lại!",completeTransfer:"Vui lòng hoàn thành quét mã chuyển tiền",warmPrompt:"Xin lưu ý",warmPrompt1:"1. Kiểm tra chính xác tài khoản và họ tên người nhận tiền, bất kì lỗi chuyển khoản hoặc hiển thị tài khoản sai đều không giải quyết",warmPrompt2:"2. Nhập vào đúng nội dung chuyển khoản {identifier} để nhận cập nhật giao dịch nhanh nhất",warmPrompt3:"3. Chuyển khoản chính xác số tiền giao dịch, chỉ hỗ trợ các khoản nạp trên {amount}.",warmPrompt4:"4. Vui lòng không lưu tài khoản nhận tiền ngân hàng dưới bất kì hình thức nào, để tránh mất mát tiền bạc",pemainingPaymentTime:"Thời gian nhận tiền còn lại",ChannelName:"Tên kênh",BankName:"Tên ngân hàng",Payee:"Người nhận tiền",BankCardNumber:"Số tài khoản ngân hàng",OrderAmount:"Số tiền đơn hàng",OrderIdentificationCode:"Nội dung chuyển khoản",receiveAccount:"Tài khoản nhận tiền",copySuccess:"Copy thành công",copyFail:"Copy thất bại",PaymentTimeout:"Nhận tiền quá giờ",PaymentSuccess:"Thanh toán thành công",PageHasExpired:"Trang web đã mất hiệu lực",externalChannel_warmPrompt1:"1.Hãy sử dụng mobile banking quét mã thanh toán",externalChannel_warmPrompt2:"2.Thông tin chuyển khoản ở bên phải chỉ dùng để đối chiếu, vui lòng không sử dụng trực tiếp, sẽ  dẫn đến không thể tự động lên điểm nhanh, để tránh tổn thất về tiền bạc",externalChannel_warmPrompt3:"3.Vui lòng không lưu tài khoản ngân hàng nhận tiền dưới bất kì hình thức nào, để tránh tổn thất về tiền bạc"},ME=Object.freeze(Object.defineProperty({__proto__:null,default:LE},Symbol.toStringTag,{value:"Module"})),NE={loadingTips:"订单处理中，请耐心等待",accessAuthTip:"参数错误，请重新发起！",completeTransfer:"请完成扫码转账",warmPrompt:"温馨提示",warmPrompt1:"1、检查准确的账号和收款人姓名，任何转账错误或显示错误帐户的情况都将无法解决。",warmPrompt2:"2、输入正确的转账内容 {identifier} 以获得最快的交易更新。",warmPrompt3:"3、转账准确交易金额，仅支持{amount}越南盾以上存款。",warmPrompt4:"4、请勿以任何形式保存收款银行账户，以免造成资金损失。",pemainingPaymentTime:"剩余收款时间",ChannelName:"渠道名称",BankName:"银行名称",Payee:"收款人",BankCardNumber:"银行卡号",OrderAmount:"订单金额",OrderIdentificationCode:"订单识别码",receiveAccount:"收款账号",copySuccess:"复制成功",copyFail:"复制失败",PaymentTimeout:"收款超时",PaymentSuccess:"支付成功",PageHasExpired:"页面已失效",externalChannel_warmPrompt1:"1、请使用手机银行扫码支付",externalChannel_warmPrompt2:"2、右侧的转账信息仅用于核对，请勿直接使用，会导致无法快速自动上分，以免造成资金损失",externalChannel_warmPrompt3:"3、请勿以任何形式保存收款银行账户，以免造成资金损失"},xE=Object.freeze(Object.defineProperty({__proto__:null,default:NE},Symbol.toStringTag,{value:"Module"}));/*!
  * shared v9.14.3
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const Zi=typeof window<"u",as=(e,t=!1)=>t?Symbol.for(e):Symbol(e),DE=(e,t,n)=>FE({l:e,k:t,s:n}),FE=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),st=e=>typeof e=="number"&&isFinite(e),UE=e=>jg(e)==="[object Date]",ns=e=>jg(e)==="[object RegExp]",_o=e=>Ie(e)&&Object.keys(e).length===0,yt=Object.assign,BE=Object.create,Ve=(e=null)=>BE(e);let Rf;const xn=()=>Rf||(Rf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Ve());function Af(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const HE=Object.prototype.hasOwnProperty;function Zt(e,t){return HE.call(e,t)}const Qe=Array.isArray,Xe=e=>typeof e=="function",pe=e=>typeof e=="string",Le=e=>typeof e=="boolean",Be=e=>e!==null&&typeof e=="object",GE=e=>Be(e)&&Xe(e.then)&&Xe(e.catch),Gg=Object.prototype.toString,jg=e=>Gg.call(e),Ie=e=>{if(!Be(e))return!1;const t=Object.getPrototypeOf(e);return t===null||t.constructor===Object},jE=e=>e==null?"":Qe(e)||Ie(e)&&e.toString===Gg?JSON.stringify(e,null,2):String(e);function $E(e,t=""){return e.reduce((n,r,o)=>o===0?n+r:n+t+r,"")}function bo(e){let t=e;return()=>++t}function WE(e,t){}const Ti=e=>!Be(e)||Qe(e);function Di(e,t){if(Ti(e)||Ti(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:r,des:o}=n.pop();Object.keys(r).forEach(c=>{c!=="__proto__"&&(Be(r[c])&&!Be(o[c])&&(o[c]=Array.isArray(r[c])?[]:Ve()),Ti(o[c])||Ti(r[c])?o[c]=r[c]:n.push({src:r[c],des:o[c]}))})}}/*!
  * message-compiler v9.14.3
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function VE(e,t,n){return{line:e,column:t,offset:n}}function eo(e,t,n){return{start:e,end:t}}const qE=/\{([0-9a-zA-Z]+)\}/g;function $g(e,...t){return t.length===1&&KE(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(qE,(n,r)=>t.hasOwnProperty(r)?t[r]:"")}const Wg=Object.assign,If=e=>typeof e=="string",KE=e=>e!==null&&typeof e=="object";function Vg(e,t=""){return e.reduce((n,r,o)=>o===0?n+r:n+t+r,"")}const qc={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},zE={[qc.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function JE(e,t,...n){const r=$g(zE[e],...n||[]),o={message:String(r),code:e};return t&&(o.location=t),o}const we={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},YE={[we.EXPECTED_TOKEN]:"Expected token: '{0}'",[we.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[we.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[we.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[we.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[we.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[we.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[we.EMPTY_PLACEHOLDER]:"Empty placeholder",[we.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[we.INVALID_LINKED_FORMAT]:"Invalid linked format",[we.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[we.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[we.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[we.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[we.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[we.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function rr(e,t,n={}){const{domain:r,messages:o,args:c}=n,l=$g((o||YE)[e]||"",...c||[]),f=new SyntaxError(String(l));return f.code=e,t&&(f.location=t),f.domain=r,f}function XE(e){throw e}const Pn=" ",QE="\r",Rt=`
`,ZE="\u2028",eC="\u2029";function tC(e){const t=e;let n=0,r=1,o=1,c=0;const l=K=>t[K]===QE&&t[K+1]===Rt,f=K=>t[K]===Rt,d=K=>t[K]===eC,g=K=>t[K]===ZE,y=K=>l(K)||f(K)||d(K)||g(K),_=()=>n,b=()=>r,w=()=>o,R=()=>c,N=K=>l(K)||d(K)||g(K)?Rt:t[K],F=()=>N(n),U=()=>N(n+c);function q(){return c=0,y(n)&&(r++,o=0),l(n)&&n++,n++,o++,t[n]}function x(){return l(n+c)&&c++,c++,t[n+c]}function C(){n=0,r=1,o=1,c=0}function $(K=0){c=K}function B(){const K=n+c;for(;K!==n;)q();c=0}return{index:_,line:b,column:w,peekOffset:R,charAt:N,currentChar:F,currentPeek:U,next:q,peek:x,reset:C,resetPeek:$,skipToPeek:B}}const Wn=void 0,nC=".",Pf="'",sC="tokenizer";function rC(e,t={}){const n=t.location!==!1,r=tC(e),o=()=>r.index(),c=()=>VE(r.line(),r.column(),r.index()),l=c(),f=o(),d={currentType:14,offset:f,startLoc:l,endLoc:l,lastType:14,lastOffset:f,lastStartLoc:l,lastEndLoc:l,braceNest:0,inLinked:!1,text:""},g=()=>d,{onError:y}=t;function _(S,T,H,...Q){const he=g();if(T.column+=H,T.offset+=H,y){const oe=n?eo(he.startLoc,T):null,V=rr(S,oe,{domain:sC,args:Q});y(V)}}function b(S,T,H){S.endLoc=c(),S.currentType=T;const Q={type:T};return n&&(Q.loc=eo(S.startLoc,S.endLoc)),H!=null&&(Q.value=H),Q}const w=S=>b(S,14);function R(S,T){return S.currentChar()===T?(S.next(),T):(_(we.EXPECTED_TOKEN,c(),0,T),"")}function N(S){let T="";for(;S.currentPeek()===Pn||S.currentPeek()===Rt;)T+=S.currentPeek(),S.peek();return T}function F(S){const T=N(S);return S.skipToPeek(),T}function U(S){if(S===Wn)return!1;const T=S.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T===95}function q(S){if(S===Wn)return!1;const T=S.charCodeAt(0);return T>=48&&T<=57}function x(S,T){const{currentType:H}=T;if(H!==2)return!1;N(S);const Q=U(S.currentPeek());return S.resetPeek(),Q}function C(S,T){const{currentType:H}=T;if(H!==2)return!1;N(S);const Q=S.currentPeek()==="-"?S.peek():S.currentPeek(),he=q(Q);return S.resetPeek(),he}function $(S,T){const{currentType:H}=T;if(H!==2)return!1;N(S);const Q=S.currentPeek()===Pf;return S.resetPeek(),Q}function B(S,T){const{currentType:H}=T;if(H!==8)return!1;N(S);const Q=S.currentPeek()===".";return S.resetPeek(),Q}function K(S,T){const{currentType:H}=T;if(H!==9)return!1;N(S);const Q=U(S.currentPeek());return S.resetPeek(),Q}function Y(S,T){const{currentType:H}=T;if(!(H===8||H===12))return!1;N(S);const Q=S.currentPeek()===":";return S.resetPeek(),Q}function D(S,T){const{currentType:H}=T;if(H!==10)return!1;const Q=()=>{const oe=S.currentPeek();return oe==="{"?U(S.peek()):oe==="@"||oe==="%"||oe==="|"||oe===":"||oe==="."||oe===Pn||!oe?!1:oe===Rt?(S.peek(),Q()):v(S,!1)},he=Q();return S.resetPeek(),he}function le(S){N(S);const T=S.currentPeek()==="|";return S.resetPeek(),T}function p(S){const T=N(S),H=S.currentPeek()==="%"&&S.peek()==="{";return S.resetPeek(),{isModulo:H,hasSpace:T.length>0}}function v(S,T=!0){const H=(he=!1,oe="",V=!1)=>{const Z=S.currentPeek();return Z==="{"?oe==="%"?!1:he:Z==="@"||!Z?oe==="%"?!0:he:Z==="%"?(S.peek(),H(he,"%",!0)):Z==="|"?oe==="%"||V?!0:!(oe===Pn||oe===Rt):Z===Pn?(S.peek(),H(!0,Pn,V)):Z===Rt?(S.peek(),H(!0,Rt,V)):!0},Q=H();return T&&S.resetPeek(),Q}function I(S,T){const H=S.currentChar();return H===Wn?Wn:T(H)?(S.next(),H):null}function E(S){const T=S.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===95||T===36}function P(S){return I(S,E)}function ae(S){const T=S.charCodeAt(0);return T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===95||T===36||T===45}function j(S){return I(S,ae)}function X(S){const T=S.charCodeAt(0);return T>=48&&T<=57}function _e(S){return I(S,X)}function Ne(S){const T=S.charCodeAt(0);return T>=48&&T<=57||T>=65&&T<=70||T>=97&&T<=102}function qe(S){return I(S,Ne)}function Me(S){let T="",H="";for(;T=_e(S);)H+=T;return H}function Nt(S){F(S);const T=S.currentChar();return T!=="%"&&_(we.EXPECTED_TOKEN,c(),0,T),S.next(),"%"}function _t(S){let T="";for(;;){const H=S.currentChar();if(H==="{"||H==="}"||H==="@"||H==="|"||!H)break;if(H==="%")if(v(S))T+=H,S.next();else break;else if(H===Pn||H===Rt)if(v(S))T+=H,S.next();else{if(le(S))break;T+=H,S.next()}else T+=H,S.next()}return T}function Vt(S){F(S);let T="",H="";for(;T=j(S);)H+=T;return S.currentChar()===Wn&&_(we.UNTERMINATED_CLOSING_BRACE,c(),0),H}function it(S){F(S);let T="";return S.currentChar()==="-"?(S.next(),T+=`-${Me(S)}`):T+=Me(S),S.currentChar()===Wn&&_(we.UNTERMINATED_CLOSING_BRACE,c(),0),T}function te(S){return S!==Pf&&S!==Rt}function ge(S){F(S),R(S,"'");let T="",H="";for(;T=I(S,te);)T==="\\"?H+=fe(S):H+=T;const Q=S.currentChar();return Q===Rt||Q===Wn?(_(we.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,c(),0),Q===Rt&&(S.next(),R(S,"'")),H):(R(S,"'"),H)}function fe(S){const T=S.currentChar();switch(T){case"\\":case"'":return S.next(),`\\${T}`;case"u":return be(S,T,4);case"U":return be(S,T,6);default:return _(we.UNKNOWN_ESCAPE_SEQUENCE,c(),0,T),""}}function be(S,T,H){R(S,T);let Q="";for(let he=0;he<H;he++){const oe=qe(S);if(!oe){_(we.INVALID_UNICODE_ESCAPE_SEQUENCE,c(),0,`\\${T}${Q}${S.currentChar()}`);break}Q+=oe}return`\\${T}${Q}`}function xe(S){return S!=="{"&&S!=="}"&&S!==Pn&&S!==Rt}function k(S){F(S);let T="",H="";for(;T=I(S,xe);)H+=T;return H}function M(S){let T="",H="";for(;T=P(S);)H+=T;return H}function A(S){const T=H=>{const Q=S.currentChar();return Q==="{"||Q==="%"||Q==="@"||Q==="|"||Q==="("||Q===")"||!Q||Q===Pn?H:(H+=Q,S.next(),T(H))};return T("")}function z(S){F(S);const T=R(S,"|");return F(S),T}function re(S,T){let H=null;switch(S.currentChar()){case"{":return T.braceNest>=1&&_(we.NOT_ALLOW_NEST_PLACEHOLDER,c(),0),S.next(),H=b(T,2,"{"),F(S),T.braceNest++,H;case"}":return T.braceNest>0&&T.currentType===2&&_(we.EMPTY_PLACEHOLDER,c(),0),S.next(),H=b(T,3,"}"),T.braceNest--,T.braceNest>0&&F(S),T.inLinked&&T.braceNest===0&&(T.inLinked=!1),H;case"@":return T.braceNest>0&&_(we.UNTERMINATED_CLOSING_BRACE,c(),0),H=ee(S,T)||w(T),T.braceNest=0,H;default:{let he=!0,oe=!0,V=!0;if(le(S))return T.braceNest>0&&_(we.UNTERMINATED_CLOSING_BRACE,c(),0),H=b(T,1,z(S)),T.braceNest=0,T.inLinked=!1,H;if(T.braceNest>0&&(T.currentType===5||T.currentType===6||T.currentType===7))return _(we.UNTERMINATED_CLOSING_BRACE,c(),0),T.braceNest=0,ue(S,T);if(he=x(S,T))return H=b(T,5,Vt(S)),F(S),H;if(oe=C(S,T))return H=b(T,6,it(S)),F(S),H;if(V=$(S,T))return H=b(T,7,ge(S)),F(S),H;if(!he&&!oe&&!V)return H=b(T,13,k(S)),_(we.INVALID_TOKEN_IN_PLACEHOLDER,c(),0,H.value),F(S),H;break}}return H}function ee(S,T){const{currentType:H}=T;let Q=null;const he=S.currentChar();switch((H===8||H===9||H===12||H===10)&&(he===Rt||he===Pn)&&_(we.INVALID_LINKED_FORMAT,c(),0),he){case"@":return S.next(),Q=b(T,8,"@"),T.inLinked=!0,Q;case".":return F(S),S.next(),b(T,9,".");case":":return F(S),S.next(),b(T,10,":");default:return le(S)?(Q=b(T,1,z(S)),T.braceNest=0,T.inLinked=!1,Q):B(S,T)||Y(S,T)?(F(S),ee(S,T)):K(S,T)?(F(S),b(T,12,M(S))):D(S,T)?(F(S),he==="{"?re(S,T)||Q:b(T,11,A(S))):(H===8&&_(we.INVALID_LINKED_FORMAT,c(),0),T.braceNest=0,T.inLinked=!1,ue(S,T))}}function ue(S,T){let H={type:14};if(T.braceNest>0)return re(S,T)||w(T);if(T.inLinked)return ee(S,T)||w(T);switch(S.currentChar()){case"{":return re(S,T)||w(T);case"}":return _(we.UNBALANCED_CLOSING_BRACE,c(),0),S.next(),b(T,3,"}");case"@":return ee(S,T)||w(T);default:{if(le(S))return H=b(T,1,z(S)),T.braceNest=0,T.inLinked=!1,H;const{isModulo:he,hasSpace:oe}=p(S);if(he)return oe?b(T,0,_t(S)):b(T,4,Nt(S));if(v(S))return b(T,0,_t(S));break}}return H}function ce(){const{currentType:S,offset:T,startLoc:H,endLoc:Q}=d;return d.lastType=S,d.lastOffset=T,d.lastStartLoc=H,d.lastEndLoc=Q,d.offset=o(),d.startLoc=c(),r.currentChar()===Wn?b(d,14):ue(r,d)}return{nextToken:ce,currentOffset:o,currentPosition:c,context:g}}const iC="parser",oC=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function aC(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(t||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function cC(e={}){const t=e.location!==!1,{onError:n,onWarn:r}=e;function o(x,C,$,B,...K){const Y=x.currentPosition();if(Y.offset+=B,Y.column+=B,n){const D=t?eo($,Y):null,le=rr(C,D,{domain:iC,args:K});n(le)}}function c(x,C,$,B,...K){const Y=x.currentPosition();if(Y.offset+=B,Y.column+=B,r){const D=t?eo($,Y):null;r(JE(C,D,K))}}function l(x,C,$){const B={type:x};return t&&(B.start=C,B.end=C,B.loc={start:$,end:$}),B}function f(x,C,$,B){t&&(x.end=C,x.loc&&(x.loc.end=$))}function d(x,C){const $=x.context(),B=l(3,$.offset,$.startLoc);return B.value=C,f(B,x.currentOffset(),x.currentPosition()),B}function g(x,C){const $=x.context(),{lastOffset:B,lastStartLoc:K}=$,Y=l(5,B,K);return Y.index=parseInt(C,10),x.nextToken(),f(Y,x.currentOffset(),x.currentPosition()),Y}function y(x,C,$){const B=x.context(),{lastOffset:K,lastStartLoc:Y}=B,D=l(4,K,Y);return D.key=C,$===!0&&(D.modulo=!0),x.nextToken(),f(D,x.currentOffset(),x.currentPosition()),D}function _(x,C){const $=x.context(),{lastOffset:B,lastStartLoc:K}=$,Y=l(9,B,K);return Y.value=C.replace(oC,aC),x.nextToken(),f(Y,x.currentOffset(),x.currentPosition()),Y}function b(x){const C=x.nextToken(),$=x.context(),{lastOffset:B,lastStartLoc:K}=$,Y=l(8,B,K);return C.type!==12?(o(x,we.UNEXPECTED_EMPTY_LINKED_MODIFIER,$.lastStartLoc,0),Y.value="",f(Y,B,K),{nextConsumeToken:C,node:Y}):(C.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,$.lastStartLoc,0,Xt(C)),Y.value=C.value||"",f(Y,x.currentOffset(),x.currentPosition()),{node:Y})}function w(x,C){const $=x.context(),B=l(7,$.offset,$.startLoc);return B.value=C,f(B,x.currentOffset(),x.currentPosition()),B}function R(x){const C=x.context(),$=l(6,C.offset,C.startLoc);let B=x.nextToken();if(B.type===9){const K=b(x);$.modifier=K.node,B=K.nextConsumeToken||x.nextToken()}switch(B.type!==10&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(B)),B=x.nextToken(),B.type===2&&(B=x.nextToken()),B.type){case 11:B.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(B)),$.key=w(x,B.value||"");break;case 5:B.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(B)),$.key=y(x,B.value||"");break;case 6:B.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(B)),$.key=g(x,B.value||"");break;case 7:B.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(B)),$.key=_(x,B.value||"");break;default:{o(x,we.UNEXPECTED_EMPTY_LINKED_KEY,C.lastStartLoc,0);const K=x.context(),Y=l(7,K.offset,K.startLoc);return Y.value="",f(Y,K.offset,K.startLoc),$.key=Y,f($,K.offset,K.startLoc),{nextConsumeToken:B,node:$}}}return f($,x.currentOffset(),x.currentPosition()),{node:$}}function N(x){const C=x.context(),$=C.currentType===1?x.currentOffset():C.offset,B=C.currentType===1?C.endLoc:C.startLoc,K=l(2,$,B);K.items=[];let Y=null,D=null;do{const v=Y||x.nextToken();switch(Y=null,v.type){case 0:v.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(v)),K.items.push(d(x,v.value||""));break;case 6:v.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(v)),K.items.push(g(x,v.value||""));break;case 4:D=!0;break;case 5:v.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(v)),K.items.push(y(x,v.value||"",!!D)),D&&(c(x,qc.USE_MODULO_SYNTAX,C.lastStartLoc,0,Xt(v)),D=null);break;case 7:v.value==null&&o(x,we.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,Xt(v)),K.items.push(_(x,v.value||""));break;case 8:{const I=R(x);K.items.push(I.node),Y=I.nextConsumeToken||null;break}}}while(C.currentType!==14&&C.currentType!==1);const le=C.currentType===1?C.lastOffset:x.currentOffset(),p=C.currentType===1?C.lastEndLoc:x.currentPosition();return f(K,le,p),K}function F(x,C,$,B){const K=x.context();let Y=B.items.length===0;const D=l(1,C,$);D.cases=[],D.cases.push(B);do{const le=N(x);Y||(Y=le.items.length===0),D.cases.push(le)}while(K.currentType!==14);return Y&&o(x,we.MUST_HAVE_MESSAGES_IN_PLURAL,$,0),f(D,x.currentOffset(),x.currentPosition()),D}function U(x){const C=x.context(),{offset:$,startLoc:B}=C,K=N(x);return C.currentType===14?K:F(x,$,B,K)}function q(x){const C=rC(x,Wg({},e)),$=C.context(),B=l(0,$.offset,$.startLoc);return t&&B.loc&&(B.loc.source=x),B.body=U(C),e.onCacheKey&&(B.cacheKey=e.onCacheKey(x)),$.currentType!==14&&o(C,we.UNEXPECTED_LEXICAL_ANALYSIS,$.lastStartLoc,0,x[$.offset]||""),f(B,C.currentOffset(),C.currentPosition()),B}return{parse:q}}function Xt(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function lC(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:c=>(n.helpers.add(c),c)}}function kf(e,t){for(let n=0;n<e.length;n++)Kc(e[n],t)}function Kc(e,t){switch(e.type){case 1:kf(e.cases,t),t.helper("plural");break;case 2:kf(e.items,t);break;case 6:{Kc(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function uC(e,t={}){const n=lC(e);n.helper("normalize"),e.body&&Kc(e.body,n);const r=n.context();e.helpers=Array.from(r.helpers)}function fC(e){const t=e.body;return t.type===2?Lf(t):t.cases.forEach(n=>Lf(n)),e}function Lf(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const r=e.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;t.push(r.value)}if(t.length===e.items.length){e.static=Vg(t);for(let n=0;n<e.items.length;n++){const r=e.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const hC="minifier";function Gs(e){switch(e.t=e.type,e.type){case 0:{const t=e;Gs(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let r=0;r<n.length;r++)Gs(n[r]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let r=0;r<n.length;r++)Gs(n[r]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;Gs(t.key),t.k=t.key,delete t.key,t.modifier&&(Gs(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}default:throw rr(we.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:hC,args:[e.type]})}delete e.type}const dC="parser";function gC(e,t){const{filename:n,breakLineCode:r,needIndent:o}=t,c=t.location!==!1,l={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:o,indentLevel:0};c&&e.loc&&(l.source=e.loc.source);const f=()=>l;function d(N,F){l.code+=N}function g(N,F=!0){const U=F?r:"";d(o?U+"  ".repeat(N):U)}function y(N=!0){const F=++l.indentLevel;N&&g(F)}function _(N=!0){const F=--l.indentLevel;N&&g(F)}function b(){g(l.indentLevel)}return{context:f,push:d,indent:y,deindent:_,newline:b,helper:N=>`_${N}`,needIndent:()=>l.needIndent}}function pC(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),er(e,t.key),t.modifier?(e.push(", "),er(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function mC(e,t){const{helper:n,needIndent:r}=e;e.push(`${n("normalize")}([`),e.indent(r());const o=t.items.length;for(let c=0;c<o&&(er(e,t.items[c]),c!==o-1);c++)e.push(", ");e.deindent(r()),e.push("])")}function yC(e,t){const{helper:n,needIndent:r}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(r());const o=t.cases.length;for(let c=0;c<o&&(er(e,t.cases[c]),c!==o-1);c++)e.push(", ");e.deindent(r()),e.push("])")}}function _C(e,t){t.body?er(e,t.body):e.push("null")}function er(e,t){const{helper:n}=e;switch(t.type){case 0:_C(e,t);break;case 1:yC(e,t);break;case 2:mC(e,t);break;case 6:pC(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw rr(we.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:dC,args:[t.type]})}}const bC=(e,t={})=>{const n=If(t.mode)?t.mode:"normal",r=If(t.filename)?t.filename:"message.intl";t.sourceMap;const o=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,c=t.needIndent?t.needIndent:n!=="arrow",l=e.helpers||[],f=gC(e,{filename:r,breakLineCode:o,needIndent:c});f.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),f.indent(c),l.length>0&&(f.push(`const { ${Vg(l.map(y=>`${y}: _${y}`),", ")} } = ctx`),f.newline()),f.push("return "),er(f,e),f.deindent(c),f.push("}"),delete e.helpers;const{code:d,map:g}=f.context();return{ast:e,code:d,map:g?g.toJSON():void 0}};function vC(e,t={}){const n=Wg({},t),r=!!n.jit,o=!!n.minify,c=n.optimize==null?!0:n.optimize,f=cC(n).parse(e);return r?(c&&fC(f),o&&Gs(f),{ast:f,code:""}):(uC(f,n),bC(f,n))}/*!
  * core-base v9.14.3
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function EC(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(xn().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(xn().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(xn().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const cs=[];cs[0]={w:[0],i:[3,0],"[":[4],o:[7]};cs[1]={w:[1],".":[2],"[":[4],o:[7]};cs[2]={w:[2],i:[3,0],0:[3,0]};cs[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};cs[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};cs[5]={"'":[4,0],o:8,l:[5,0]};cs[6]={'"':[4,0],o:8,l:[6,0]};const CC=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function OC(e){return CC.test(e)}function wC(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function SC(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function TC(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:OC(t)?wC(t):"*"+t}function RC(e){const t=[];let n=-1,r=0,o=0,c,l,f,d,g,y,_;const b=[];b[0]=()=>{l===void 0?l=f:l+=f},b[1]=()=>{l!==void 0&&(t.push(l),l=void 0)},b[2]=()=>{b[0](),o++},b[3]=()=>{if(o>0)o--,r=4,b[0]();else{if(o=0,l===void 0||(l=TC(l),l===!1))return!1;b[1]()}};function w(){const R=e[n+1];if(r===5&&R==="'"||r===6&&R==='"')return n++,f="\\"+R,b[0](),!0}for(;r!==null;)if(n++,c=e[n],!(c==="\\"&&w())){if(d=SC(c),_=cs[r],g=_[d]||_.l||8,g===8||(r=g[0],g[1]!==void 0&&(y=b[g[1]],y&&(f=c,y()===!1))))return;if(r===7)return t}}const Mf=new Map;function AC(e,t){return Be(e)?e[t]:null}function IC(e,t){if(!Be(e))return null;let n=Mf.get(t);if(n||(n=RC(t),n&&Mf.set(t,n)),!n)return null;const r=n.length;let o=e,c=0;for(;c<r;){const l=o[n[c]];if(l===void 0||Xe(o))return null;o=l,c++}return o}const PC=e=>e,kC=e=>"",LC="text",MC=e=>e.length===0?"":$E(e),NC=jE;function Nf(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function xC(e){const t=st(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(st(e.named.count)||st(e.named.n))?st(e.named.count)?e.named.count:st(e.named.n)?e.named.n:t:t}function DC(e,t){t.count||(t.count=e),t.n||(t.n=e)}function FC(e={}){const t=e.locale,n=xC(e),r=Be(e.pluralRules)&&pe(t)&&Xe(e.pluralRules[t])?e.pluralRules[t]:Nf,o=Be(e.pluralRules)&&pe(t)&&Xe(e.pluralRules[t])?Nf:void 0,c=U=>U[r(n,U.length,o)],l=e.list||[],f=U=>l[U],d=e.named||Ve();st(e.pluralIndex)&&DC(n,d);const g=U=>d[U];function y(U){const q=Xe(e.messages)?e.messages(U):Be(e.messages)?e.messages[U]:!1;return q||(e.parent?e.parent.message(U):kC)}const _=U=>e.modifiers?e.modifiers[U]:PC,b=Ie(e.processor)&&Xe(e.processor.normalize)?e.processor.normalize:MC,w=Ie(e.processor)&&Xe(e.processor.interpolate)?e.processor.interpolate:NC,R=Ie(e.processor)&&pe(e.processor.type)?e.processor.type:LC,F={list:f,named:g,plural:c,linked:(U,...q)=>{const[x,C]=q;let $="text",B="";q.length===1?Be(x)?(B=x.modifier||B,$=x.type||$):pe(x)&&(B=x||B):q.length===2&&(pe(x)&&(B=x||B),pe(C)&&($=C||$));const K=y(U)(F),Y=$==="vnode"&&Qe(K)&&B?K[0]:K;return B?_(B)(Y,$):Y},message:y,type:R,interpolate:w,normalize:b,values:yt(Ve(),l,d)};return F}let Qr=null;function UC(e){Qr=e}function BC(e,t,n){Qr&&Qr.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const HC=GC("function:translate");function GC(e){return t=>Qr&&Qr.emit(e,t)}const jC=qc.__EXTEND_POINT__,gs=bo(jC),$C={FALLBACK_TO_TRANSLATE:gs(),CANNOT_FORMAT_NUMBER:gs(),FALLBACK_TO_NUMBER_FORMAT:gs(),CANNOT_FORMAT_DATE:gs(),FALLBACK_TO_DATE_FORMAT:gs(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:gs(),__EXTEND_POINT__:gs()},qg=we.__EXTEND_POINT__,ps=bo(qg),en={INVALID_ARGUMENT:qg,INVALID_DATE_ARGUMENT:ps(),INVALID_ISO_DATE_ARGUMENT:ps(),NOT_SUPPORT_NON_STRING_MESSAGE:ps(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:ps(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:ps(),NOT_SUPPORT_LOCALE_TYPE:ps(),__EXTEND_POINT__:ps()};function Cn(e){return rr(e,null,void 0)}function zc(e,t){return t.locale!=null?xf(t.locale):xf(e.locale)}let Ca;function xf(e){if(pe(e))return e;if(Xe(e)){if(e.resolvedOnce&&Ca!=null)return Ca;if(e.constructor.name==="Function"){const t=e();if(GE(t))throw Cn(en.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Ca=t}else throw Cn(en.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Cn(en.NOT_SUPPORT_LOCALE_TYPE)}function WC(e,t,n){return[...new Set([n,...Qe(t)?t:Be(t)?Object.keys(t):pe(t)?[t]:[n]])]}function Kg(e,t,n){const r=pe(n)?n:tr,o=e;o.__localeChainCache||(o.__localeChainCache=new Map);let c=o.__localeChainCache.get(r);if(!c){c=[];let l=[n];for(;Qe(l);)l=Df(c,l,t);const f=Qe(t)||!Ie(t)?t:t.default?t.default:null;l=pe(f)?[f]:f,Qe(l)&&Df(c,l,!1),o.__localeChainCache.set(r,c)}return c}function Df(e,t,n){let r=!0;for(let o=0;o<t.length&&Le(r);o++){const c=t[o];pe(c)&&(r=VC(e,t[o],n))}return r}function VC(e,t,n){let r;const o=t.split("-");do{const c=o.join("-");r=qC(e,c,n),o.splice(-1,1)}while(o.length&&r===!0);return r}function qC(e,t,n){let r=!1;if(!e.includes(t)&&(r=!0,t)){r=t[t.length-1]!=="!";const o=t.replace(/!/g,"");e.push(o),(Qe(n)||Ie(n))&&n[o]&&(r=n[o])}return r}const KC="9.14.3",vo=-1,tr="en-US",Ff="",Uf=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function zC(){return{upper:(e,t)=>t==="text"&&pe(e)?e.toUpperCase():t==="vnode"&&Be(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&pe(e)?e.toLowerCase():t==="vnode"&&Be(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&pe(e)?Uf(e):t==="vnode"&&Be(e)&&"__v_isVNode"in e?Uf(e.children):e}}let zg;function Bf(e){zg=e}let Jg;function JC(e){Jg=e}let Yg;function YC(e){Yg=e}let Xg=null;const XC=e=>{Xg=e},QC=()=>Xg;let Qg=null;const Hf=e=>{Qg=e},ZC=()=>Qg;let Gf=0;function eO(e={}){const t=Xe(e.onWarn)?e.onWarn:WE,n=pe(e.version)?e.version:KC,r=pe(e.locale)||Xe(e.locale)?e.locale:tr,o=Xe(r)?tr:r,c=Qe(e.fallbackLocale)||Ie(e.fallbackLocale)||pe(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:o,l=Ie(e.messages)?e.messages:Oa(o),f=Ie(e.datetimeFormats)?e.datetimeFormats:Oa(o),d=Ie(e.numberFormats)?e.numberFormats:Oa(o),g=yt(Ve(),e.modifiers,zC()),y=e.pluralRules||Ve(),_=Xe(e.missing)?e.missing:null,b=Le(e.missingWarn)||ns(e.missingWarn)?e.missingWarn:!0,w=Le(e.fallbackWarn)||ns(e.fallbackWarn)?e.fallbackWarn:!0,R=!!e.fallbackFormat,N=!!e.unresolving,F=Xe(e.postTranslation)?e.postTranslation:null,U=Ie(e.processor)?e.processor:null,q=Le(e.warnHtmlMessage)?e.warnHtmlMessage:!0,x=!!e.escapeParameter,C=Xe(e.messageCompiler)?e.messageCompiler:zg,$=Xe(e.messageResolver)?e.messageResolver:Jg||AC,B=Xe(e.localeFallbacker)?e.localeFallbacker:Yg||WC,K=Be(e.fallbackContext)?e.fallbackContext:void 0,Y=e,D=Be(Y.__datetimeFormatters)?Y.__datetimeFormatters:new Map,le=Be(Y.__numberFormatters)?Y.__numberFormatters:new Map,p=Be(Y.__meta)?Y.__meta:{};Gf++;const v={version:n,cid:Gf,locale:r,fallbackLocale:c,messages:l,modifiers:g,pluralRules:y,missing:_,missingWarn:b,fallbackWarn:w,fallbackFormat:R,unresolving:N,postTranslation:F,processor:U,warnHtmlMessage:q,escapeParameter:x,messageCompiler:C,messageResolver:$,localeFallbacker:B,fallbackContext:K,onWarn:t,__meta:p};return v.datetimeFormats=f,v.numberFormats=d,v.__datetimeFormatters=D,v.__numberFormatters=le,__INTLIFY_PROD_DEVTOOLS__&&BC(v,n,p),v}const Oa=e=>({[e]:Ve()});function Jc(e,t,n,r,o){const{missing:c,onWarn:l}=e;if(c!==null){const f=c(e,n,t,o);return pe(f)?f:t}else return t}function Sr(e,t,n){const r=e;r.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function tO(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function nO(e,t){const n=t.indexOf(e);if(n===-1)return!1;for(let r=n+1;r<t.length;r++)if(tO(e,t[r]))return!0;return!1}function wa(e){return n=>sO(n,e)}function sO(e,t){const n=iO(t);if(n==null)throw Zr(0);if(Yc(n)===1){const c=aO(n);return e.plural(c.reduce((l,f)=>[...l,jf(e,f)],[]))}else return jf(e,n)}const rO=["b","body"];function iO(e){return ls(e,rO)}const oO=["c","cases"];function aO(e){return ls(e,oO,[])}function jf(e,t){const n=lO(t);if(n!=null)return e.type==="text"?n:e.normalize([n]);{const r=fO(t).reduce((o,c)=>[...o,qa(e,c)],[]);return e.normalize(r)}}const cO=["s","static"];function lO(e){return ls(e,cO)}const uO=["i","items"];function fO(e){return ls(e,uO,[])}function qa(e,t){const n=Yc(t);switch(n){case 3:return Ri(t,n);case 9:return Ri(t,n);case 4:{const r=t;if(Zt(r,"k")&&r.k)return e.interpolate(e.named(r.k));if(Zt(r,"key")&&r.key)return e.interpolate(e.named(r.key));throw Zr(n)}case 5:{const r=t;if(Zt(r,"i")&&st(r.i))return e.interpolate(e.list(r.i));if(Zt(r,"index")&&st(r.index))return e.interpolate(e.list(r.index));throw Zr(n)}case 6:{const r=t,o=pO(r),c=yO(r);return e.linked(qa(e,c),o?qa(e,o):void 0,e.type)}case 7:return Ri(t,n);case 8:return Ri(t,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const hO=["t","type"];function Yc(e){return ls(e,hO)}const dO=["v","value"];function Ri(e,t){const n=ls(e,dO);if(n)return n;throw Zr(t)}const gO=["m","modifier"];function pO(e){return ls(e,gO)}const mO=["k","key"];function yO(e){const t=ls(e,mO);if(t)return t;throw Zr(6)}function ls(e,t,n){for(let r=0;r<t.length;r++){const o=t[r];if(Zt(e,o)&&e[o]!=null)return e[o]}return n}function Zr(e){return new Error(`unhandled node type: ${e}`)}const Zg=e=>e;let Ws=Ve();function nr(e){return Be(e)&&Yc(e)===0&&(Zt(e,"b")||Zt(e,"body"))}function ep(e,t={}){let n=!1;const r=t.onError||XE;return t.onError=o=>{n=!0,r(o)},{...vC(e,t),detectError:n}}const _O=(e,t)=>{if(!pe(e))throw Cn(en.NOT_SUPPORT_NON_STRING_MESSAGE);{Le(t.warnHtmlMessage)&&t.warnHtmlMessage;const r=(t.onCacheKey||Zg)(e),o=Ws[r];if(o)return o;const{code:c,detectError:l}=ep(e,t),f=new Function(`return ${c}`)();return l?f:Ws[r]=f}};function bO(e,t){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&pe(e)){Le(t.warnHtmlMessage)&&t.warnHtmlMessage;const r=(t.onCacheKey||Zg)(e),o=Ws[r];if(o)return o;const{ast:c,detectError:l}=ep(e,{...t,location:!1,jit:!0}),f=wa(c);return l?f:Ws[r]=f}else{const n=e.cacheKey;if(n){const r=Ws[n];return r||(Ws[n]=wa(e))}else return wa(e)}}const $f=()=>"",Kt=e=>Xe(e);function Wf(e,...t){const{fallbackFormat:n,postTranslation:r,unresolving:o,messageCompiler:c,fallbackLocale:l,messages:f}=e,[d,g]=Ka(...t),y=Le(g.missingWarn)?g.missingWarn:e.missingWarn,_=Le(g.fallbackWarn)?g.fallbackWarn:e.fallbackWarn,b=Le(g.escapeParameter)?g.escapeParameter:e.escapeParameter,w=!!g.resolvedMessage,R=pe(g.default)||Le(g.default)?Le(g.default)?c?d:()=>d:g.default:n?c?d:()=>d:"",N=n||R!=="",F=zc(e,g);b&&vO(g);let[U,q,x]=w?[d,F,f[F]||Ve()]:tp(e,d,F,l,_,y),C=U,$=d;if(!w&&!(pe(C)||nr(C)||Kt(C))&&N&&(C=R,$=C),!w&&(!(pe(C)||nr(C)||Kt(C))||!pe(q)))return o?vo:d;let B=!1;const K=()=>{B=!0},Y=Kt(C)?C:np(e,d,q,C,$,K);if(B)return C;const D=OO(e,q,x,g),le=FC(D),p=EO(e,Y,le),v=r?r(p,d):p;if(__INTLIFY_PROD_DEVTOOLS__){const I={timestamp:Date.now(),key:pe(d)?d:Kt(C)?C.key:"",locale:q||(Kt(C)?C.locale:""),format:pe(C)?C:Kt(C)?C.source:"",message:v};I.meta=yt({},e.__meta,QC()||{}),HC(I)}return v}function vO(e){Qe(e.list)?e.list=e.list.map(t=>pe(t)?Af(t):t):Be(e.named)&&Object.keys(e.named).forEach(t=>{pe(e.named[t])&&(e.named[t]=Af(e.named[t]))})}function tp(e,t,n,r,o,c){const{messages:l,onWarn:f,messageResolver:d,localeFallbacker:g}=e,y=g(e,r,n);let _=Ve(),b,w=null;const R="translate";for(let N=0;N<y.length&&(b=y[N],_=l[b]||Ve(),(w=d(_,t))===null&&(w=_[t]),!(pe(w)||nr(w)||Kt(w)));N++)if(!nO(b,y)){const F=Jc(e,t,b,c,R);F!==t&&(w=F)}return[w,b,_]}function np(e,t,n,r,o,c){const{messageCompiler:l,warnHtmlMessage:f}=e;if(Kt(r)){const g=r;return g.locale=g.locale||n,g.key=g.key||t,g}if(l==null){const g=()=>r;return g.locale=n,g.key=t,g}const d=l(r,CO(e,n,o,r,f,c));return d.locale=n,d.key=t,d.source=r,d}function EO(e,t,n){return t(n)}function Ka(...e){const[t,n,r]=e,o=Ve();if(!pe(t)&&!st(t)&&!Kt(t)&&!nr(t))throw Cn(en.INVALID_ARGUMENT);const c=st(t)?String(t):(Kt(t),t);return st(n)?o.plural=n:pe(n)?o.default=n:Ie(n)&&!_o(n)?o.named=n:Qe(n)&&(o.list=n),st(r)?o.plural=r:pe(r)?o.default=r:Ie(r)&&yt(o,r),[c,o]}function CO(e,t,n,r,o,c){return{locale:t,key:n,warnHtmlMessage:o,onError:l=>{throw c&&c(l),l},onCacheKey:l=>DE(t,n,l)}}function OO(e,t,n,r){const{modifiers:o,pluralRules:c,messageResolver:l,fallbackLocale:f,fallbackWarn:d,missingWarn:g,fallbackContext:y}=e,b={locale:t,modifiers:o,pluralRules:c,messages:w=>{let R=l(n,w);if(R==null&&y){const[,,N]=tp(y,w,t,f,d,g);R=l(N,w)}if(pe(R)||nr(R)){let N=!1;const U=np(e,w,t,R,w,()=>{N=!0});return N?$f:U}else return Kt(R)?R:$f}};return e.processor&&(b.processor=e.processor),r.list&&(b.list=r.list),r.named&&(b.named=r.named),st(r.plural)&&(b.pluralIndex=r.plural),b}function Vf(e,...t){const{datetimeFormats:n,unresolving:r,fallbackLocale:o,onWarn:c,localeFallbacker:l}=e,{__datetimeFormatters:f}=e,[d,g,y,_]=za(...t),b=Le(y.missingWarn)?y.missingWarn:e.missingWarn;Le(y.fallbackWarn)?y.fallbackWarn:e.fallbackWarn;const w=!!y.part,R=zc(e,y),N=l(e,o,R);if(!pe(d)||d==="")return new Intl.DateTimeFormat(R,_).format(g);let F={},U,q=null;const x="datetime format";for(let B=0;B<N.length&&(U=N[B],F=n[U]||{},q=F[d],!Ie(q));B++)Jc(e,d,U,b,x);if(!Ie(q)||!pe(U))return r?vo:d;let C=`${U}__${d}`;_o(_)||(C=`${C}__${JSON.stringify(_)}`);let $=f.get(C);return $||($=new Intl.DateTimeFormat(U,yt({},q,_)),f.set(C,$)),w?$.formatToParts(g):$.format(g)}const sp=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function za(...e){const[t,n,r,o]=e,c=Ve();let l=Ve(),f;if(pe(t)){const d=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!d)throw Cn(en.INVALID_ISO_DATE_ARGUMENT);const g=d[3]?d[3].trim().startsWith("T")?`${d[1].trim()}${d[3].trim()}`:`${d[1].trim()}T${d[3].trim()}`:d[1].trim();f=new Date(g);try{f.toISOString()}catch{throw Cn(en.INVALID_ISO_DATE_ARGUMENT)}}else if(UE(t)){if(isNaN(t.getTime()))throw Cn(en.INVALID_DATE_ARGUMENT);f=t}else if(st(t))f=t;else throw Cn(en.INVALID_ARGUMENT);return pe(n)?c.key=n:Ie(n)&&Object.keys(n).forEach(d=>{sp.includes(d)?l[d]=n[d]:c[d]=n[d]}),pe(r)?c.locale=r:Ie(r)&&(l=r),Ie(o)&&(l=o),[c.key||"",f,c,l]}function qf(e,t,n){const r=e;for(const o in n){const c=`${t}__${o}`;r.__datetimeFormatters.has(c)&&r.__datetimeFormatters.delete(c)}}function Kf(e,...t){const{numberFormats:n,unresolving:r,fallbackLocale:o,onWarn:c,localeFallbacker:l}=e,{__numberFormatters:f}=e,[d,g,y,_]=Ja(...t),b=Le(y.missingWarn)?y.missingWarn:e.missingWarn;Le(y.fallbackWarn)?y.fallbackWarn:e.fallbackWarn;const w=!!y.part,R=zc(e,y),N=l(e,o,R);if(!pe(d)||d==="")return new Intl.NumberFormat(R,_).format(g);let F={},U,q=null;const x="number format";for(let B=0;B<N.length&&(U=N[B],F=n[U]||{},q=F[d],!Ie(q));B++)Jc(e,d,U,b,x);if(!Ie(q)||!pe(U))return r?vo:d;let C=`${U}__${d}`;_o(_)||(C=`${C}__${JSON.stringify(_)}`);let $=f.get(C);return $||($=new Intl.NumberFormat(U,yt({},q,_)),f.set(C,$)),w?$.formatToParts(g):$.format(g)}const rp=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Ja(...e){const[t,n,r,o]=e,c=Ve();let l=Ve();if(!st(t))throw Cn(en.INVALID_ARGUMENT);const f=t;return pe(n)?c.key=n:Ie(n)&&Object.keys(n).forEach(d=>{rp.includes(d)?l[d]=n[d]:c[d]=n[d]}),pe(r)?c.locale=r:Ie(r)&&(l=r),Ie(o)&&(l=o),[c.key||"",f,c,l]}function zf(e,t,n){const r=e;for(const o in n){const c=`${t}__${o}`;r.__numberFormatters.has(c)&&r.__numberFormatters.delete(c)}}EC();/*!
  * vue-i18n v9.14.3
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const wO="9.14.3";function SO(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(xn().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(xn().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(xn().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(xn().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(xn().__INTLIFY_PROD_DEVTOOLS__=!1)}const TO=$C.__EXTEND_POINT__,kn=bo(TO);kn(),kn(),kn(),kn(),kn(),kn(),kn(),kn(),kn();const ip=en.__EXTEND_POINT__,Ft=bo(ip),ut={UNEXPECTED_RETURN_TYPE:ip,INVALID_ARGUMENT:Ft(),MUST_BE_CALL_SETUP_TOP:Ft(),NOT_INSTALLED:Ft(),NOT_AVAILABLE_IN_LEGACY_MODE:Ft(),REQUIRED_VALUE:Ft(),INVALID_VALUE:Ft(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Ft(),NOT_INSTALLED_WITH_PROVIDE:Ft(),UNEXPECTED_ERROR:Ft(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Ft(),BRIDGE_SUPPORT_VUE_2_ONLY:Ft(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Ft(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Ft(),__EXTEND_POINT__:Ft()};function gt(e,...t){return rr(e,null,void 0)}const Ya=as("__translateVNode"),Xa=as("__datetimeParts"),Qa=as("__numberParts"),op=as("__setPluralRules"),ap=as("__injectWithOption"),Za=as("__dispose");function ei(e){if(!Be(e))return e;for(const t in e)if(Zt(e,t))if(!t.includes("."))Be(e[t])&&ei(e[t]);else{const n=t.split("."),r=n.length-1;let o=e,c=!1;for(let l=0;l<r;l++){if(n[l]==="__proto__")throw new Error(`unsafe key: ${n[l]}`);if(n[l]in o||(o[n[l]]=Ve()),!Be(o[n[l]])){c=!0;break}o=o[n[l]]}c||(o[n[r]]=e[t],delete e[t]),Be(o[n[r]])&&ei(o[n[r]])}return e}function Eo(e,t){const{messages:n,__i18n:r,messageResolver:o,flatJson:c}=t,l=Ie(n)?n:Qe(r)?Ve():{[e]:Ve()};if(Qe(r)&&r.forEach(f=>{if("locale"in f&&"resource"in f){const{locale:d,resource:g}=f;d?(l[d]=l[d]||Ve(),Di(g,l[d])):Di(g,l)}else pe(f)&&Di(JSON.parse(f),l)}),o==null&&c)for(const f in l)Zt(l,f)&&ei(l[f]);return l}function cp(e){return e.type}function lp(e,t,n){let r=Be(t.messages)?t.messages:Ve();"__i18nGlobal"in n&&(r=Eo(e.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const o=Object.keys(r);o.length&&o.forEach(c=>{e.mergeLocaleMessage(c,r[c])});{if(Be(t.datetimeFormats)){const c=Object.keys(t.datetimeFormats);c.length&&c.forEach(l=>{e.mergeDateTimeFormat(l,t.datetimeFormats[l])})}if(Be(t.numberFormats)){const c=Object.keys(t.numberFormats);c.length&&c.forEach(l=>{e.mergeNumberFormat(l,t.numberFormats[l])})}}}function Jf(e){return ve(oi,null,e,0)}const Yf="__INTLIFY_META__",Xf=()=>[],RO=()=>!1;let Qf=0;function Zf(e){return(t,n,r,o)=>e(n,r,Ht()||void 0,o)}const AO=()=>{const e=Ht();let t=null;return e&&(t=cp(e)[Yf])?{[Yf]:t}:null};function Xc(e={},t){const{__root:n,__injectWithOption:r}=e,o=n===void 0,c=e.flatJson,l=Zi?He:Fc,f=!!e.translateExistCompatible;let d=Le(e.inheritLocale)?e.inheritLocale:!0;const g=l(n&&d?n.locale.value:pe(e.locale)?e.locale:tr),y=l(n&&d?n.fallbackLocale.value:pe(e.fallbackLocale)||Qe(e.fallbackLocale)||Ie(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:g.value),_=l(Eo(g.value,e)),b=l(Ie(e.datetimeFormats)?e.datetimeFormats:{[g.value]:{}}),w=l(Ie(e.numberFormats)?e.numberFormats:{[g.value]:{}});let R=n?n.missingWarn:Le(e.missingWarn)||ns(e.missingWarn)?e.missingWarn:!0,N=n?n.fallbackWarn:Le(e.fallbackWarn)||ns(e.fallbackWarn)?e.fallbackWarn:!0,F=n?n.fallbackRoot:Le(e.fallbackRoot)?e.fallbackRoot:!0,U=!!e.fallbackFormat,q=Xe(e.missing)?e.missing:null,x=Xe(e.missing)?Zf(e.missing):null,C=Xe(e.postTranslation)?e.postTranslation:null,$=n?n.warnHtmlMessage:Le(e.warnHtmlMessage)?e.warnHtmlMessage:!0,B=!!e.escapeParameter;const K=n?n.modifiers:Ie(e.modifiers)?e.modifiers:{};let Y=e.pluralRules||n&&n.pluralRules,D;D=(()=>{o&&Hf(null);const V={version:wO,locale:g.value,fallbackLocale:y.value,messages:_.value,modifiers:K,pluralRules:Y,missing:x===null?void 0:x,missingWarn:R,fallbackWarn:N,fallbackFormat:U,unresolving:!0,postTranslation:C===null?void 0:C,warnHtmlMessage:$,escapeParameter:B,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};V.datetimeFormats=b.value,V.numberFormats=w.value,V.__datetimeFormatters=Ie(D)?D.__datetimeFormatters:void 0,V.__numberFormatters=Ie(D)?D.__numberFormatters:void 0;const Z=eO(V);return o&&Hf(Z),Z})(),Sr(D,g.value,y.value);function p(){return[g.value,y.value,_.value,b.value,w.value]}const v=$e({get:()=>g.value,set:V=>{g.value=V,D.locale=g.value}}),I=$e({get:()=>y.value,set:V=>{y.value=V,D.fallbackLocale=y.value,Sr(D,g.value,V)}}),E=$e(()=>_.value),P=$e(()=>b.value),ae=$e(()=>w.value);function j(){return Xe(C)?C:null}function X(V){C=V,D.postTranslation=V}function _e(){return q}function Ne(V){V!==null&&(x=Zf(V)),q=V,D.missing=x}const qe=(V,Z,me,Se,De,at)=>{p();let ot;try{__INTLIFY_PROD_DEVTOOLS__,o||(D.fallbackContext=n?ZC():void 0),ot=V(D)}finally{__INTLIFY_PROD_DEVTOOLS__,o||(D.fallbackContext=void 0)}if(me!=="translate exists"&&st(ot)&&ot===vo||me==="translate exists"&&!ot){const[hn,Rs]=Z();return n&&F?Se(n):De(hn)}else{if(at(ot))return ot;throw gt(ut.UNEXPECTED_RETURN_TYPE)}};function Me(...V){return qe(Z=>Reflect.apply(Wf,null,[Z,...V]),()=>Ka(...V),"translate",Z=>Reflect.apply(Z.t,Z,[...V]),Z=>Z,Z=>pe(Z))}function Nt(...V){const[Z,me,Se]=V;if(Se&&!Be(Se))throw gt(ut.INVALID_ARGUMENT);return Me(Z,me,yt({resolvedMessage:!0},Se||{}))}function _t(...V){return qe(Z=>Reflect.apply(Vf,null,[Z,...V]),()=>za(...V),"datetime format",Z=>Reflect.apply(Z.d,Z,[...V]),()=>Ff,Z=>pe(Z))}function Vt(...V){return qe(Z=>Reflect.apply(Kf,null,[Z,...V]),()=>Ja(...V),"number format",Z=>Reflect.apply(Z.n,Z,[...V]),()=>Ff,Z=>pe(Z))}function it(V){return V.map(Z=>pe(Z)||st(Z)||Le(Z)?Jf(String(Z)):Z)}const ge={normalize:it,interpolate:V=>V,type:"vnode"};function fe(...V){return qe(Z=>{let me;const Se=Z;try{Se.processor=ge,me=Reflect.apply(Wf,null,[Se,...V])}finally{Se.processor=null}return me},()=>Ka(...V),"translate",Z=>Z[Ya](...V),Z=>[Jf(Z)],Z=>Qe(Z))}function be(...V){return qe(Z=>Reflect.apply(Kf,null,[Z,...V]),()=>Ja(...V),"number format",Z=>Z[Qa](...V),Xf,Z=>pe(Z)||Qe(Z))}function xe(...V){return qe(Z=>Reflect.apply(Vf,null,[Z,...V]),()=>za(...V),"datetime format",Z=>Z[Xa](...V),Xf,Z=>pe(Z)||Qe(Z))}function k(V){Y=V,D.pluralRules=Y}function M(V,Z){return qe(()=>{if(!V)return!1;const me=pe(Z)?Z:g.value,Se=re(me),De=D.messageResolver(Se,V);return f?De!=null:nr(De)||Kt(De)||pe(De)},()=>[V],"translate exists",me=>Reflect.apply(me.te,me,[V,Z]),RO,me=>Le(me))}function A(V){let Z=null;const me=Kg(D,y.value,g.value);for(let Se=0;Se<me.length;Se++){const De=_.value[me[Se]]||{},at=D.messageResolver(De,V);if(at!=null){Z=at;break}}return Z}function z(V){const Z=A(V);return Z??(n?n.tm(V)||{}:{})}function re(V){return _.value[V]||{}}function ee(V,Z){if(c){const me={[V]:Z};for(const Se in me)Zt(me,Se)&&ei(me[Se]);Z=me[V]}_.value[V]=Z,D.messages=_.value}function ue(V,Z){_.value[V]=_.value[V]||{};const me={[V]:Z};if(c)for(const Se in me)Zt(me,Se)&&ei(me[Se]);Z=me[V],Di(Z,_.value[V]),D.messages=_.value}function ce(V){return b.value[V]||{}}function S(V,Z){b.value[V]=Z,D.datetimeFormats=b.value,qf(D,V,Z)}function T(V,Z){b.value[V]=yt(b.value[V]||{},Z),D.datetimeFormats=b.value,qf(D,V,Z)}function H(V){return w.value[V]||{}}function Q(V,Z){w.value[V]=Z,D.numberFormats=w.value,zf(D,V,Z)}function he(V,Z){w.value[V]=yt(w.value[V]||{},Z),D.numberFormats=w.value,zf(D,V,Z)}Qf++,n&&Zi&&(dt(n.locale,V=>{d&&(g.value=V,D.locale=V,Sr(D,g.value,y.value))}),dt(n.fallbackLocale,V=>{d&&(y.value=V,D.fallbackLocale=V,Sr(D,g.value,y.value))}));const oe={id:Qf,locale:v,fallbackLocale:I,get inheritLocale(){return d},set inheritLocale(V){d=V,V&&n&&(g.value=n.locale.value,y.value=n.fallbackLocale.value,Sr(D,g.value,y.value))},get availableLocales(){return Object.keys(_.value).sort()},messages:E,get modifiers(){return K},get pluralRules(){return Y||{}},get isGlobal(){return o},get missingWarn(){return R},set missingWarn(V){R=V,D.missingWarn=R},get fallbackWarn(){return N},set fallbackWarn(V){N=V,D.fallbackWarn=N},get fallbackRoot(){return F},set fallbackRoot(V){F=V},get fallbackFormat(){return U},set fallbackFormat(V){U=V,D.fallbackFormat=U},get warnHtmlMessage(){return $},set warnHtmlMessage(V){$=V,D.warnHtmlMessage=V},get escapeParameter(){return B},set escapeParameter(V){B=V,D.escapeParameter=V},t:Me,getLocaleMessage:re,setLocaleMessage:ee,mergeLocaleMessage:ue,getPostTranslationHandler:j,setPostTranslationHandler:X,getMissingHandler:_e,setMissingHandler:Ne,[op]:k};return oe.datetimeFormats=P,oe.numberFormats=ae,oe.rt=Nt,oe.te=M,oe.tm=z,oe.d=_t,oe.n=Vt,oe.getDateTimeFormat=ce,oe.setDateTimeFormat=S,oe.mergeDateTimeFormat=T,oe.getNumberFormat=H,oe.setNumberFormat=Q,oe.mergeNumberFormat=he,oe[ap]=r,oe[Ya]=fe,oe[Xa]=xe,oe[Qa]=be,oe}function IO(e){const t=pe(e.locale)?e.locale:tr,n=pe(e.fallbackLocale)||Qe(e.fallbackLocale)||Ie(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,r=Xe(e.missing)?e.missing:void 0,o=Le(e.silentTranslationWarn)||ns(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,c=Le(e.silentFallbackWarn)||ns(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,l=Le(e.fallbackRoot)?e.fallbackRoot:!0,f=!!e.formatFallbackMessages,d=Ie(e.modifiers)?e.modifiers:{},g=e.pluralizationRules,y=Xe(e.postTranslation)?e.postTranslation:void 0,_=pe(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,b=!!e.escapeParameterHtml,w=Le(e.sync)?e.sync:!0;let R=e.messages;if(Ie(e.sharedMessages)){const B=e.sharedMessages;R=Object.keys(B).reduce((Y,D)=>{const le=Y[D]||(Y[D]={});return yt(le,B[D]),Y},R||{})}const{__i18n:N,__root:F,__injectWithOption:U}=e,q=e.datetimeFormats,x=e.numberFormats,C=e.flatJson,$=e.translateExistCompatible;return{locale:t,fallbackLocale:n,messages:R,flatJson:C,datetimeFormats:q,numberFormats:x,missing:r,missingWarn:o,fallbackWarn:c,fallbackRoot:l,fallbackFormat:f,modifiers:d,pluralRules:g,postTranslation:y,warnHtmlMessage:_,escapeParameter:b,messageResolver:e.messageResolver,inheritLocale:w,translateExistCompatible:$,__i18n:N,__root:F,__injectWithOption:U}}function ec(e={},t){{const n=Xc(IO(e)),{__extender:r}=e,o={id:n.id,get locale(){return n.locale.value},set locale(c){n.locale.value=c},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(c){n.fallbackLocale.value=c},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(c){},get missing(){return n.getMissingHandler()},set missing(c){n.setMissingHandler(c)},get silentTranslationWarn(){return Le(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(c){n.missingWarn=Le(c)?!c:c},get silentFallbackWarn(){return Le(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(c){n.fallbackWarn=Le(c)?!c:c},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(c){n.fallbackFormat=c},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(c){n.setPostTranslationHandler(c)},get sync(){return n.inheritLocale},set sync(c){n.inheritLocale=c},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(c){n.warnHtmlMessage=c!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(c){n.escapeParameter=c},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(c){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...c){const[l,f,d]=c,g={};let y=null,_=null;if(!pe(l))throw gt(ut.INVALID_ARGUMENT);const b=l;return pe(f)?g.locale=f:Qe(f)?y=f:Ie(f)&&(_=f),Qe(d)?y=d:Ie(d)&&(_=d),Reflect.apply(n.t,n,[b,y||_||{},g])},rt(...c){return Reflect.apply(n.rt,n,[...c])},tc(...c){const[l,f,d]=c,g={plural:1};let y=null,_=null;if(!pe(l))throw gt(ut.INVALID_ARGUMENT);const b=l;return pe(f)?g.locale=f:st(f)?g.plural=f:Qe(f)?y=f:Ie(f)&&(_=f),pe(d)?g.locale=d:Qe(d)?y=d:Ie(d)&&(_=d),Reflect.apply(n.t,n,[b,y||_||{},g])},te(c,l){return n.te(c,l)},tm(c){return n.tm(c)},getLocaleMessage(c){return n.getLocaleMessage(c)},setLocaleMessage(c,l){n.setLocaleMessage(c,l)},mergeLocaleMessage(c,l){n.mergeLocaleMessage(c,l)},d(...c){return Reflect.apply(n.d,n,[...c])},getDateTimeFormat(c){return n.getDateTimeFormat(c)},setDateTimeFormat(c,l){n.setDateTimeFormat(c,l)},mergeDateTimeFormat(c,l){n.mergeDateTimeFormat(c,l)},n(...c){return Reflect.apply(n.n,n,[...c])},getNumberFormat(c){return n.getNumberFormat(c)},setNumberFormat(c,l){n.setNumberFormat(c,l)},mergeNumberFormat(c,l){n.mergeNumberFormat(c,l)},getChoiceIndex(c,l){return-1}};return o.__extender=r,o}}const Qc={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function PO({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((r,o)=>[...r,...o.type===mt?o.children:[o]],[]):t.reduce((n,r)=>{const o=e[r];return o&&(n[r]=o()),n},Ve())}function up(e){return mt}const kO=Mt({name:"i18n-t",props:yt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>st(e)||!isNaN(e)}},Qc),setup(e,t){const{slots:n,attrs:r}=t,o=e.i18n||Zc({useScope:e.scope,__useComponent:!0});return()=>{const c=Object.keys(n).filter(_=>_!=="_"),l=Ve();e.locale&&(l.locale=e.locale),e.plural!==void 0&&(l.plural=pe(e.plural)?+e.plural:e.plural);const f=PO(t,c),d=o[Ya](e.keypath,f,l),g=yt(Ve(),r),y=pe(e.tag)||Be(e.tag)?e.tag:up();return ci(y,g,d)}}}),eh=kO;function LO(e){return Qe(e)&&!pe(e[0])}function fp(e,t,n,r){const{slots:o,attrs:c}=t;return()=>{const l={part:!0};let f=Ve();e.locale&&(l.locale=e.locale),pe(e.format)?l.key=e.format:Be(e.format)&&(pe(e.format.key)&&(l.key=e.format.key),f=Object.keys(e.format).reduce((b,w)=>n.includes(w)?yt(Ve(),b,{[w]:e.format[w]}):b,Ve()));const d=r(e.value,l,f);let g=[l.key];Qe(d)?g=d.map((b,w)=>{const R=o[b.type],N=R?R({[b.type]:b.value,index:w,parts:d}):[b.value];return LO(N)&&(N[0].key=`${b.type}-${w}`),N}):pe(d)&&(g=[d]);const y=yt(Ve(),c),_=pe(e.tag)||Be(e.tag)?e.tag:up();return ci(_,y,g)}}const MO=Mt({name:"i18n-n",props:yt({value:{type:Number,required:!0},format:{type:[String,Object]}},Qc),setup(e,t){const n=e.i18n||Zc({useScope:e.scope,__useComponent:!0});return fp(e,t,rp,(...r)=>n[Qa](...r))}}),th=MO,NO=Mt({name:"i18n-d",props:yt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Qc),setup(e,t){const n=e.i18n||Zc({useScope:e.scope,__useComponent:!0});return fp(e,t,sp,(...r)=>n[Xa](...r))}}),nh=NO;function xO(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const r=n.__getInstance(t);return r!=null?r.__composer:e.global.__composer}}function DO(e){const t=l=>{const{instance:f,modifiers:d,value:g}=l;if(!f||!f.$)throw gt(ut.UNEXPECTED_ERROR);const y=xO(e,f.$),_=sh(g);return[Reflect.apply(y.t,y,[...rh(_)]),y]};return{created:(l,f)=>{const[d,g]=t(f);Zi&&e.global===g&&(l.__i18nWatcher=dt(g.locale,()=>{f.instance&&f.instance.$forceUpdate()})),l.__composer=g,l.textContent=d},unmounted:l=>{Zi&&l.__i18nWatcher&&(l.__i18nWatcher(),l.__i18nWatcher=void 0,delete l.__i18nWatcher),l.__composer&&(l.__composer=void 0,delete l.__composer)},beforeUpdate:(l,{value:f})=>{if(l.__composer){const d=l.__composer,g=sh(f);l.textContent=Reflect.apply(d.t,d,[...rh(g)])}},getSSRProps:l=>{const[f]=t(l);return{textContent:f}}}}function sh(e){if(pe(e))return{path:e};if(Ie(e)){if(!("path"in e))throw gt(ut.REQUIRED_VALUE,"path");return e}else throw gt(ut.INVALID_VALUE)}function rh(e){const{path:t,locale:n,args:r,choice:o,plural:c}=e,l={},f=r||{};return pe(n)&&(l.locale=n),st(o)&&(l.plural=o),st(c)&&(l.plural=c),[t,f,l]}function FO(e,t,...n){const r=Ie(n[0])?n[0]:{},o=!!r.useI18nComponentName;(Le(r.globalInstall)?r.globalInstall:!0)&&([o?"i18n":eh.name,"I18nT"].forEach(l=>e.component(l,eh)),[th.name,"I18nN"].forEach(l=>e.component(l,th)),[nh.name,"I18nD"].forEach(l=>e.component(l,nh))),e.directive("t",DO(t))}function UO(e,t,n){return{beforeCreate(){const r=Ht();if(!r)throw gt(ut.UNEXPECTED_ERROR);const o=this.$options;if(o.i18n){const c=o.i18n;if(o.__i18n&&(c.__i18n=o.__i18n),c.__root=t,this===this.$root)this.$i18n=ih(e,c);else{c.__injectWithOption=!0,c.__extender=n.__vueI18nExtend,this.$i18n=ec(c);const l=this.$i18n;l.__extender&&(l.__disposer=l.__extender(this.$i18n))}}else if(o.__i18n)if(this===this.$root)this.$i18n=ih(e,o);else{this.$i18n=ec({__i18n:o.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:t});const c=this.$i18n;c.__extender&&(c.__disposer=c.__extender(this.$i18n))}else this.$i18n=e;o.__i18nGlobal&&lp(t,o,o),this.$t=(...c)=>this.$i18n.t(...c),this.$rt=(...c)=>this.$i18n.rt(...c),this.$tc=(...c)=>this.$i18n.tc(...c),this.$te=(c,l)=>this.$i18n.te(c,l),this.$d=(...c)=>this.$i18n.d(...c),this.$n=(...c)=>this.$i18n.n(...c),this.$tm=c=>this.$i18n.tm(c),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=Ht();if(!r)throw gt(ut.UNEXPECTED_ERROR);const o=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,o.__disposer&&(o.__disposer(),delete o.__disposer,delete o.__extender),n.__deleteInstance(r),delete this.$i18n}}}function ih(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[op](t.pluralizationRules||e.pluralizationRules);const n=Eo(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach(r=>e.mergeLocaleMessage(r,n[r])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(r=>e.mergeDateTimeFormat(r,t.datetimeFormats[r])),t.numberFormats&&Object.keys(t.numberFormats).forEach(r=>e.mergeNumberFormat(r,t.numberFormats[r])),e}const BO=as("global-vue-i18n");function HO(e={},t){const n=__VUE_I18N_LEGACY_API__&&Le(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,r=Le(e.globalInjection)?e.globalInjection:!0,o=__VUE_I18N_LEGACY_API__&&n?!!e.allowComposition:!0,c=new Map,[l,f]=GO(e,n),d=as("");function g(b){return c.get(b)||null}function y(b,w){c.set(b,w)}function _(b){c.delete(b)}{const b={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return o},async install(w,...R){if(w.__VUE_I18N_SYMBOL__=d,w.provide(w.__VUE_I18N_SYMBOL__,b),Ie(R[0])){const U=R[0];b.__composerExtend=U.__composerExtend,b.__vueI18nExtend=U.__vueI18nExtend}let N=null;!n&&r&&(N=YO(w,b.global)),__VUE_I18N_FULL_INSTALL__&&FO(w,b,...R),__VUE_I18N_LEGACY_API__&&n&&w.mixin(UO(f,f.__composer,b));const F=w.unmount;w.unmount=()=>{N&&N(),b.dispose(),F()}},get global(){return f},dispose(){l.stop()},__instances:c,__getInstance:g,__setInstance:y,__deleteInstance:_};return b}}function Zc(e={}){const t=Ht();if(t==null)throw gt(ut.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw gt(ut.NOT_INSTALLED);const n=jO(t),r=WO(n),o=cp(t),c=$O(e,o);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!e.__useComponent){if(!n.allowComposition)throw gt(ut.NOT_AVAILABLE_IN_LEGACY_MODE);return zO(t,c,r,e)}if(c==="global")return lp(r,e,o),r;if(c==="parent"){let d=VO(n,t,e.__useComponent);return d==null&&(d=r),d}const l=n;let f=l.__getInstance(t);if(f==null){const d=yt({},e);"__i18n"in o&&(d.__i18n=o.__i18n),r&&(d.__root=r),f=Xc(d),l.__composerExtend&&(f[Za]=l.__composerExtend(f)),KO(l,t,f),l.__setInstance(t,f)}return f}function GO(e,t,n){const r=Rc();{const o=__VUE_I18N_LEGACY_API__&&t?r.run(()=>ec(e)):r.run(()=>Xc(e));if(o==null)throw gt(ut.UNEXPECTED_ERROR);return[r,o]}}function jO(e){{const t=Ut(e.isCE?BO:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw gt(e.isCE?ut.NOT_INSTALLED_WITH_PROVIDE:ut.UNEXPECTED_ERROR);return t}}function $O(e,t){return _o(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function WO(e){return e.mode==="composition"?e.global:e.global.__composer}function VO(e,t,n=!1){let r=null;const o=t.root;let c=qO(t,n);for(;c!=null;){const l=e;if(e.mode==="composition")r=l.__getInstance(c);else if(__VUE_I18N_LEGACY_API__){const f=l.__getInstance(c);f!=null&&(r=f.__composer,n&&r&&!r[ap]&&(r=null))}if(r!=null||o===c)break;c=c.parent}return r}function qO(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function KO(e,t,n){Ts(()=>{},t),sr(()=>{const r=n;e.__deleteInstance(t);const o=r[Za];o&&(o(),delete r[Za])},t)}function zO(e,t,n,r={}){const o=t==="local",c=Fc(null);if(o&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw gt(ut.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const l=Le(r.inheritLocale)?r.inheritLocale:!pe(r.locale),f=He(!o||l?n.locale.value:pe(r.locale)?r.locale:tr),d=He(!o||l?n.fallbackLocale.value:pe(r.fallbackLocale)||Qe(r.fallbackLocale)||Ie(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:f.value),g=He(Eo(f.value,r)),y=He(Ie(r.datetimeFormats)?r.datetimeFormats:{[f.value]:{}}),_=He(Ie(r.numberFormats)?r.numberFormats:{[f.value]:{}}),b=o?n.missingWarn:Le(r.missingWarn)||ns(r.missingWarn)?r.missingWarn:!0,w=o?n.fallbackWarn:Le(r.fallbackWarn)||ns(r.fallbackWarn)?r.fallbackWarn:!0,R=o?n.fallbackRoot:Le(r.fallbackRoot)?r.fallbackRoot:!0,N=!!r.fallbackFormat,F=Xe(r.missing)?r.missing:null,U=Xe(r.postTranslation)?r.postTranslation:null,q=o?n.warnHtmlMessage:Le(r.warnHtmlMessage)?r.warnHtmlMessage:!0,x=!!r.escapeParameter,C=o?n.modifiers:Ie(r.modifiers)?r.modifiers:{},$=r.pluralRules||o&&n.pluralRules;function B(){return[f.value,d.value,g.value,y.value,_.value]}const K=$e({get:()=>c.value?c.value.locale.value:f.value,set:A=>{c.value&&(c.value.locale.value=A),f.value=A}}),Y=$e({get:()=>c.value?c.value.fallbackLocale.value:d.value,set:A=>{c.value&&(c.value.fallbackLocale.value=A),d.value=A}}),D=$e(()=>c.value?c.value.messages.value:g.value),le=$e(()=>y.value),p=$e(()=>_.value);function v(){return c.value?c.value.getPostTranslationHandler():U}function I(A){c.value&&c.value.setPostTranslationHandler(A)}function E(){return c.value?c.value.getMissingHandler():F}function P(A){c.value&&c.value.setMissingHandler(A)}function ae(A){return B(),A()}function j(...A){return c.value?ae(()=>Reflect.apply(c.value.t,null,[...A])):ae(()=>"")}function X(...A){return c.value?Reflect.apply(c.value.rt,null,[...A]):""}function _e(...A){return c.value?ae(()=>Reflect.apply(c.value.d,null,[...A])):ae(()=>"")}function Ne(...A){return c.value?ae(()=>Reflect.apply(c.value.n,null,[...A])):ae(()=>"")}function qe(A){return c.value?c.value.tm(A):{}}function Me(A,z){return c.value?c.value.te(A,z):!1}function Nt(A){return c.value?c.value.getLocaleMessage(A):{}}function _t(A,z){c.value&&(c.value.setLocaleMessage(A,z),g.value[A]=z)}function Vt(A,z){c.value&&c.value.mergeLocaleMessage(A,z)}function it(A){return c.value?c.value.getDateTimeFormat(A):{}}function te(A,z){c.value&&(c.value.setDateTimeFormat(A,z),y.value[A]=z)}function ge(A,z){c.value&&c.value.mergeDateTimeFormat(A,z)}function fe(A){return c.value?c.value.getNumberFormat(A):{}}function be(A,z){c.value&&(c.value.setNumberFormat(A,z),_.value[A]=z)}function xe(A,z){c.value&&c.value.mergeNumberFormat(A,z)}const k={get id(){return c.value?c.value.id:-1},locale:K,fallbackLocale:Y,messages:D,datetimeFormats:le,numberFormats:p,get inheritLocale(){return c.value?c.value.inheritLocale:l},set inheritLocale(A){c.value&&(c.value.inheritLocale=A)},get availableLocales(){return c.value?c.value.availableLocales:Object.keys(g.value)},get modifiers(){return c.value?c.value.modifiers:C},get pluralRules(){return c.value?c.value.pluralRules:$},get isGlobal(){return c.value?c.value.isGlobal:!1},get missingWarn(){return c.value?c.value.missingWarn:b},set missingWarn(A){c.value&&(c.value.missingWarn=A)},get fallbackWarn(){return c.value?c.value.fallbackWarn:w},set fallbackWarn(A){c.value&&(c.value.missingWarn=A)},get fallbackRoot(){return c.value?c.value.fallbackRoot:R},set fallbackRoot(A){c.value&&(c.value.fallbackRoot=A)},get fallbackFormat(){return c.value?c.value.fallbackFormat:N},set fallbackFormat(A){c.value&&(c.value.fallbackFormat=A)},get warnHtmlMessage(){return c.value?c.value.warnHtmlMessage:q},set warnHtmlMessage(A){c.value&&(c.value.warnHtmlMessage=A)},get escapeParameter(){return c.value?c.value.escapeParameter:x},set escapeParameter(A){c.value&&(c.value.escapeParameter=A)},t:j,getPostTranslationHandler:v,setPostTranslationHandler:I,getMissingHandler:E,setMissingHandler:P,rt:X,d:_e,n:Ne,tm:qe,te:Me,getLocaleMessage:Nt,setLocaleMessage:_t,mergeLocaleMessage:Vt,getDateTimeFormat:it,setDateTimeFormat:te,mergeDateTimeFormat:ge,getNumberFormat:fe,setNumberFormat:be,mergeNumberFormat:xe};function M(A){A.locale.value=f.value,A.fallbackLocale.value=d.value,Object.keys(g.value).forEach(z=>{A.mergeLocaleMessage(z,g.value[z])}),Object.keys(y.value).forEach(z=>{A.mergeDateTimeFormat(z,y.value[z])}),Object.keys(_.value).forEach(z=>{A.mergeNumberFormat(z,_.value[z])}),A.escapeParameter=x,A.fallbackFormat=N,A.fallbackRoot=R,A.fallbackWarn=w,A.missingWarn=b,A.warnHtmlMessage=q}return Nd(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw gt(ut.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const A=c.value=e.proxy.$i18n.__composer;t==="global"?(f.value=A.locale.value,d.value=A.fallbackLocale.value,g.value=A.messages.value,y.value=A.datetimeFormats.value,_.value=A.numberFormats.value):o&&M(A)}),k}const JO=["locale","fallbackLocale","availableLocales"],oh=["t","rt","d","n","tm","te"];function YO(e,t){const n=Object.create(null);return JO.forEach(o=>{const c=Object.getOwnPropertyDescriptor(t,o);if(!c)throw gt(ut.UNEXPECTED_ERROR);const l=Ze(c.value)?{get(){return c.value.value},set(f){c.value.value=f}}:{get(){return c.get&&c.get()}};Object.defineProperty(n,o,l)}),e.config.globalProperties.$i18n=n,oh.forEach(o=>{const c=Object.getOwnPropertyDescriptor(t,o);if(!c||!c.value)throw gt(ut.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${o}`,c)}),()=>{delete e.config.globalProperties.$i18n,oh.forEach(o=>{delete e.config.globalProperties[`$${o}`]})}}SO();__INTLIFY_JIT_COMPILATION__?Bf(bO):Bf(_O);JC(IC);YC(Kg);if(__INTLIFY_PROD_DEVTOOLS__){const e=xn();e.__INTLIFY__=!0,UC(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}function hp(e=location.href){let t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(n,r,o){t[r]=o}),t}function JR(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),n=!0,r=0;r<t.length;r++)if(e.indexOf(t[r])>0){n=!1;break}return n}function XO(e){return e?e.startsWith("http")?e:"https://d2z7izd6waxp24.cloudfront.net"+e.replace("/xcdev",""):""}var dp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ah=typeof window>"u",Dn={version:"1.1.1",storage:ah?null:window.localStorage,session:{storage:ah?null:window.sessionStorage}},gp={set:function(t,n){if(!this.disabled)return n===void 0?this.remove(t):(this.storage.setItem(t,QO(n)),n)},get:function(t,n){if(this.disabled)return n;var r=ZO(this.storage.getItem(t));return r===void 0?n:r},has:function(t){return this.get(t)!==void 0},remove:function(t){this.disabled||this.storage.removeItem(t)},clear:function(){this.disabled||this.storage.clear()},getAll:function(){if(this.disabled)return null;var t={};return this.forEach(function(n,r){t[n]=r}),t},forEach:function(t){if(!this.disabled)for(var n=0;n<this.storage.length;n++){var r=this.storage.key(n);t(r,this.get(r))}}};dp(Dn,gp);dp(Dn.session,gp);function QO(e){return JSON.stringify(e)}function ZO(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e||void 0}}try{var Tr="__storejs__";Dn.set(Tr,Tr),Dn.get(Tr)!==Tr&&(Dn.disabled=!0),Dn.remove(Tr)}catch{Dn.disabled=!0}const pp="__LANG__";function mp(){return Dn.get(pp,"")}function ew(e){return Dn.set(pp,e),e}function tw(e){switch(e){case"zh-cn":return"ZH_CN";case"vi":return"VI";default:return"VI"}}function yp(){const e=mp();if(e)return e.toLowerCase();const{language:t}=hp();return t||"vi"}function nw(){const e={},t=Object.assign({"./lang/en/index.js":kE,"./lang/vi/index.js":ME,"./lang/zh-cn/index.js":xE});for(const n in t){const r=sw(n);e[r]=t[n].default}return e}function sw(e){const t=/lang\/([\w-]+)\//,n=e.match(t);if(n&&n[1])return n[1]}const Qn=HO({legacy:!1,locale:yp(),fallbackLocale:"vi",messages:nw()});Qn.t=Qn.global.t;const _p=Tg("app",{state:()=>({isRouteAlive:!0,language:yp()}),getters:{},actions:{changeLanguage(e){this.language!==e&&(Qn.mode==="legacy"?Qn.global.locale=e:Qn.global.locale.value=e,this.language=ew(e),this.reload())},reload(){this.isRouteAlive=!1,Zn(()=>{this.isRouteAlive=!0})}}});function bp(e,t){return function(){return e.apply(t,arguments)}}const{toString:rw}=Object.prototype,{getPrototypeOf:el}=Object,Co=(e=>t=>{const n=rw.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),un=e=>(e=e.toLowerCase(),t=>Co(t)===e),Oo=e=>t=>typeof t===e,{isArray:ir}=Array,ti=Oo("undefined");function iw(e){return e!==null&&!ti(e)&&e.constructor!==null&&!ti(e.constructor)&&Wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const vp=un("ArrayBuffer");function ow(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&vp(e.buffer),t}const aw=Oo("string"),Wt=Oo("function"),Ep=Oo("number"),wo=e=>e!==null&&typeof e=="object",cw=e=>e===!0||e===!1,Fi=e=>{if(Co(e)!=="object")return!1;const t=el(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lw=un("Date"),uw=un("File"),fw=un("Blob"),hw=un("FileList"),dw=e=>wo(e)&&Wt(e.pipe),gw=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Wt(e.append)&&((t=Co(e))==="formdata"||t==="object"&&Wt(e.toString)&&e.toString()==="[object FormData]"))},pw=un("URLSearchParams"),[mw,yw,_w,bw]=["ReadableStream","Request","Response","Headers"].map(un),vw=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function li(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),ir(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const c=n?Object.getOwnPropertyNames(e):Object.keys(e),l=c.length;let f;for(r=0;r<l;r++)f=c[r],t.call(null,e[f],f,e)}}function Cp(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const _s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Op=e=>!ti(e)&&e!==_s;function tc(){const{caseless:e}=Op(this)&&this||{},t={},n=(r,o)=>{const c=e&&Cp(t,o)||o;Fi(t[c])&&Fi(r)?t[c]=tc(t[c],r):Fi(r)?t[c]=tc({},r):ir(r)?t[c]=r.slice():t[c]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&li(arguments[r],n);return t}const Ew=(e,t,n,{allOwnKeys:r}={})=>(li(t,(o,c)=>{n&&Wt(o)?e[c]=bp(o,n):e[c]=o},{allOwnKeys:r}),e),Cw=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ow=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},ww=(e,t,n,r)=>{let o,c,l;const f={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),c=o.length;c-- >0;)l=o[c],(!r||r(l,e,t))&&!f[l]&&(t[l]=e[l],f[l]=!0);e=n!==!1&&el(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Sw=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Tw=e=>{if(!e)return null;if(ir(e))return e;let t=e.length;if(!Ep(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Rw=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&el(Uint8Array)),Aw=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const c=o.value;t.call(e,c[0],c[1])}},Iw=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Pw=un("HTMLFormElement"),kw=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),ch=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Lw=un("RegExp"),wp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};li(n,(o,c)=>{let l;(l=t(o,c,e))!==!1&&(r[c]=l||o)}),Object.defineProperties(e,r)},Mw=e=>{wp(e,(t,n)=>{if(Wt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Wt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Nw=(e,t)=>{const n={},r=o=>{o.forEach(c=>{n[c]=!0})};return ir(e)?r(e):r(String(e).split(t)),n},xw=()=>{},Dw=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Fw(e){return!!(e&&Wt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Uw=e=>{const t=new Array(10),n=(r,o)=>{if(wo(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const c=ir(r)?[]:{};return li(r,(l,f)=>{const d=n(l,o+1);!ti(d)&&(c[f]=d)}),t[o]=void 0,c}}return r};return n(e,0)},Bw=un("AsyncFunction"),Hw=e=>e&&(wo(e)||Wt(e))&&Wt(e.then)&&Wt(e.catch),Sp=((e,t)=>e?setImmediate:t?((n,r)=>(_s.addEventListener("message",({source:o,data:c})=>{o===_s&&c===n&&r.length&&r.shift()()},!1),o=>{r.push(o),_s.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Wt(_s.postMessage)),Gw=typeof queueMicrotask<"u"?queueMicrotask.bind(_s):typeof process<"u"&&process.nextTick||Sp,J={isArray:ir,isArrayBuffer:vp,isBuffer:iw,isFormData:gw,isArrayBufferView:ow,isString:aw,isNumber:Ep,isBoolean:cw,isObject:wo,isPlainObject:Fi,isReadableStream:mw,isRequest:yw,isResponse:_w,isHeaders:bw,isUndefined:ti,isDate:lw,isFile:uw,isBlob:fw,isRegExp:Lw,isFunction:Wt,isStream:dw,isURLSearchParams:pw,isTypedArray:Rw,isFileList:hw,forEach:li,merge:tc,extend:Ew,trim:vw,stripBOM:Cw,inherits:Ow,toFlatObject:ww,kindOf:Co,kindOfTest:un,endsWith:Sw,toArray:Tw,forEachEntry:Aw,matchAll:Iw,isHTMLForm:Pw,hasOwnProperty:ch,hasOwnProp:ch,reduceDescriptors:wp,freezeMethods:Mw,toObjectSet:Nw,toCamelCase:kw,noop:xw,toFiniteNumber:Dw,findKey:Cp,global:_s,isContextDefined:Op,isSpecCompliantForm:Fw,toJSONObject:Uw,isAsyncFn:Bw,isThenable:Hw,setImmediate:Sp,asap:Gw};function Pe(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}J.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const Tp=Pe.prototype,Rp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Rp[e]={value:e}});Object.defineProperties(Pe,Rp);Object.defineProperty(Tp,"isAxiosError",{value:!0});Pe.from=(e,t,n,r,o,c)=>{const l=Object.create(Tp);return J.toFlatObject(e,l,function(d){return d!==Error.prototype},f=>f!=="isAxiosError"),Pe.call(l,e.message,t,n,r,o),l.cause=e,l.name=e.name,c&&Object.assign(l,c),l};const jw=null;function nc(e){return J.isPlainObject(e)||J.isArray(e)}function Ap(e){return J.endsWith(e,"[]")?e.slice(0,-2):e}function lh(e,t,n){return e?e.concat(t).map(function(o,c){return o=Ap(o),!n&&c?"["+o+"]":o}).join(n?".":""):t}function $w(e){return J.isArray(e)&&!e.some(nc)}const Ww=J.toFlatObject(J,{},null,function(t){return/^is[A-Z]/.test(t)});function So(e,t,n){if(!J.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=J.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,F){return!J.isUndefined(F[N])});const r=n.metaTokens,o=n.visitor||y,c=n.dots,l=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(t);if(!J.isFunction(o))throw new TypeError("visitor must be a function");function g(R){if(R===null)return"";if(J.isDate(R))return R.toISOString();if(!d&&J.isBlob(R))throw new Pe("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(R)||J.isTypedArray(R)?d&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function y(R,N,F){let U=R;if(R&&!F&&typeof R=="object"){if(J.endsWith(N,"{}"))N=r?N:N.slice(0,-2),R=JSON.stringify(R);else if(J.isArray(R)&&$w(R)||(J.isFileList(R)||J.endsWith(N,"[]"))&&(U=J.toArray(R)))return N=Ap(N),U.forEach(function(x,C){!(J.isUndefined(x)||x===null)&&t.append(l===!0?lh([N],C,c):l===null?N:N+"[]",g(x))}),!1}return nc(R)?!0:(t.append(lh(F,N,c),g(R)),!1)}const _=[],b=Object.assign(Ww,{defaultVisitor:y,convertValue:g,isVisitable:nc});function w(R,N){if(!J.isUndefined(R)){if(_.indexOf(R)!==-1)throw Error("Circular reference detected in "+N.join("."));_.push(R),J.forEach(R,function(U,q){(!(J.isUndefined(U)||U===null)&&o.call(t,U,J.isString(q)?q.trim():q,N,b))===!0&&w(U,N?N.concat(q):[q])}),_.pop()}}if(!J.isObject(e))throw new TypeError("data must be an object");return w(e),t}function uh(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function tl(e,t){this._pairs=[],e&&So(e,this,t)}const Ip=tl.prototype;Ip.append=function(t,n){this._pairs.push([t,n])};Ip.toString=function(t){const n=t?function(r){return t.call(this,r,uh)}:uh;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Vw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Pp(e,t,n){if(!t)return e;const r=n&&n.encode||Vw;J.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let c;if(o?c=o(t,n):c=J.isURLSearchParams(t)?t.toString():new tl(t,n).toString(r),c){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class fh{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){J.forEach(this.handlers,function(r){r!==null&&t(r)})}}const kp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qw=typeof URLSearchParams<"u"?URLSearchParams:tl,Kw=typeof FormData<"u"?FormData:null,zw=typeof Blob<"u"?Blob:null,Jw={isBrowser:!0,classes:{URLSearchParams:qw,FormData:Kw,Blob:zw},protocols:["http","https","file","blob","url","data"]},nl=typeof window<"u"&&typeof document<"u",sc=typeof navigator=="object"&&navigator||void 0,Yw=nl&&(!sc||["ReactNative","NativeScript","NS"].indexOf(sc.product)<0),Xw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qw=nl&&window.location.href||"http://localhost",Zw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nl,hasStandardBrowserEnv:Yw,hasStandardBrowserWebWorkerEnv:Xw,navigator:sc,origin:Qw},Symbol.toStringTag,{value:"Module"})),Ot={...Zw,...Jw};function eS(e,t){return So(e,new Ot.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,c){return Ot.isNode&&J.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},t))}function tS(e){return J.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function nS(e){const t={},n=Object.keys(e);let r;const o=n.length;let c;for(r=0;r<o;r++)c=n[r],t[c]=e[c];return t}function Lp(e){function t(n,r,o,c){let l=n[c++];if(l==="__proto__")return!0;const f=Number.isFinite(+l),d=c>=n.length;return l=!l&&J.isArray(o)?o.length:l,d?(J.hasOwnProp(o,l)?o[l]=[o[l],r]:o[l]=r,!f):((!o[l]||!J.isObject(o[l]))&&(o[l]=[]),t(n,r,o[l],c)&&J.isArray(o[l])&&(o[l]=nS(o[l])),!f)}if(J.isFormData(e)&&J.isFunction(e.entries)){const n={};return J.forEachEntry(e,(r,o)=>{t(tS(r),o,n,0)}),n}return null}function sS(e,t,n){if(J.isString(e))try{return(t||JSON.parse)(e),J.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const ui={transitional:kp,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,c=J.isObject(t);if(c&&J.isHTMLForm(t)&&(t=new FormData(t)),J.isFormData(t))return o?JSON.stringify(Lp(t)):t;if(J.isArrayBuffer(t)||J.isBuffer(t)||J.isStream(t)||J.isFile(t)||J.isBlob(t)||J.isReadableStream(t))return t;if(J.isArrayBufferView(t))return t.buffer;if(J.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return eS(t,this.formSerializer).toString();if((f=J.isFileList(t))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return So(f?{"files[]":t}:t,d&&new d,this.formSerializer)}}return c||o?(n.setContentType("application/json",!1),sS(t)):t}],transformResponse:[function(t){const n=this.transitional||ui.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(J.isResponse(t)||J.isReadableStream(t))return t;if(t&&J.isString(t)&&(r&&!this.responseType||o)){const l=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(f){if(l)throw f.name==="SyntaxError"?Pe.from(f,Pe.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ot.classes.FormData,Blob:Ot.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],e=>{ui.headers[e]={}});const rS=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iS=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(l){o=l.indexOf(":"),n=l.substring(0,o).trim().toLowerCase(),r=l.substring(o+1).trim(),!(!n||t[n]&&rS[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},hh=Symbol("internals");function Rr(e){return e&&String(e).trim().toLowerCase()}function Ui(e){return e===!1||e==null?e:J.isArray(e)?e.map(Ui):String(e)}function oS(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const aS=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sa(e,t,n,r,o){if(J.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!J.isString(t)){if(J.isString(r))return t.indexOf(r)!==-1;if(J.isRegExp(r))return r.test(t)}}function cS(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function lS(e,t){const n=J.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,c,l){return this[r].call(this,t,o,c,l)},configurable:!0})})}let Bt=class{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function c(f,d,g){const y=Rr(d);if(!y)throw new Error("header name must be a non-empty string");const _=J.findKey(o,y);(!_||o[_]===void 0||g===!0||g===void 0&&o[_]!==!1)&&(o[_||d]=Ui(f))}const l=(f,d)=>J.forEach(f,(g,y)=>c(g,y,d));if(J.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if(J.isString(t)&&(t=t.trim())&&!aS(t))l(iS(t),n);else if(J.isHeaders(t))for(const[f,d]of t.entries())c(d,f,r);else t!=null&&c(n,t,r);return this}get(t,n){if(t=Rr(t),t){const r=J.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return oS(o);if(J.isFunction(n))return n.call(this,o,r);if(J.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Rr(t),t){const r=J.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Sa(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function c(l){if(l=Rr(l),l){const f=J.findKey(r,l);f&&(!n||Sa(r,r[f],f,n))&&(delete r[f],o=!0)}}return J.isArray(t)?t.forEach(c):c(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const c=n[r];(!t||Sa(this,this[c],c,t,!0))&&(delete this[c],o=!0)}return o}normalize(t){const n=this,r={};return J.forEach(this,(o,c)=>{const l=J.findKey(r,c);if(l){n[l]=Ui(o),delete n[c];return}const f=t?cS(c):String(c).trim();f!==c&&delete n[c],n[f]=Ui(o),r[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return J.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&J.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[hh]=this[hh]={accessors:{}}).accessors,o=this.prototype;function c(l){const f=Rr(l);r[f]||(lS(o,l),r[f]=!0)}return J.isArray(t)?t.forEach(c):c(t),this}};Bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);J.reduceDescriptors(Bt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});J.freezeMethods(Bt);function Ta(e,t){const n=this||ui,r=t||n,o=Bt.from(r.headers);let c=r.data;return J.forEach(e,function(f){c=f.call(n,c,o.normalize(),t?t.status:void 0)}),o.normalize(),c}function Mp(e){return!!(e&&e.__CANCEL__)}function or(e,t,n){Pe.call(this,e??"canceled",Pe.ERR_CANCELED,t,n),this.name="CanceledError"}J.inherits(or,Pe,{__CANCEL__:!0});function Np(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Pe("Request failed with status code "+n.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function uS(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function fS(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,c=0,l;return t=t!==void 0?t:1e3,function(d){const g=Date.now(),y=r[c];l||(l=g),n[o]=d,r[o]=g;let _=c,b=0;for(;_!==o;)b+=n[_++],_=_%e;if(o=(o+1)%e,o===c&&(c=(c+1)%e),g-l<t)return;const w=y&&g-y;return w?Math.round(b*1e3/w):void 0}}function hS(e,t){let n=0,r=1e3/t,o,c;const l=(g,y=Date.now())=>{n=y,o=null,c&&(clearTimeout(c),c=null),e.apply(null,g)};return[(...g)=>{const y=Date.now(),_=y-n;_>=r?l(g,y):(o=g,c||(c=setTimeout(()=>{c=null,l(o)},r-_)))},()=>o&&l(o)]}const to=(e,t,n=3)=>{let r=0;const o=fS(50,250);return hS(c=>{const l=c.loaded,f=c.lengthComputable?c.total:void 0,d=l-r,g=o(d),y=l<=f;r=l;const _={loaded:l,total:f,progress:f?l/f:void 0,bytes:d,rate:g||void 0,estimated:g&&f&&y?(f-l)/g:void 0,event:c,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(_)},n)},dh=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},gh=e=>(...t)=>J.asap(()=>e(...t)),dS=Ot.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ot.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ot.origin),Ot.navigator&&/(msie|trident)/i.test(Ot.navigator.userAgent)):()=>!0,gS=Ot.hasStandardBrowserEnv?{write(e,t,n,r,o,c){const l=[e+"="+encodeURIComponent(t)];J.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),J.isString(r)&&l.push("path="+r),J.isString(o)&&l.push("domain="+o),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pS(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function mS(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function xp(e,t,n){let r=!pS(t);return e&&r||n==!1?mS(e,t):t}const ph=e=>e instanceof Bt?{...e}:e;function Ss(e,t){t=t||{};const n={};function r(g,y,_,b){return J.isPlainObject(g)&&J.isPlainObject(y)?J.merge.call({caseless:b},g,y):J.isPlainObject(y)?J.merge({},y):J.isArray(y)?y.slice():y}function o(g,y,_,b){if(J.isUndefined(y)){if(!J.isUndefined(g))return r(void 0,g,_,b)}else return r(g,y,_,b)}function c(g,y){if(!J.isUndefined(y))return r(void 0,y)}function l(g,y){if(J.isUndefined(y)){if(!J.isUndefined(g))return r(void 0,g)}else return r(void 0,y)}function f(g,y,_){if(_ in t)return r(g,y);if(_ in e)return r(void 0,g)}const d={url:c,method:c,data:c,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(g,y,_)=>o(ph(g),ph(y),_,!0)};return J.forEach(Object.keys(Object.assign({},e,t)),function(y){const _=d[y]||o,b=_(e[y],t[y],y);J.isUndefined(b)&&_!==f||(n[y]=b)}),n}const Dp=e=>{const t=Ss({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:c,headers:l,auth:f}=t;t.headers=l=Bt.from(l),t.url=Pp(xp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let d;if(J.isFormData(n)){if(Ot.hasStandardBrowserEnv||Ot.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[g,...y]=d?d.split(";").map(_=>_.trim()).filter(Boolean):[];l.setContentType([g||"multipart/form-data",...y].join("; "))}}if(Ot.hasStandardBrowserEnv&&(r&&J.isFunction(r)&&(r=r(t)),r||r!==!1&&dS(t.url))){const g=o&&c&&gS.read(c);g&&l.set(o,g)}return t},yS=typeof XMLHttpRequest<"u",_S=yS&&function(e){return new Promise(function(n,r){const o=Dp(e);let c=o.data;const l=Bt.from(o.headers).normalize();let{responseType:f,onUploadProgress:d,onDownloadProgress:g}=o,y,_,b,w,R;function N(){w&&w(),R&&R(),o.cancelToken&&o.cancelToken.unsubscribe(y),o.signal&&o.signal.removeEventListener("abort",y)}let F=new XMLHttpRequest;F.open(o.method.toUpperCase(),o.url,!0),F.timeout=o.timeout;function U(){if(!F)return;const x=Bt.from("getAllResponseHeaders"in F&&F.getAllResponseHeaders()),$={data:!f||f==="text"||f==="json"?F.responseText:F.response,status:F.status,statusText:F.statusText,headers:x,config:e,request:F};Np(function(K){n(K),N()},function(K){r(K),N()},$),F=null}"onloadend"in F?F.onloadend=U:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(U)},F.onabort=function(){F&&(r(new Pe("Request aborted",Pe.ECONNABORTED,e,F)),F=null)},F.onerror=function(){r(new Pe("Network Error",Pe.ERR_NETWORK,e,F)),F=null},F.ontimeout=function(){let C=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const $=o.transitional||kp;o.timeoutErrorMessage&&(C=o.timeoutErrorMessage),r(new Pe(C,$.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,e,F)),F=null},c===void 0&&l.setContentType(null),"setRequestHeader"in F&&J.forEach(l.toJSON(),function(C,$){F.setRequestHeader($,C)}),J.isUndefined(o.withCredentials)||(F.withCredentials=!!o.withCredentials),f&&f!=="json"&&(F.responseType=o.responseType),g&&([b,R]=to(g,!0),F.addEventListener("progress",b)),d&&F.upload&&([_,w]=to(d),F.upload.addEventListener("progress",_),F.upload.addEventListener("loadend",w)),(o.cancelToken||o.signal)&&(y=x=>{F&&(r(!x||x.type?new or(null,e,F):x),F.abort(),F=null)},o.cancelToken&&o.cancelToken.subscribe(y),o.signal&&(o.signal.aborted?y():o.signal.addEventListener("abort",y)));const q=uS(o.url);if(q&&Ot.protocols.indexOf(q)===-1){r(new Pe("Unsupported protocol "+q+":",Pe.ERR_BAD_REQUEST,e));return}F.send(c||null)})},bS=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const c=function(g){if(!o){o=!0,f();const y=g instanceof Error?g:this.reason;r.abort(y instanceof Pe?y:new or(y instanceof Error?y.message:y))}};let l=t&&setTimeout(()=>{l=null,c(new Pe(`timeout ${t} of ms exceeded`,Pe.ETIMEDOUT))},t);const f=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(c):g.removeEventListener("abort",c)}),e=null)};e.forEach(g=>g.addEventListener("abort",c));const{signal:d}=r;return d.unsubscribe=()=>J.asap(f),d}},vS=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},ES=async function*(e,t){for await(const n of CS(e))yield*vS(n,t)},CS=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},mh=(e,t,n,r)=>{const o=ES(e,t);let c=0,l,f=d=>{l||(l=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:g,value:y}=await o.next();if(g){f(),d.close();return}let _=y.byteLength;if(n){let b=c+=_;n(b)}d.enqueue(new Uint8Array(y))}catch(g){throw f(g),g}},cancel(d){return f(d),o.return()}},{highWaterMark:2})},To=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Fp=To&&typeof ReadableStream=="function",OS=To&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Up=(e,...t)=>{try{return!!e(...t)}catch{return!1}},wS=Fp&&Up(()=>{let e=!1;const t=new Request(Ot.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),yh=64*1024,rc=Fp&&Up(()=>J.isReadableStream(new Response("").body)),no={stream:rc&&(e=>e.body)};To&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!no[t]&&(no[t]=J.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Pe(`Response type '${t}' is not supported`,Pe.ERR_NOT_SUPPORT,r)})})})(new Response);const SS=async e=>{if(e==null)return 0;if(J.isBlob(e))return e.size;if(J.isSpecCompliantForm(e))return(await new Request(Ot.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(J.isArrayBufferView(e)||J.isArrayBuffer(e))return e.byteLength;if(J.isURLSearchParams(e)&&(e=e+""),J.isString(e))return(await OS(e)).byteLength},TS=async(e,t)=>{const n=J.toFiniteNumber(e.getContentLength());return n??SS(t)},RS=To&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:c,timeout:l,onDownloadProgress:f,onUploadProgress:d,responseType:g,headers:y,withCredentials:_="same-origin",fetchOptions:b}=Dp(e);g=g?(g+"").toLowerCase():"text";let w=bS([o,c&&c.toAbortSignal()],l),R;const N=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let F;try{if(d&&wS&&n!=="get"&&n!=="head"&&(F=await TS(y,r))!==0){let $=new Request(t,{method:"POST",body:r,duplex:"half"}),B;if(J.isFormData(r)&&(B=$.headers.get("content-type"))&&y.setContentType(B),$.body){const[K,Y]=dh(F,to(gh(d)));r=mh($.body,yh,K,Y)}}J.isString(_)||(_=_?"include":"omit");const U="credentials"in Request.prototype;R=new Request(t,{...b,signal:w,method:n.toUpperCase(),headers:y.normalize().toJSON(),body:r,duplex:"half",credentials:U?_:void 0});let q=await fetch(R);const x=rc&&(g==="stream"||g==="response");if(rc&&(f||x&&N)){const $={};["status","statusText","headers"].forEach(D=>{$[D]=q[D]});const B=J.toFiniteNumber(q.headers.get("content-length")),[K,Y]=f&&dh(B,to(gh(f),!0))||[];q=new Response(mh(q.body,yh,K,()=>{Y&&Y(),N&&N()}),$)}g=g||"text";let C=await no[J.findKey(no,g)||"text"](q,e);return!x&&N&&N(),await new Promise(($,B)=>{Np($,B,{data:C,headers:Bt.from(q.headers),status:q.status,statusText:q.statusText,config:e,request:R})})}catch(U){throw N&&N(),U&&U.name==="TypeError"&&/fetch/i.test(U.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,e,R),{cause:U.cause||U}):Pe.from(U,U&&U.code,e,R)}}),ic={http:jw,xhr:_S,fetch:RS};J.forEach(ic,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const _h=e=>`- ${e}`,AS=e=>J.isFunction(e)||e===null||e===!1,Bp={getAdapter:e=>{e=J.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let c=0;c<t;c++){n=e[c];let l;if(r=n,!AS(n)&&(r=ic[(l=String(n)).toLowerCase()],r===void 0))throw new Pe(`Unknown adapter '${l}'`);if(r)break;o[l||"#"+c]=r}if(!r){const c=Object.entries(o).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=t?c.length>1?`since :
`+c.map(_h).join(`
`):" "+_h(c[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:ic};function Ra(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new or(null,e)}function bh(e){return Ra(e),e.headers=Bt.from(e.headers),e.data=Ta.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Bp.getAdapter(e.adapter||ui.adapter)(e).then(function(r){return Ra(e),r.data=Ta.call(e,e.transformResponse,r),r.headers=Bt.from(r.headers),r},function(r){return Mp(r)||(Ra(e),r&&r.response&&(r.response.data=Ta.call(e,e.transformResponse,r.response),r.response.headers=Bt.from(r.response.headers))),Promise.reject(r)})}const Hp="1.8.3",Ro={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ro[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const vh={};Ro.transitional=function(t,n,r){function o(c,l){return"[Axios v"+Hp+"] Transitional option '"+c+"'"+l+(r?". "+r:"")}return(c,l,f)=>{if(t===!1)throw new Pe(o(l," has been removed"+(n?" in "+n:"")),Pe.ERR_DEPRECATED);return n&&!vh[l]&&(vh[l]=!0),t?t(c,l,f):!0}};Ro.spelling=function(t){return(n,r)=>!0};function IS(e,t,n){if(typeof e!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const c=r[o],l=t[c];if(l){const f=e[c],d=f===void 0||l(f,c,e);if(d!==!0)throw new Pe("option "+c+" must be "+d,Pe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Pe("Unknown option "+c,Pe.ERR_BAD_OPTION)}}const Bi={assertOptions:IS,validators:Ro},yn=Bi.validators;let Cs=class{constructor(t){this.defaults=t,this.interceptors={request:new fh,response:new fh}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const c=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ss(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:c}=n;r!==void 0&&Bi.assertOptions(r,{silentJSONParsing:yn.transitional(yn.boolean),forcedJSONParsing:yn.transitional(yn.boolean),clarifyTimeoutError:yn.transitional(yn.boolean)},!1),o!=null&&(J.isFunction(o)?n.paramsSerializer={serialize:o}:Bi.assertOptions(o,{encode:yn.function,serialize:yn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Bi.assertOptions(n,{baseUrl:yn.spelling("baseURL"),withXsrfToken:yn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=c&&J.merge(c.common,c[n.method]);c&&J.forEach(["delete","get","head","post","put","patch","common"],R=>{delete c[R]}),n.headers=Bt.concat(l,c);const f=[];let d=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(d=d&&N.synchronous,f.unshift(N.fulfilled,N.rejected))});const g=[];this.interceptors.response.forEach(function(N){g.push(N.fulfilled,N.rejected)});let y,_=0,b;if(!d){const R=[bh.bind(this),void 0];for(R.unshift.apply(R,f),R.push.apply(R,g),b=R.length,y=Promise.resolve(n);_<b;)y=y.then(R[_++],R[_++]);return y}b=f.length;let w=n;for(_=0;_<b;){const R=f[_++],N=f[_++];try{w=R(w)}catch(F){N.call(this,F);break}}try{y=bh.call(this,w)}catch(R){return Promise.reject(R)}for(_=0,b=g.length;_<b;)y=y.then(g[_++],g[_++]);return y}getUri(t){t=Ss(this.defaults,t);const n=xp(t.baseURL,t.url,t.allowAbsoluteUrls);return Pp(n,t.params,t.paramsSerializer)}};J.forEach(["delete","get","head","options"],function(t){Cs.prototype[t]=function(n,r){return this.request(Ss(r||{},{method:t,url:n,data:(r||{}).data}))}});J.forEach(["post","put","patch"],function(t){function n(r){return function(c,l,f){return this.request(Ss(f||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:l}))}}Cs.prototype[t]=n(),Cs.prototype[t+"Form"]=n(!0)});let PS=class Gp{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(o=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](o);r._listeners=null}),this.promise.then=o=>{let c;const l=new Promise(f=>{r.subscribe(f),c=f}).then(o);return l.cancel=function(){r.unsubscribe(c)},l},t(function(c,l,f){r.reason||(r.reason=new or(c,l,f),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Gp(function(o){t=o}),cancel:t}}};function kS(e){return function(n){return e.apply(null,n)}}function LS(e){return J.isObject(e)&&e.isAxiosError===!0}const oc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(oc).forEach(([e,t])=>{oc[t]=e});function jp(e){const t=new Cs(e),n=bp(Cs.prototype.request,t);return J.extend(n,Cs.prototype,t,{allOwnKeys:!0}),J.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return jp(Ss(e,o))},n}const rt=jp(ui);rt.Axios=Cs;rt.CanceledError=or;rt.CancelToken=PS;rt.isCancel=Mp;rt.VERSION=Hp;rt.toFormData=So;rt.AxiosError=Pe;rt.Cancel=rt.CanceledError;rt.all=function(t){return Promise.all(t)};rt.spread=kS;rt.isAxiosError=LS;rt.mergeConfig=Ss;rt.AxiosHeaders=Bt;rt.formToJSON=e=>Lp(J.isHTMLForm(e)?new FormData(e):e);rt.getAdapter=Bp.getAdapter;rt.HttpStatusCode=oc;rt.default=rt;const{Axios:QR,AxiosError:ZR,CanceledError:eA,isCancel:tA,CancelToken:nA,VERSION:sA,all:rA,Cancel:iA,isAxiosError:oA,spread:aA,toFormData:cA,AxiosHeaders:lA,HttpStatusCode:uA,formToJSON:fA,getAdapter:hA,mergeConfig:dA}=rt;function ac(){}const Yt=Object.assign,sl=typeof window<"u",Ao=e=>e!==null&&typeof e=="object",ss=e=>e!=null,so=e=>typeof e=="function",MS=e=>Ao(e)&&so(e.then)&&so(e.catch),$p=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),NS=()=>sl?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function Eh(e,t){const n=t.split(".");let r=e;return n.forEach(o=>{var c;r=Ao(r)&&(c=r[o])!=null?c:""}),r}function Wp(e,t,n){return t.reduce((r,o)=>(r[o]=e[o],r),{})}const ni=null,St=[Number,String],tn={type:Boolean,default:!0},xS=e=>({type:Number,default:e}),gA=e=>({type:St,default:e}),wt=e=>({type:String,default:e});var ar=typeof window<"u";function Ch(e){return ar?requestAnimationFrame(e):-1}function DS(e){ar&&cancelAnimationFrame(e)}var FS=e=>e===window,Oh=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),US=e=>{const t=on(e);if(FS(t)){const n=t.innerWidth,r=t.innerHeight;return Oh(n,r)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():Oh(0,0)};function BS(e){const t=Ut(e,null);if(t){const n=Ht(),{link:r,unlink:o,internalChildren:c}=t;r(n),sr(()=>o(n));const l=$e(()=>c.indexOf(n));return{parent:t,index:l}}return{parent:null,index:He(-1)}}function HS(e){const t=[],n=r=>{Array.isArray(r)&&r.forEach(o=>{var c;Ys(o)&&(t.push(o),(c=o.component)!=null&&c.subTree&&(t.push(o.component.subTree),n(o.component.subTree.children)),o.children&&n(o.children))})};return n(e),t}var wh=(e,t)=>{const n=e.indexOf(t);return n===-1?e.findIndex(r=>t.key!==void 0&&t.key!==null&&r.type===t.type&&r.key===t.key):n};function GS(e,t,n){const r=HS(e.subTree.children);n.sort((c,l)=>wh(r,c.vnode)-wh(r,l.vnode));const o=n.map(c=>c.proxy);t.sort((c,l)=>{const f=o.indexOf(c),d=o.indexOf(l);return f-d})}function jS(e){const t=On([]),n=On([]),r=Ht();return{children:t,linkChildren:c=>{Js(e,Object.assign({link:d=>{d.proxy&&(n.push(d),t.push(d.proxy),GS(r,t,n))},unlink:d=>{const g=n.indexOf(d);t.splice(g,1),n.splice(g,1)},children:t,internalChildren:n},c))}}}var cc=1e3,lc=60*cc,uc=60*lc,Sh=24*uc;function $S(e){const t=Math.floor(e/Sh),n=Math.floor(e%Sh/uc),r=Math.floor(e%uc/lc),o=Math.floor(e%lc/cc),c=Math.floor(e%cc);return{total:e,days:t,hours:n,minutes:r,seconds:o,milliseconds:c}}function WS(e,t){return Math.floor(e/1e3)===Math.floor(t/1e3)}function pA(e){let t,n,r,o;const c=He(e.time),l=$e(()=>$S(c.value)),f=()=>{r=!1,DS(t)},d=()=>Math.max(n-Date.now(),0),g=N=>{var F,U;c.value=N,(F=e.onChange)==null||F.call(e,l.value),N===0&&(f(),(U=e.onFinish)==null||U.call(e))},y=()=>{t=Ch(()=>{r&&(g(d()),c.value>0&&y())})},_=()=>{t=Ch(()=>{if(r){const N=d();(!WS(N,c.value)||N===0)&&g(N),c.value>0&&_()}})},b=()=>{ar&&(e.millisecond?y():_())},w=()=>{r||(n=Date.now()+c.value,r=!0,b())},R=(N=e.time)=>{f(),c.value=N};return ho(f),uo(()=>{o&&(r=!0,o=!1,b())}),ii(()=>{r&&(f(),o=!0)}),{start:w,pause:f,reset:R,current:l}}function Vp(e){let t;Ts(()=>{e(),Zn(()=>{t=!0})}),uo(()=>{t&&e()})}function qp(e,t,n={}){if(!ar)return;const{target:r=window,passive:o=!1,capture:c=!1}=n;let l=!1,f;const d=_=>{if(l)return;const b=on(_);b&&!f&&(b.addEventListener(e,t,{capture:c,passive:o}),f=!0)},g=_=>{if(l)return;const b=on(_);b&&f&&(b.removeEventListener(e,t,c),f=!1)};sr(()=>g(r)),ii(()=>g(r)),Vp(()=>d(r));let y;return Ze(r)&&(y=dt(r,(_,b)=>{g(b),d(_)})),()=>{y==null||y(),g(r),l=!0}}var Ai,Aa;function VS(){if(!Ai&&(Ai=He(0),Aa=He(0),ar)){const e=()=>{Ai.value=window.innerWidth,Aa.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:Ai,height:Aa}}var qS=/scroll|auto|overlay/i,KS=ar?window:void 0;function zS(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function JS(e,t=KS){let n=e;for(;n&&n!==t&&zS(n);){const{overflowY:r}=window.getComputedStyle(n);if(qS.test(r))return n;n=n.parentNode}return t}NS();const YS=e=>e.stopPropagation();function rl(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&YS(e)}const{width:XS,height:QS}=VS();function zt(e){if(ss(e))return $p(e)?`${e}px`:String(e)}function ZS(e){if(ss(e)){if(Array.isArray(e))return{width:zt(e[0]),height:zt(e[1])};const t=zt(e);return{width:t,height:t}}}function eT(e){const t={};return e!==void 0&&(t.zIndex=+e),t}const tT=/-(\w)/g,Kp=e=>e.replace(tT,(t,n)=>n.toUpperCase());function mA(e,t=2){let n=e+"";for(;n.length<t;)n="0"+n;return n}const{hasOwnProperty:nT}=Object.prototype;function sT(e,t,n){const r=t[n];ss(r)&&(!nT.call(e,n)||!Ao(r)?e[n]=r:e[n]=zp(Object(e[n]),r))}function zp(e,t){return Object.keys(t).forEach(n=>{sT(e,t,n)}),e}var rT={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const Th=He("zh-CN"),Rh=On({"zh-CN":rT}),iT={messages(){return Rh[Th.value]},use(e,t){Th.value=e,this.add({[e]:t})},add(e={}){zp(Rh,e)}};var oT=iT;function aT(e){const t=Kp(e)+".";return(n,...r)=>{const o=oT.messages(),c=Eh(o,t+n)||Eh(o,n);return so(c)?c(...r):c}}function fc(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((n,r)=>n+fc(e,r),""):Object.keys(t).reduce((n,r)=>n+(t[r]?fc(e,r):""),""):""}function cT(e){return(t,n)=>(t&&typeof t!="string"&&(n=t,t=""),t=t?`${e}__${t}`:e,`${t}${fc(t,n)}`)}function fn(e){const t=`van-${e}`;return[t,cT(t),aT(t)]}const il="van-hairline",lT=`${il}--top`,uT=`${il}--left`,fT=`${il}--surround`,hT="van-haptics-feedback",Ah=5;function Jp(e,{args:t=[],done:n,canceled:r,error:o}){if(e){const c=e.apply(null,t);MS(c)?c.then(l=>{l?n():r&&r()}).catch(o||ac):c?n():r&&r()}else n()}function wn(e){return e.install=t=>{const{name:n}=e;n&&(t.component(n,e),t.component(Kp(`-${n}`),e))},e}const Yp=Symbol();function dT(e){const t=Ut(Yp,null);t&&dt(t,n=>{n&&e()})}const gT=(e,t)=>{const n=He(),r=()=>{n.value=US(e).height};return Ts(()=>{Zn(r);for(let o=1;o<=3;o++)setTimeout(r,100*o)}),dT(()=>Zn(r)),dt([XS,QS],r),n};function pT(e,t){const n=gT(e);return r=>ve("div",{class:t("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[r()])}const[Xp,Ih]=fn("action-bar"),Qp=Symbol(Xp),mT={placeholder:Boolean,safeAreaInsetBottom:tn};var yT=Mt({name:Xp,props:mT,setup(e,{slots:t}){const n=He(),r=pT(n,Ih),{linkChildren:o}=jS(Qp);o();const c=()=>{var l;return ve("div",{ref:n,class:[Ih(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(l=t.default)==null?void 0:l.call(t)])};return()=>e.placeholder?r(c):c()}});const _T=wn(yT);function ol(e){const t=Ht();t&&Yt(t.proxy,e)}const Zp={to:[String,Object],url:String,replace:Boolean};function bT({to:e,url:t,replace:n,$router:r}){e&&r?r[n?"replace":"push"](e):t&&(n?location.replace(t):location.href=t)}function em(){const e=Ht().proxy;return()=>bT(e)}const[vT,Ph]=fn("badge"),ET={dot:Boolean,max:St,tag:wt("div"),color:String,offset:Array,content:St,showZero:tn,position:wt("top-right")};var CT=Mt({name:vT,props:ET,setup(e,{slots:t}){const n=()=>{if(t.content)return!0;const{content:f,showZero:d}=e;return ss(f)&&f!==""&&(d||f!==0&&f!=="0")},r=()=>{const{dot:f,max:d,content:g}=e;if(!f&&n())return t.content?t.content():ss(d)&&$p(g)&&+g>+d?`${d}+`:g},o=f=>f.startsWith("-")?f.replace("-",""):`-${f}`,c=$e(()=>{const f={background:e.color};if(e.offset){const[d,g]=e.offset,{position:y}=e,[_,b]=y.split("-");t.default?(typeof g=="number"?f[_]=zt(_==="top"?g:-g):f[_]=_==="top"?zt(g):o(g),typeof d=="number"?f[b]=zt(b==="left"?d:-d):f[b]=b==="left"?zt(d):o(d)):(f.marginTop=zt(g),f.marginLeft=zt(d))}return f}),l=()=>{if(n()||e.dot)return ve("div",{class:Ph([e.position,{dot:e.dot,fixed:!!t.default}]),style:c.value},[r()])};return()=>{if(t.default){const{tag:f}=e;return ve(f,{class:Ph("wrapper")},{default:()=>[t.default(),l()]})}return l()}}});const OT=wn(CT);let wT=2e3;const ST=()=>++wT,[TT,yA]=fn("config-provider"),RT=Symbol(TT),[AT,kh]=fn("icon"),IT=e=>e==null?void 0:e.includes("/"),PT={dot:Boolean,tag:wt("i"),name:String,size:St,badge:St,color:String,badgeProps:Object,classPrefix:String};var kT=Mt({name:AT,props:PT,setup(e,{slots:t}){const n=Ut(RT,null),r=$e(()=>e.classPrefix||(n==null?void 0:n.iconPrefix)||kh());return()=>{const{tag:o,dot:c,name:l,size:f,badge:d,color:g}=e,y=IT(l);return ve(OT,ts({dot:c,tag:o,class:[r.value,y?"":`${r.value}-${l}`],style:{color:g,fontSize:zt(f)},content:d},e.badgeProps),{default:()=>{var _;return[(_=t.default)==null?void 0:_.call(t),y&&ve("img",{class:kh("image"),src:l},null)]}})}}});const al=wn(kT),[LT,$r]=fn("loading"),MT=Array(12).fill(null).map((e,t)=>ve("i",{class:$r("line",String(t+1))},null)),NT=ve("svg",{class:$r("circular"),viewBox:"25 25 50 50"},[ve("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),xT={size:St,type:wt("circular"),color:String,vertical:Boolean,textSize:St,textColor:String};var DT=Mt({name:LT,props:xT,setup(e,{slots:t}){const n=$e(()=>Yt({color:e.color},ZS(e.size))),r=()=>{const c=e.type==="spinner"?MT:NT;return ve("span",{class:$r("spinner",e.type),style:n.value},[t.icon?t.icon():c])},o=()=>{var c;if(t.default)return ve("span",{class:$r("text"),style:{fontSize:zt(e.textSize),color:(c=e.textColor)!=null?c:e.color}},[t.default()])};return()=>{const{type:c,vertical:l}=e;return ve("div",{class:$r([c,{vertical:l}]),"aria-live":"polite","aria-busy":!0},[r(),o()])}}});const tm=wn(DT),[FT,Fs]=fn("button"),UT=Yt({},Zp,{tag:wt("button"),text:String,icon:String,type:wt("default"),size:wt("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:wt("button"),loadingSize:St,loadingText:String,loadingType:String,iconPosition:wt("left")});var BT=Mt({name:FT,props:UT,emits:["click"],setup(e,{emit:t,slots:n}){const r=em(),o=()=>n.loading?n.loading():ve(tm,{size:e.loadingSize,type:e.loadingType,class:Fs("loading")},null),c=()=>{if(e.loading)return o();if(n.icon)return ve("div",{class:Fs("icon")},[n.icon()]);if(e.icon)return ve(al,{name:e.icon,class:Fs("icon"),classPrefix:e.iconPrefix},null)},l=()=>{let g;if(e.loading?g=e.loadingText:g=n.default?n.default():e.text,g)return ve("span",{class:Fs("text")},[g])},f=()=>{const{color:g,plain:y}=e;if(g){const _={color:y?g:"white"};return y||(_.background=g),g.includes("gradient")?_.border=0:_.borderColor=g,_}},d=g=>{e.loading?rl(g):e.disabled||(t("click",g),r())};return()=>{const{tag:g,type:y,size:_,block:b,round:w,plain:R,square:N,loading:F,disabled:U,hairline:q,nativeType:x,iconPosition:C}=e,$=[Fs([y,_,{plain:R,block:b,round:w,square:N,loading:F,disabled:U,hairline:q}]),{[fT]:q}];return ve(g,{type:x,class:$,style:f(),disabled:U,onClick:d},{default:()=>[ve("div",{class:Fs("content")},[C==="left"&&c(),l(),C==="right"&&c()])]})}}});const hc=wn(BT),[HT,GT]=fn("action-bar-button"),jT=Yt({},Zp,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var $T=Mt({name:HT,props:jT,setup(e,{slots:t}){const n=em(),{parent:r,index:o}=BS(Qp),c=$e(()=>{if(r){const f=r.children[o.value-1];return!(f&&"isButton"in f)}}),l=$e(()=>{if(r){const f=r.children[o.value+1];return!(f&&"isButton"in f)}});return ol({isButton:!0}),()=>{const{type:f,icon:d,text:g,color:y,loading:_,disabled:b}=e;return ve(hc,{class:GT([f,{last:l.value,first:c.value}]),size:"large",type:f,icon:d,color:y,loading:_,disabled:b,onClick:n},{default:()=>[t.default?t.default():g]})}}});const Lh=wn($T),cl={show:Boolean,zIndex:St,overlay:tn,duration:St,teleport:[String,Object],lockScroll:tn,lazyRender:tn,beforeClose:Function,overlayStyle:Object,overlayClass:ni,transitionAppear:Boolean,closeOnClickOverlay:tn},WT=Object.keys(cl);function VT(e,t){return e>t?"horizontal":t>e?"vertical":""}function qT(){const e=He(0),t=He(0),n=He(0),r=He(0),o=He(0),c=He(0),l=He(""),f=He(!0),d=()=>l.value==="vertical",g=()=>l.value==="horizontal",y=()=>{n.value=0,r.value=0,o.value=0,c.value=0,l.value="",f.value=!0};return{move:w=>{const R=w.touches[0];n.value=(R.clientX<0?0:R.clientX)-e.value,r.value=R.clientY-t.value,o.value=Math.abs(n.value),c.value=Math.abs(r.value);const N=10;(!l.value||o.value<N&&c.value<N)&&(l.value=VT(o.value,c.value)),f.value&&(o.value>Ah||c.value>Ah)&&(f.value=!1)},start:w=>{y(),e.value=w.touches[0].clientX,t.value=w.touches[0].clientY},reset:y,startX:e,startY:t,deltaX:n,deltaY:r,offsetX:o,offsetY:c,direction:l,isVertical:d,isHorizontal:g,isTap:f}}let Ar=0;const Mh="van-overflow-hidden";function KT(e,t){const n=qT(),r="01",o="10",c=y=>{n.move(y);const _=n.deltaY.value>0?o:r,b=JS(y.target,e.value),{scrollHeight:w,offsetHeight:R,scrollTop:N}=b;let F="11";N===0?F=R>=w?"00":"01":N+R>=w&&(F="10"),F!=="11"&&n.isVertical()&&!(parseInt(F,2)&parseInt(_,2))&&rl(y,!0)},l=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",c,{passive:!1}),Ar||document.body.classList.add(Mh),Ar++},f=()=>{Ar&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",c),Ar--,Ar||document.body.classList.remove(Mh))},d=()=>t()&&l(),g=()=>t()&&f();Vp(d),ii(g),ho(g),dt(t,y=>{y?l():f()})}function nm(e){const t=He(!1);return dt(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const Nh=()=>{var e;const{scopeId:t}=((e=Ht())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[zT,JT]=fn("overlay"),YT={show:Boolean,zIndex:St,duration:St,className:ni,lockScroll:tn,lazyRender:tn,customStyle:Object,teleport:[String,Object]};var XT=Mt({name:zT,props:YT,setup(e,{slots:t}){const n=He(),r=nm(()=>e.show||!e.lazyRender),o=l=>{e.lockScroll&&rl(l,!0)},c=r(()=>{var l;const f=Yt(eT(e.zIndex),e.customStyle);return ss(e.duration)&&(f.animationDuration=`${e.duration}s`),Ed(ve("div",{ref:n,style:f,class:[JT(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[mg,e.show]])});return qp("touchmove",o,{target:n}),()=>{const l=ve(hg,{name:"van-fade",appear:!0},{default:c});return e.teleport?ve(Sd,{to:e.teleport},{default:()=>[l]}):l}}});const QT=wn(XT),ZT=Yt({},cl,{round:Boolean,position:wt("center"),closeIcon:wt("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:wt("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[eR,xh]=fn("popup");var tR=Mt({name:eR,inheritAttrs:!1,props:ZT,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:r}){let o,c;const l=He(),f=He(),d=nm(()=>e.show||!e.lazyRender),g=$e(()=>{const B={zIndex:l.value};if(ss(e.duration)){const K=e.position==="center"?"animationDuration":"transitionDuration";B[K]=`${e.duration}s`}return B}),y=()=>{o||(o=!0,l.value=e.zIndex!==void 0?+e.zIndex:ST(),t("open"))},_=()=>{o&&Jp(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},b=B=>{t("clickOverlay",B),e.closeOnClickOverlay&&_()},w=()=>{if(e.overlay)return ve(QT,ts({show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},Nh(),{onClick:b}),{default:r["overlay-content"]})},R=B=>{t("clickCloseIcon",B),_()},N=()=>{if(e.closeable)return ve(al,{role:"button",tabindex:0,name:e.closeIcon,class:[xh("close-icon",e.closeIconPosition),hT],classPrefix:e.iconPrefix,onClick:R},null)};let F;const U=()=>{F&&clearTimeout(F),F=setTimeout(()=>{t("opened")})},q=()=>t("closed"),x=B=>t("keydown",B),C=d(()=>{var B;const{destroyOnClose:K,round:Y,position:D,safeAreaInsetTop:le,safeAreaInsetBottom:p,show:v}=e;if(!(!v&&K))return Ed(ve("div",ts({ref:f,style:g.value,role:"dialog",tabindex:0,class:[xh({round:Y,[D]:D}),{"van-safe-area-top":le,"van-safe-area-bottom":p}],onKeydown:x},n,Nh()),[(B=r.default)==null?void 0:B.call(r),N()]),[[mg,v]])}),$=()=>{const{position:B,transition:K,transitionAppear:Y}=e,D=B==="center"?"van-fade":`van-popup-slide-${B}`;return ve(hg,{name:K||D,appear:Y,onAfterEnter:U,onAfterLeave:q},{default:C})};return dt(()=>e.show,B=>{B&&!o&&(y(),n.tabindex===0&&Zn(()=>{var K;(K=f.value)==null||K.focus()})),!B&&o&&(o=!1,t("close"))}),ol({popupRef:f}),KT(f,()=>e.show&&e.lockScroll),qp("popstate",()=>{e.closeOnPopstate&&(_(),c=!1)}),Ts(()=>{e.show&&y()}),uo(()=>{c&&(t("update:show",!0),c=!1)}),ii(()=>{e.show&&e.teleport&&(_(),c=!0)}),Js(Yp,()=>e.show),()=>e.teleport?ve(Sd,{to:e.teleport},{default:()=>[w(),$()]}):ve(mt,null,[w(),$()])}});const sm=wn(tR);let Ir=0;function nR(e){e?(Ir||document.body.classList.add("van-toast--unclickable"),Ir++):Ir&&(Ir--,Ir||document.body.classList.remove("van-toast--unclickable"))}const[sR,Us]=fn("toast"),rR=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],iR={icon:String,show:Boolean,type:wt("text"),overlay:Boolean,message:St,iconSize:St,duration:xS(2e3),position:wt("middle"),teleport:[String,Object],wordBreak:String,className:ni,iconPrefix:String,transition:wt("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:ni,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:St};var rm=Mt({name:sR,props:iR,emits:["update:show"],setup(e,{emit:t,slots:n}){let r,o=!1;const c=()=>{const _=e.show&&e.forbidClick;o!==_&&(o=_,nR(o))},l=_=>t("update:show",_),f=()=>{e.closeOnClick&&l(!1)},d=()=>clearTimeout(r),g=()=>{const{icon:_,type:b,iconSize:w,iconPrefix:R,loadingType:N}=e;if(_||b==="success"||b==="fail")return ve(al,{name:_||b,size:w,class:Us("icon"),classPrefix:R},null);if(b==="loading")return ve(tm,{class:Us("loading"),size:w,type:N},null)},y=()=>{const{type:_,message:b}=e;if(n.message)return ve("div",{class:Us("text")},[n.message()]);if(ss(b)&&b!=="")return _==="html"?ve("div",{key:0,class:Us("text"),innerHTML:String(b)},null):ve("div",{class:Us("text")},[b])};return dt(()=>[e.show,e.forbidClick],c),dt(()=>[e.show,e.type,e.message,e.duration],()=>{d(),e.show&&e.duration>0&&(r=setTimeout(()=>{l(!1)},e.duration))}),Ts(c),sr(c),()=>ve(sm,ts({class:[Us([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:f,onClosed:d,"onUpdate:show":l},Wp(e,rR)),{default:()=>[g(),y()]})}});function im(){const e=On({show:!1}),t=o=>{e.show=o},n=o=>{Yt(e,o,{transitionAppear:!0}),t(!0)},r=()=>t(!1);return ol({open:n,close:r,toggle:t}),{open:n,close:r,state:e,toggle:t}}function om(e){const t=Eg(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const oR={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let Ii=[],aR=!1,Dh=Yt({},oR);const cR=new Map;function lR(e){return Ao(e)?e:{message:e}}function uR(){const{instance:e}=om({setup(){const t=He(""),{open:n,state:r,close:o,toggle:c}=im(),l=()=>{},f=()=>ve(rm,ts(r,{onClosed:l,"onUpdate:show":c}),null);return dt(t,d=>{r.message=d}),Ht().render=f,{open:n,close:o,message:t}}});return e}function fR(){if(!Ii.length||aR){const e=uR();Ii.push(e)}return Ii[Ii.length-1]}function hR(e={}){if(!sl)return{};const t=fR(),n=lR(e);return t.open(Yt({},Dh,cR.get(n.type||Dh.type),n)),t}wn(rm);const[dR,Qt,Pi]=fn("dialog"),gR=Yt({},cl,{title:String,theme:String,width:St,message:[String,Function],callback:Function,allowHtml:Boolean,className:ni,transition:wt("van-dialog-bounce"),messageAlign:String,closeOnPopstate:tn,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:tn,closeOnClickOverlay:Boolean,keyboardEnabled:tn}),pR=[...WT,"transition","closeOnPopstate"];var am=Mt({name:dR,props:gR,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:t,slots:n}){const r=He(),o=On({confirm:!1,cancel:!1}),c=U=>t("update:show",U),l=U=>{var q;c(!1),(q=e.callback)==null||q.call(e,U)},f=U=>()=>{e.show&&(t(U),e.beforeClose?(o[U]=!0,Jp(e.beforeClose,{args:[U],done(){l(U),o[U]=!1},canceled(){o[U]=!1}})):l(U))},d=f("cancel"),g=f("confirm"),y=_v(U=>{var q,x;if(!e.keyboardEnabled||U.target!==((x=(q=r.value)==null?void 0:q.popupRef)==null?void 0:x.value))return;({Enter:e.showConfirmButton?g:ac,Escape:e.showCancelButton?d:ac})[U.key](),t("keydown",U)},["enter","esc"]),_=()=>{const U=n.title?n.title():e.title;if(U)return ve("div",{class:Qt("header",{isolated:!e.message&&!n.default})},[U])},b=U=>{const{message:q,allowHtml:x,messageAlign:C}=e,$=Qt("message",{"has-title":U,[C]:C}),B=so(q)?q():q;return x&&typeof B=="string"?ve("div",{class:$,innerHTML:B},null):ve("div",{class:$},[B])},w=()=>{if(n.default)return ve("div",{class:Qt("content")},[n.default()]);const{title:U,message:q,allowHtml:x}=e;if(q){const C=!!(U||n.title);return ve("div",{key:x?1:0,class:Qt("content",{isolated:!C})},[b(C)])}},R=()=>ve("div",{class:[lT,Qt("footer")]},[e.showCancelButton&&ve(hc,{size:"large",text:e.cancelButtonText||Pi("cancel"),class:Qt("cancel"),style:{color:e.cancelButtonColor},loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:d},null),e.showConfirmButton&&ve(hc,{size:"large",text:e.confirmButtonText||Pi("confirm"),class:[Qt("confirm"),{[uT]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]),N=()=>ve(_T,{class:Qt("footer")},{default:()=>[e.showCancelButton&&ve(Lh,{type:"warning",text:e.cancelButtonText||Pi("cancel"),class:Qt("cancel"),color:e.cancelButtonColor,loading:o.cancel,disabled:e.cancelButtonDisabled,onClick:d},null),e.showConfirmButton&&ve(Lh,{type:"danger",text:e.confirmButtonText||Pi("confirm"),class:Qt("confirm"),color:e.confirmButtonColor,loading:o.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]}),F=()=>n.footer?n.footer():e.theme==="round-button"?N():R();return()=>{const{width:U,title:q,theme:x,message:C,className:$}=e;return ve(sm,ts({ref:r,role:"dialog",class:[Qt([x]),$],style:{width:zt(U)},tabindex:0,"aria-labelledby":q||C,onKeydown:y,"onUpdate:show":c},Wp(e,pR)),{default:()=>[_(),w(),F()]})}}});let dc;const mR={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let yR=Yt({},mR);function _R(){({instance:dc}=om({setup(){const{state:t,toggle:n}=im();return()=>ve(am,ts(t,{"onUpdate:show":n}),null)}}))}function bR(e){return sl?new Promise((t,n)=>{dc||_R(),dc.open(Yt({},yR,e,{callback:r=>{(r==="confirm"?t:n)(r)}}))}):Promise.resolve(void 0)}wn(am);const fi=rt.create({timeout:1e4,headers:{"Content-Type":"application/json;charset=UTF-8"}});fi.interceptors.request.use(async e=>{const t=mp()||_p().language;return e.headers["x-lang"]=tw(t),e},e=>(hR(e.message),Promise.reject(e)));fi.interceptors.response.use(e=>{let{data:t}=e;return t},e=>Promise.reject(e));function vR(e){return fi({url:"/api/order/counter/query",method:"post",data:e})}function _A(e){return fi({url:"/api/v1/order/pay",method:"post",data:e})}function bA(e){return fi({url:"/api/v1/order/behalfPay",method:"post",data:e})}const ER="200",cm=[{code:"ICB",bin:"970415"},{code:"VCB",bin:"970436"},{code:"BIDV",bin:"970418"},{code:"VBA",bin:"970405"},{code:"OCB",bin:"970448"},{code:"MB",bin:"970422"},{code:"TCB",bin:"970407"},{code:"ACB",bin:"970416"},{code:"VPB",bin:"970432"},{code:"TPB",bin:"970423"},{code:"STB",bin:"970403"},{code:"HDB",bin:"970437"},{code:"VCCB",bin:"970454"},{code:"SCB",bin:"970429"},{code:"VIB",bin:"970441"},{code:"SHB",bin:"970443"},{code:"EIB",bin:"970431"},{code:"MSB",bin:"970426"},{code:"CAKE",bin:"546034"},{code:"Ubank",bin:"546035"},{code:"TIMO",bin:"963388"},{code:"VTLMONEY",bin:"971005"},{code:"VNPTMONEY",bin:"971011"},{code:"SGICB",bin:"970400"},{code:"BAB",bin:"970409"},{code:"PVCB",bin:"970412"},{code:"Oceanbank",bin:"970414"},{code:"NCB",bin:"970419"},{code:"SHBVN",bin:"970424"},{code:"ABB",bin:"970425"},{code:"VAB",bin:"970427"},{code:"NAB",bin:"970428"},{code:"PGB",bin:"970430"},{code:"VIETBANK",bin:"970433"},{code:"BVB",bin:"970438"},{code:"SEAB",bin:"970440"},{code:"COOPBANK",bin:"970446"},{code:"LPB",bin:"970449"},{code:"KLB",bin:"970452"},{code:"KBank",bin:"668888"},{code:"KBHN",bin:"970462"},{code:"KEBHANAHCM",bin:"970466"},{code:"KEBHANAHN",bin:"970467"},{code:"MAFC",bin:"977777"},{code:"CITIBANK",bin:"533948"},{code:"KBHCM",bin:"970463"},{code:"VBSP",bin:"999888"},{code:"WVN",bin:"970457"},{code:"VRB",bin:"970421"},{code:"UOB",bin:"970458"},{code:"SCVN",bin:"970410"},{code:"PBVN",bin:"970439"},{code:"NHBHN",bin:"801011"},{code:"IVB",bin:"970434"},{code:"IBK-HCM",bin:"970456"},{code:"IBK-HN",bin:"970455"},{code:"HSBC",bin:"458761"},{code:"HLBVN",bin:"970442"},{code:"GPB",bin:"970408"},{code:"DOB",bin:"970406"},{code:"DBS",bin:"796500"},{code:"CIMB",bin:"422589"},{code:"CBB",bin:"970444"}];cm.forEach(e=>{e.code=e.code.replace(/\s/g,"")});const Fh=Tg("pay",{state:()=>({orderInfo:{amount:"",identifier:"",merchantOrderNo:"",payTypeCategory:"",payeeAccount:"",payeeName:"",payeeQrCode:"",qrCodeType:"",paymentBank:"",paymentProduct:"",status:"",createTime:"",currentTime:"",isExternalChannel:""}}),getters:{rushOrderingState(){return["WAIT_GRAB"].includes(this.orderInfo.status)},waitPayingState(){return["WAIT_PAY"].includes(this.orderInfo.status)},timeoutState(){return["LOCAL_TIMEOUT"].includes(this.orderInfo.status)},successState(){return["SUCCESS","COMPLETE"].includes(this.orderInfo.status)},getPayeeQrCode(){var l;const{paymentBank:e,payeeAccount:t,amount:n,identifier:r,payeeQrCode:o,qrCodeType:c}=this.orderInfo;return this.isExternalChannel?o:this.isBankPayType&&c==="URL"?`https://img.vietqr.io/image/${(l=cm.find(d=>d.code===e))==null?void 0:l.bin}-${t}-qr_only.png?amount=${n}&addInfo=${r}`:o},isExternalChannel(){return this.orderInfo.isExternalChannel==="YES"},isBankPayType(){return this.orderInfo.payTypeCategory==="BANK"}},actions:{changeState(e){this.orderInfo.status=e},getOrderInfo(e){return vR(e).then(t=>{if(t.code===ER){const n=t.data||{};return n.qrCodeType==="URL"&&(n.payeeQrCode=XO(n.payeeQrCode)),this.orderInfo=n,n}else this.changeState()}).catch(t=>{})}}});var bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function CR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var um={exports:{}};/*@license Copyright 2015-2022 Ably Real-time Ltd (ably.com)

Ably JavaScript Library v2.6.3
https://github.com/ably/ably-js

Released under the Apache Licence v2.0*/(function(e,t){(function(n,r){e.exports=r()})(bn,()=>{var n={},r={exports:n},o=Object.defineProperty,c=Object.defineProperties,l=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,b=(s,i,a)=>i in s?o(s,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[i]=a,w=(s,i)=>{for(var a in i||(i={}))y.call(i,a)&&b(s,a,i[a]);if(g)for(var a of g(i))_.call(i,a)&&b(s,a,i[a]);return s},R=(s,i)=>c(s,f(i)),N=(s,i)=>{var a={};for(var u in s)y.call(s,u)&&i.indexOf(u)<0&&(a[u]=s[u]);if(s!=null&&g)for(var u of g(s))i.indexOf(u)<0&&_.call(s,u)&&(a[u]=s[u]);return a},F=(s,i)=>{for(var a in i)o(s,a,{get:i[a],enumerable:!0})},U=(s,i,a,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let h of d(i))!y.call(s,h)&&h!==a&&o(s,h,{get:()=>i[h],enumerable:!(u=l(i,h))||u.enumerable});return s},q=s=>U(o({},"__esModule",{value:!0}),s),x={};F(x,{ErrorInfo:()=>E,Realtime:()=>Jo,Rest:()=>Fo,default:()=>z_,msgpack:()=>ra,protocolMessageFromDeserialized:()=>Iy}),r.exports=q(x);var C=class{},$=typeof bn<"u"?bn:typeof window<"u"?window:self;function B(s,i){return`${s}`.padStart(i?3:2,"0")}function K(s){return C.Config.logTimestamps?function(i){const a=new Date;s(B(a.getHours())+":"+B(a.getMinutes())+":"+B(a.getSeconds())+"."+B(a.getMilliseconds(),1)+" "+i)}:function(i){s(i)}}var Y=()=>{var s;let i,a;return typeof((s=$==null?void 0:$.console)==null?void 0:s.log)=="function"?(i=function(...u){},a=console.warn?function(...u){}:i):i=a=function(){},[i,a].map(K)},D=class kr{constructor(){this.deprecated=(i,a)=>{this.deprecationWarning(`${i} is deprecated and will be removed in a future version. ${a}`)},this.shouldLog=i=>i<=this.logLevel,this.setLog=(i,a)=>{i!==void 0&&(this.logLevel=i),a!==void 0&&(this.logHandler=this.logErrorHandler=a)},this.logLevel=kr.defaultLogLevel,this.logHandler=kr.defaultLogHandler,this.logErrorHandler=kr.defaultLogErrorHandler}static initLogHandlers(){const[i,a]=Y();this.defaultLogHandler=i,this.defaultLogErrorHandler=a,this.defaultLogger=new kr}static logActionNoStrip(i,a,u,h){i.logAction(a,u,h)}logAction(i,a,u){this.shouldLog(i)&&(i===1?this.logErrorHandler:this.logHandler)("Ably: "+a+": "+u,i)}renamedClientOption(i,a){this.deprecationWarning(`The \`${i}\` client option has been renamed to \`${a}\`. Please update your code to use \`${a}\` instead. \`${i}\` will be removed in a future version.`)}renamedMethod(i,a,u){this.deprecationWarning(`\`${i}\`’s \`${a}\` method has been renamed to \`${u}\`. Please update your code to use \`${u}\` instead. \`${a}\` will be removed in a future version.`)}deprecationWarning(i){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${i}`,1)}};D.defaultLogLevel=1,D.LOG_NONE=0,D.LOG_ERROR=1,D.LOG_MAJOR=2,D.LOG_MINOR=3,D.LOG_MICRO=4,D.logAction=(s,i,a,u)=>{D.logActionNoStrip(s,i,a,u)};var le=D,p=le,v={};F(v,{Format:()=>ee,allSame:()=>re,allToLowerCase:()=>at,allToUpperCase:()=>ot,arrChooseN:()=>Z,arrDeleteValue:()=>xe,arrEquals:()=>ul,arrIntersect:()=>ge,arrIntersectOb:()=>fe,arrPopRandomElement:()=>ue,arrSubtract:()=>be,arrWithoutValue:()=>k,cheapRandStr:()=>oe,containsValue:()=>it,copy:()=>X,createMissingPluginError:()=>di,dataSizeBytes:()=>he,decodeBody:()=>Se,encodeBody:()=>De,ensureArray:()=>_e,forInOwnNonNullProperties:()=>z,getBackoffCoefficient:()=>hn,getGlobalObject:()=>xt,getJitterCoefficient:()=>Rs,getRetryTime:()=>pt,inherits:()=>Vt,inspectBody:()=>Q,inspectError:()=>H,intersect:()=>te,isEmpty:()=>qe,isErrorInfoOrPartialErrorInfo:()=>T,isNil:()=>Me,isObject:()=>Ne,keysArray:()=>M,matchDerivedChannel:()=>ll,mixin:()=>j,parseQueryString:()=>S,prototypicalClone:()=>_t,randomString:()=>V,shallowClone:()=>Nt,shallowEquals:()=>cr,throwMissingPluginError:()=>Gt,toBase64:()=>hi,toQueryString:()=>ce,valuesArray:()=>A,whenPromiseSettles:()=>me,withTimeoutAsync:()=>fl});function I(s){let i="["+s.constructor.name;return s.message&&(i+=": "+s.message),s.statusCode&&(i+="; statusCode="+s.statusCode),s.code&&(i+="; code="+s.code),s.cause&&(i+="; cause="+H(s.cause)),s.href&&!(s.message&&s.message.indexOf("help.ably.io")>-1)&&(i+="; see "+s.href+" "),i+="]",i}var E=class gc extends Error{constructor(i,a,u,h){super(i),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,gc.prototype),this.code=a,this.statusCode=u,this.cause=h}toString(){return I(this)}static fromValues(i){const{message:a,code:u,statusCode:h}=i;if(typeof a!="string"||typeof u!="number"||typeof h!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+C.Config.inspect(i));const m=Object.assign(new gc(a,u,h),i);return m.code&&!m.href&&(m.href="https://help.ably.io/error/"+m.code),m}},P=class pc extends Error{constructor(i,a,u,h){super(i),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,pc.prototype),this.code=a,this.statusCode=u,this.cause=h}toString(){return I(this)}static fromValues(i){const{message:a,code:u,statusCode:h}=i;if(typeof a!="string"||!Me(u)&&typeof u!="number"||!Me(h)&&typeof h!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+C.Config.inspect(i));const m=Object.assign(new pc(a,u,h),i);return m.code&&!m.href&&(m.href="https://help.ably.io/error/"+m.code),m}};function ae(s){return Math.floor(Math.random()*s.length)}function j(s,...i){for(let a=0;a<i.length;a++){const u=i[a];if(!u)break;for(const h in u)Object.prototype.hasOwnProperty.call(u,h)&&(s[h]=u[h])}return s}function X(s){return j({},s)}function _e(s){return Me(s)?[]:Array.isArray(s)?s:[s]}function Ne(s){return Object.prototype.toString.call(s)=="[object Object]"}function qe(s){for(const i in s)return!1;return!0}function Me(s){return s==null}function Nt(s){const i=new Object;for(const a in s)i[a]=s[a];return i}function _t(s,i){class a{}a.prototype=s;const u=new a;return i&&j(u,i),u}var Vt=function(s,i){if(C.Config.inherits){C.Config.inherits(s,i);return}s.super_=i,s.prototype=_t(i.prototype,{constructor:s})};function it(s,i){for(const a in s)if(s[a]==i)return!0;return!1}function te(s,i){return Array.isArray(i)?ge(s,i):fe(s,i)}function ge(s,i){const a=[];for(let u=0;u<s.length;u++){const h=s[u];i.indexOf(h)!=-1&&a.push(h)}return a}function fe(s,i){const a=[];for(let u=0;u<s.length;u++){const h=s[u];h in i&&a.push(h)}return a}function be(s,i){const a=[];for(let u=0;u<s.length;u++){const h=s[u];i.indexOf(h)==-1&&a.push(h)}return a}function xe(s,i){const a=s.indexOf(i),u=a!=-1;return u&&s.splice(a,1),u}function k(s,i){const a=s.slice();return xe(a,i),a}function M(s,i){const a=[];for(const u in s)i&&!Object.prototype.hasOwnProperty.call(s,u)||a.push(u);return a}function A(s,i){const a=[];for(const u in s)i&&!Object.prototype.hasOwnProperty.call(s,u)||a.push(s[u]);return a}function z(s,i){for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&i(a)}function re(s,i){if(s.length===0)return!0;const a=s[0][i];return s.every(function(u){return u[i]===a})}var ee=(s=>(s.msgpack="msgpack",s.json="json",s))(ee||{});function ue(s){return s.splice(ae(s),1)[0]}function ce(s){const i=[];if(s)for(const a in s)i.push(encodeURIComponent(a)+"="+encodeURIComponent(s[a]));return i.length?"?"+i.join("&"):""}function S(s){let i;const a=/([^?&=]+)=?([^&]*)/g,u={};for(;i=a.exec(s);)u[decodeURIComponent(i[1])]=decodeURIComponent(i[2]);return u}function T(s){return typeof s=="object"&&s!==null&&(s instanceof E||s instanceof P)}function H(s){var i,a;return s instanceof Error||((i=s==null?void 0:s.constructor)==null?void 0:i.name)==="ErrorInfo"||((a=s==null?void 0:s.constructor)==null?void 0:a.name)==="PartialErrorInfo"?s.toString():C.Config.inspect(s)}function Q(s){return C.BufferUtils.isBuffer(s)?s.toString():typeof s=="string"?s:C.Config.inspect(s)}function he(s){if(C.BufferUtils.isBuffer(s))return C.BufferUtils.byteLength(s);if(typeof s=="string")return C.Config.stringByteSize(s);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof s)}function oe(){return String(Math.random()).substr(2)}var V=async s=>{const i=await C.Config.getRandomArrayBuffer(s);return C.BufferUtils.base64Encode(i)};function Z(s,i){const a=Math.min(i,s.length),u=s.slice(),h=[];for(let m=0;m<a;m++)h.push(ue(u));return h}function me(s,i){s.then(a=>{i==null||i(null,a)}).catch(a=>{i==null||i(a)})}function Se(s,i,a){return a=="msgpack"?(i||Gt("MsgPack"),i.decode(s)):JSON.parse(String(s))}function De(s,i,a){return a=="msgpack"?(i||Gt("MsgPack"),i.encode(s,!0)):JSON.stringify(s)}function at(s){return s.map(function(i){return i&&i.toLowerCase()})}function ot(s){return s.map(function(i){return i&&i.toUpperCase()})}function hn(s){return Math.min((s+2)/3,2)}function Rs(){return 1-Math.random()*.2}function pt(s,i){return s*hn(i)*Rs()}function xt(){return typeof bn<"u"?bn:typeof window<"u"?window:self}function cr(s,i){return Object.keys(s).every(a=>s[a]===i[a])&&Object.keys(i).every(a=>i[a]===s[a])}function ll(s){const i=/^(\[([^?]*)(?:(.*))\])?(.+)$/,a=s.match(i);if(!a||!a.length||a.length<5)throw new E("regex match failed",400,40010);if(a[2])throw new E(`cannot use a derived option with a ${a[2]} channel`,400,40010);return{qualifierParam:a[3]||"",channelName:a[4]}}function hi(s){const i=C.BufferUtils,a=i.utf8Encode(s);return i.base64Encode(a)}function ul(s,i){return s.length===i.length&&s.every(function(a,u){return a===i[u]})}function di(s){return new E(`${s} plugin not provided`,40019,400)}function Gt(s){throw di(s)}async function fl(s,i=5e3,a="Timeout expired"){const u=new E(a,5e4,500);return Promise.race([s,new Promise((h,m)=>setTimeout(()=>m(u),i))])}var hl="2.6.3",bm="ably-js/"+hl,bt={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:hl,protocolVersion:3,agent:bm,getHost:dl,getPort:vm,getHttpScheme:Em,environmentFallbackHosts:gl,getFallbackHosts:pl,getHosts:Cm,checkHost:ml,objectifyOptions:Sm,normaliseOptions:Tm,defaultGetHeaders:Rm,defaultPostHeaders:Am};function dl(s,i,a){return a?i=i==s.restHost&&s.realtimeHost||i||s.realtimeHost:i=i||s.restHost,i}function vm(s,i){return i||s.tls?s.tlsPort:s.port}function Em(s){return s.tls?"https://":"http://"}function gl(s){return[s+"-a-fallback.ably-realtime.com",s+"-b-fallback.ably-realtime.com",s+"-c-fallback.ably-realtime.com",s+"-d-fallback.ably-realtime.com",s+"-e-fallback.ably-realtime.com"]}function pl(s){const i=s.fallbackHosts,a=typeof s.httpMaxRetryCount<"u"?s.httpMaxRetryCount:bt.httpMaxRetryCount;return i?Z(i,a):[]}function Cm(s,i){const a=[s.restHost].concat(pl(s));return i?a.map(u=>dl(s,u,!0)):a}function ml(s){if(typeof s!="string")throw new E("host must be a string; was a "+typeof s,4e4,400);if(!s.length)throw new E("host must not be zero-length",4e4,400)}function Om(s,i,a,u){return s.realtimeHost?s.realtimeHost:s.restHost?(p.logAction(u,p.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+s.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+s.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),s.restHost):i?bt.REALTIME_HOST:a+"-"+bt.REALTIME_HOST}function wm(s){const i={};for(const a in bt.TIMEOUTS)i[a]=s[a]||bt.TIMEOUTS[a];return i}function Po(s){let i=bt.agent;if(s.agents)for(var a in s.agents)i+=" "+a+"/"+s.agents[a];return i}function Sm(s,i,a,u,h){if(s===void 0){const O=i?`${a} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${a} must be initialized with a client options object`;throw p.logAction(u,p.LOG_ERROR,`${a}()`,O),new Error(O)}let m;if(typeof s=="string")if(s.indexOf(":")==-1){if(!i){const O=`${a} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the object’s \`token\` property.)`;throw p.logAction(u,p.LOG_ERROR,`${a}()`,O),new Error(O)}m={token:s}}else{if(!i){const O=`${a} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the object’s \`key\` property.)`;throw p.logAction(u,p.LOG_ERROR,`${a}()`,O),new Error(O)}m={key:s}}else m=s;return h&&(m=R(w({},m),{plugins:w(w({},h),m.plugins)})),m}function Tm(s,i,a){const u=a??p.defaultLogger;typeof s.recover=="function"&&s.closeOnUnload===!0&&(p.logAction(u,p.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),s.recover=void 0),"closeOnUnload"in s||(s.closeOnUnload=!s.recover),"queueMessages"in s||(s.queueMessages=!0);const h=s.environment&&String(s.environment).toLowerCase()||bt.ENVIRONMENT,m=!h||h==="production";!s.fallbackHosts&&!s.restHost&&!s.realtimeHost&&!s.port&&!s.tlsPort&&(s.fallbackHosts=m?bt.FALLBACK_HOSTS:gl(h));const O=s.restHost||(m?bt.REST_HOST:h+"-"+bt.REST_HOST),L=Om(s,m,h,u);(s.fallbackHosts||[]).concat(O,L).forEach(ml),s.port=s.port||bt.PORT,s.tlsPort=s.tlsPort||bt.TLS_PORT,"tls"in s||(s.tls=!0);const W=wm(s);i?"useBinaryProtocol"in s?s.useBinaryProtocol=C.Config.supportsBinary&&s.useBinaryProtocol:s.useBinaryProtocol=C.Config.preferBinary:s.useBinaryProtocol=!1;const G={};s.clientId&&(G["X-Ably-ClientId"]=C.BufferUtils.base64Encode(C.BufferUtils.utf8Encode(s.clientId))),"idempotentRestPublishing"in s||(s.idempotentRestPublishing=!0);let ne=null,se=s.connectivityCheckUrl;if(s.connectivityCheckUrl){let[ie,Ee]=s.connectivityCheckUrl.split("?");ne=Ee?S(Ee):{},ie.indexOf("://")===-1&&(ie="https://"+ie),se=ie}let de=s.wsConnectivityCheckUrl;return de&&de.indexOf("://")===-1&&(de="wss://"+de),R(w({},s),{realtimeHost:L,restHost:O,maxMessageSize:s.maxMessageSize||bt.maxMessageSize,timeouts:W,connectivityCheckParams:ne,connectivityCheckUrl:se,wsConnectivityCheckUrl:de,headers:G})}function gi(s,i,a){const u=a||{};if(u.cipher){s||Gt("Crypto");const h=s.getCipher(u.cipher,i);u.cipher=h.cipherParams,u.channelCipher=h.cipher}else"cipher"in u&&(u.cipher=void 0,u.channelCipher=null);return u}var yl={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},pi={format:"json",protocolVersion:bt.protocolVersion};function Rm(s,{format:i=pi.format,protocolVersion:a=pi.protocolVersion}={}){return{accept:yl[i],"X-Ably-Version":a.toString(),"Ably-Agent":Po(s)}}function Am(s,{format:i=pi.format,protocolVersion:a=pi.protocolVersion}={}){let u;return{accept:u=yl[i],"content-type":u,"X-Ably-Version":a.toString(),"Ably-Agent":Po(s)}}var Te=bt;function Im(s){return Object.assign(bt,s)}var Pm=class fm{constructor(i,a){this.logger=i,this.members=a||[]}call(i,a){for(const u of this.members)if(u)try{u(i,a)}catch(h){p.logAction(this.logger,p.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+h+"; stack = "+h.stack)}}push(...i){this.members.push(...i)}createPromise(){return new Promise((i,a)=>{this.push((u,h)=>{u?a(u):i(h)})})}resolveAll(i){this.call(null,i)}rejectAll(i){this.call(i)}static create(i,a){const u=new fm(i,a);return Object.assign((h,m)=>u.call(h,m),{push:h=>u.push(h),createPromise:()=>u.createPromise(),resolveAll:h=>u.resolveAll(h),rejectAll:h=>u.rejectAll(h)})}},ko=Pm,_l=(s=>(s.Get="get",s.Delete="delete",s.Post="post",s.Put="put",s.Patch="patch",s))(_l||{}),tt=_l,bl=(s=>(s[s.Success=200]="Success",s[s.NoContent=204]="NoContent",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.Forbidden=403]="Forbidden",s[s.RequestTimeout=408]="RequestTimeout",s[s.InternalServerError=500]="InternalServerError",s))(bl||{});function km(s){return s>=200&&s<400}var mi=bl,Lo=Math.pow(2,17);function Lm(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function Mm(s){return!!s.connection}function vl(s){return T(s)?(s.code||(s.statusCode===403?s.code=40300:(s.code=40170,s.statusCode=401)),s):new E(H(s),s.code||40170,s.statusCode||401)}var Nm=(s,i)=>{const a=C.BufferUtils,u=a.utf8Encode(s),h=a.utf8Encode(i),m=a.hmacSha256(u,h);return a.base64Encode(m)};function El(s){if(!s)return"";typeof s=="string"&&(s=JSON.parse(s));const i=Object.create(null),a=M(s,!0);if(!a)return"";a.sort();for(let u=0;u<a.length;u++)i[a[u]]=s[a[u]].sort();return JSON.stringify(i)}function Cl(s,i){if(s.authCallback)p.logAction(i,p.LOG_MINOR,"Auth()","using token auth with authCallback");else if(s.authUrl)p.logAction(i,p.LOG_MINOR,"Auth()","using token auth with authUrl");else if(s.key)p.logAction(i,p.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(s.tokenDetails)p.logAction(i,p.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const a="authOptions must include valid authentication parameters";throw p.logAction(i,p.LOG_ERROR,"Auth()",a),new Error(a)}}function xm(s){return"useTokenAuth"in s&&!s.useTokenAuth}function Ol(s){return s.useTokenAuth||!xm(s)&&(s.authCallback||s.authUrl||s.token||s.tokenDetails)}function Dm(s){return!s.key&&!s.authCallback&&!s.authUrl}var Fm=0;function Um(){return Fm++}var Bm=class{constructor(s,i){if(this.authOptions={},this.client=s,this.tokenParams=i.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,Ol(i))Dm(i)&&p.logAction(this.logger,p.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(i.defaultTokenParams,i),Cl(this.authOptions,this.logger);else{if(!i.key){const a="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw p.logAction(this.logger,p.LOG_ERROR,"Auth()",a),new E(a,40160,401)}p.logAction(this.logger,p.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(i)}}get logger(){return this.client.logger}async authorize(s,i){if(i&&i.key&&this.authOptions.key!==i.key)throw new E("Unable to update auth options with incompatible key",40102,401);try{let a=await this._forceNewToken(s??null,i??null);return Mm(this.client)?new Promise((u,h)=>{this.client.connection.connectionManager.onAuthUpdated(a,(m,O)=>m?h(m):u(O))}):a}catch(a){throw this.client.connection&&a.statusCode===mi.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(a),a}}async _forceNewToken(s,i){this.tokenDetails=null,this._saveTokenOptions(s,i),Cl(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(s,i){const a=i||this.authOptions,u=s||X(this.tokenParams);let h,m=this.client;if(a.authCallback)p.logAction(this.logger,p.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),h=a.authCallback;else if(a.authUrl)p.logAction(this.logger,p.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),h=(L,W)=>{const G=j({accept:"application/json, text/plain"},a.authHeaders),ne=a.authMethod&&a.authMethod.toLowerCase()==="post";let se;const de=a.authUrl.indexOf("?");de>-1&&(se=S(a.authUrl.slice(de)),a.authUrl=a.authUrl.slice(0,de),ne||(a.authParams=j(se,a.authParams)));const ie=j({},a.authParams||{},L),Ee=ye=>{var Oe,Ue;let We=(Oe=ye.body)!=null?Oe:null,Je=null;if(ye.error)p.logAction(this.logger,p.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+H(ye.error));else{const Et=(Ue=ye.headers["content-type"])!=null?Ue:null;Array.isArray(Et)?Je=Et.join(", "):Je=Et,p.logAction(this.logger,p.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+Je+"; body: "+Q(We))}if(ye.error){W(ye.error,null);return}if(ye.unpacked){W(null,We);return}if(C.BufferUtils.isBuffer(We)&&(We=We.toString()),!Je){W(new E("authUrl response is missing a content-type header",40170,401),null);return}const Re=Je.indexOf("application/json")>-1,jt=Je.indexOf("text/plain")>-1||Je.indexOf("application/jwt")>-1;if(!Re&&!jt){W(new E("authUrl responded with unacceptable content-type "+Je+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(Re){if(We.length>Lo){W(new E("authUrl response exceeded max permitted length",40170,401),null);return}try{We=JSON.parse(We)}catch(Et){W(new E("Unexpected error processing authURL response; err = "+Et.message,40170,401),null);return}}W(null,We,Je)};if(p.logAction(this.logger,p.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+a.authUrl+"; Params: "+JSON.stringify(ie)+"; method: "+(ne?"POST":"GET")),ne){const ye=G||{};ye["content-type"]="application/x-www-form-urlencoded";const Oe=ce(ie).slice(1);me(this.client.http.doUri(tt.Post,a.authUrl,ye,Oe,se),(Ue,We)=>Ee(Ue||We))}else me(this.client.http.doUri(tt.Get,a.authUrl,G||{},null,ie),(ye,Oe)=>Ee(ye||Oe))};else if(a.key)p.logAction(this.logger,p.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),h=(L,W)=>{me(this.createTokenRequest(L,a),(G,ne)=>W(G,ne??null))};else{const L="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw p.logAction(this.logger,p.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new E(L,40171,403)}"capability"in u&&(u.capability=El(u.capability));const O=(L,W)=>{const G=L.keyName,ne="/keys/"+G+"/requestToken",se=function(ie){return m.baseUri(ie)+ne},de=Te.defaultPostHeaders(this.client.options);a.requestHeaders&&j(de,a.requestHeaders),p.logAction(this.logger,p.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+ne+"; Token params: "+JSON.stringify(L)),me(this.client.http.do(tt.Post,se,de,JSON.stringify(L),null),(ie,Ee)=>ie?W(ie):W(Ee.error,Ee.body,Ee.unpacked))};return new Promise((L,W)=>{let G=!1,ne=this.client.options.timeouts.realtimeRequestTimeout,se=setTimeout(()=>{G=!0;const de="Token request callback timed out after "+ne/1e3+" seconds";p.logAction(this.logger,p.LOG_ERROR,"Auth.requestToken()",de),W(new E(de,40170,401))},ne);h(u,(de,ie,Ee)=>{if(G)return;if(clearTimeout(se),de){p.logAction(this.logger,p.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+H(de)),W(vl(de));return}if(typeof ie=="string"){ie.length===0?W(new E("Token string is empty",40170,401)):ie.length>Lo?W(new E("Token string exceeded max permitted length (was "+ie.length+" bytes)",40170,401)):ie==="undefined"||ie==="null"?W(new E("Token string was literal null/undefined",40170,401)):ie[0]==="{"&&!(Ee&&Ee.indexOf("application/jwt")>-1)?W(new E("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):L({token:ie});return}if(typeof ie!="object"||ie===null){const Oe="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof ie;p.logAction(this.logger,p.LOG_ERROR,"Auth.requestToken()",Oe),W(new E(Oe,40170,401));return}const ye=JSON.stringify(ie).length;if(ye>Lo&&!a.suppressMaxLengthCheck){W(new E("Token request/details object exceeded max permitted stringified size (was "+ye+" bytes)",40170,401));return}if("issued"in ie){L(ie);return}if(!("keyName"in ie)){const Oe="Expected token request callback to call back with a token string, token request object, or token details object";p.logAction(this.logger,p.LOG_ERROR,"Auth.requestToken()",Oe),W(new E(Oe,40170,401));return}O(ie,(Oe,Ue,We)=>{if(Oe){p.logAction(this.logger,p.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+H(Oe)),W(vl(Oe));return}We||(Ue=JSON.parse(Ue)),p.logAction(this.logger,p.LOG_MINOR,"Auth.getToken()","token received"),L(Ue)})})})}async createTokenRequest(s,i){i=i||this.authOptions,s=s||X(this.tokenParams);const a=i.key;if(!a)throw new E("No key specified",40101,403);const u=a.split(":"),h=u[0],m=u[1];if(!m)throw new E("Invalid key specified",40101,403);if(s.clientId==="")throw new E("clientId can’t be an empty string",40012,400);"capability"in s&&(s.capability=El(s.capability));const O=j({keyName:h},s),L=s.clientId||"",W=s.ttl||"",G=s.capability||"";O.timestamp||(O.timestamp=await this.getTimestamp(i&&i.queryTime));const ne=O.nonce||(O.nonce=Lm()),se=O.timestamp,de=O.keyName+`
`+W+`
`+G+`
`+L+`
`+se+`
`+ne+`
`;return O.mac=O.mac||Nm(de,m),p.logAction(this.logger,p.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),O}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let s=await this._ensureValidAuthCredentials(!1);if(!s)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:s.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const s=await this._ensureValidAuthCredentials(!1);if(!s)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+hi(s.token)}}}async getTimestamp(s){return!this.isTimeOffsetSet()&&(s||this.authOptions.queryTime)?this.client.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.client.serverTimeOffset||0)}isTimeOffsetSet(){return this.client.serverTimeOffset!==null}_saveBasicOptions(s){this.method="basic",this.key=s.key,this.basicKey=hi(s.key),this.authOptions=s||{},"clientId"in s&&this._userSetClientId(s.clientId)}_saveTokenOptions(s,i){this.method="token",s&&(this.tokenParams=s),i&&(i.token&&(i.tokenDetails=typeof i.token=="string"?{token:i.token}:i.token),i.tokenDetails&&(this.tokenDetails=i.tokenDetails),"clientId"in i&&this._userSetClientId(i.clientId),this.authOptions=i)}async _ensureValidAuthCredentials(s){const i=this.tokenDetails;if(i){if(this._tokenClientIdMismatch(i.clientId))throw new E("Mismatch between clientId in token ("+i.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.isTimeOffsetSet()||!i.expires||i.expires>=this.getTimestampUsingOffset())return p.logAction(this.logger,p.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+i.expires),i;p.logAction(this.logger,p.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const a=(this.waitingForTokenRequest||(this.waitingForTokenRequest=ko.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!s)return a;const u=this.currentTokenRequestId=Um();let h,m=null;try{h=await this.requestToken(this.tokenParams,this.authOptions)}catch(L){m=L}if(this.currentTokenRequestId>u)return p.logAction(this.logger,p.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),a;this.currentTokenRequestId=null;const O=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,m?(O==null||O.rejectAll(m),a):(O==null||O.resolveAll(this.tokenDetails=h),a)}_userSetClientId(s){if(typeof s=="string"||s===null){if(s==="*")throw new E('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const i=this._uncheckedSetClientId(s);if(i)throw i}}else throw new E("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(s){if(this._tokenClientIdMismatch(s)){const i="Unexpected clientId mismatch: client has "+this.clientId+", requested "+s,a=new E(i,40102,401);return p.logAction(this.logger,p.LOG_ERROR,"Auth._uncheckedSetClientId()",i),a}else return this.clientId=this.tokenParams.clientId=s,null}_tokenClientIdMismatch(s){return!!(this.clientId&&this.clientId!=="*"&&s&&s!=="*"&&this.clientId!==s)}static isTokenErr(s){return s.code&&s.code>=40140&&s.code<40150}revokeTokens(s,i){return this.client.rest.revokeTokens(s,i)}},Sn=Bm;function Mo(s){const i=[];if(s)for(const a in s)i.push(a+"="+s[a]);return i.join("&")}function As(s,i){return s+(i?"?":"")+Mo(i)}function Hm(s,i,a,u,h){s.error?p.logActionNoStrip(h,p.LOG_MICRO,"Http."+i+"()","Received Error; "+As(a,u)+"; Error: "+H(s.error)):p.logActionNoStrip(h,p.LOG_MICRO,"Http."+i+"()","Received; "+As(a,u)+"; Headers: "+Mo(s.headers)+"; StatusCode: "+s.statusCode+"; Body"+(C.BufferUtils.isBuffer(s.body)?" (Base64): "+C.BufferUtils.base64Encode(s.body):": "+s.body))}function Gm(s,i,a,u,h){h.shouldLog(p.LOG_MICRO)&&p.logActionNoStrip(h,p.LOG_MICRO,"Http."+s+"()","Sending; "+As(i,u)+"; Body"+(C.BufferUtils.isBuffer(a)?" (Base64): "+C.BufferUtils.base64Encode(a):": "+a))}var No=class{constructor(s){this.client=s,this.platformHttp=new C.Http(s),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var s,i;return(i=(s=this.client)==null?void 0:s.logger)!=null?i:p.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(s){const i=s.connection,a=i&&i.connectionManager.host;return a?[a].concat(Te.getFallbackHosts(s.options)):Te.getHosts(s.options)}async do(s,i,a,u,h){try{const m=this.client;if(!m)return{error:new E("http.do called without client",5e4,500)};const O=typeof i=="function"?i:function(se){return m.baseUri(se)+i},L=m._currentFallback;if(L)if(L.validUntil>Date.now()){const se=await this.doUri(s,O(L.host),a,u,h);return se.error&&this.platformHttp.shouldFallback(se.error)?(m._currentFallback=null,this.do(s,i,a,u,h)):se}else m._currentFallback=null;const W=this._getHosts(m);if(W.length===1)return this.doUri(s,O(W[0]),a,u,h);let G=null;const ne=async(se,de)=>{const ie=se.shift();G=G??new Date;const Ee=await this.doUri(s,O(ie),a,u,h);return Ee.error&&this.platformHttp.shouldFallback(Ee.error)&&se.length?Date.now()-G.getTime()>m.options.timeouts.httpMaxRetryDuration?{error:new E(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${m.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:ne(se,!0):(de&&(m._currentFallback={host:ie,validUntil:Date.now()+m.options.timeouts.fallbackRetryTimeout}),Ee)};return ne(W)}catch(m){return{error:new E(`Unexpected error in Http.do: ${H(m)}`,500,5e4)}}}async doUri(s,i,a,u,h){try{Gm(s,i,u,h,this.logger);const m=await this.platformHttp.doUri(s,i,a,u,h);return this.logger.shouldLog(p.LOG_MICRO)&&Hm(m,s,i,h,this.logger),m}catch(m){return{error:new E(`Unexpected error in Http.doUri: ${H(m)}`,500,5e4)}}}},wl=class{constructor(s){this.Platform=C,this.ErrorInfo=E,this.Logger=p,this.Defaults=Te,this.Utils=v;var i,a,u,h,m,O,L,W;this._additionalHTTPRequestImplementations=(i=s.plugins)!=null?i:null,this.logger=new p,this.logger.setLog(s.logLevel,s.logHandler),p.logAction(this.logger,p.LOG_MICRO,"BaseClient()","initialized with clientOptions "+C.Config.inspect(s)),this._MsgPack=(u=(a=s.plugins)==null?void 0:a.MsgPack)!=null?u:null;const G=this.options=Te.normaliseOptions(s,this._MsgPack,this.logger);if(G.key){const ne=G.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!ne){const se="invalid key parameter";throw p.logAction(this.logger,p.LOG_ERROR,"BaseClient()",se),new E(se,40400,404)}G.keyName=ne[1],G.keySecret=ne[2]}if("clientId"in G)if(typeof G.clientId=="string"||G.clientId===null){if(G.clientId==="*")throw new E('Can’t use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new E("clientId must be either a string or null",40012,400);p.logAction(this.logger,p.LOG_MINOR,"BaseClient()","started; version = "+Te.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new No(this),this.auth=new Sn(this,G),this._rest=(h=s.plugins)!=null&&h.Rest?new s.plugins.Rest(this):null,this._Crypto=(O=(m=s.plugins)==null?void 0:m.Crypto)!=null?O:null,this.__FilteredSubscriptions=(W=(L=s.plugins)==null?void 0:L.MessageInteractions)!=null?W:null}get rest(){return this._rest||Gt("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||Gt("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}get device(){var s;return(!((s=this.options.plugins)!=null&&s.Push)||!this.push.LocalDevice)&&Gt("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(s){return Te.getHttpScheme(this.options)+s+":"+Te.getPort(this.options,!1)}async stats(s){return this.rest.stats(s)}async time(s){return this.rest.time(s)}async request(s,i,a,u,h,m){return this.rest.request(s,i,a,u,h,m)}batchPublish(s){return this.rest.batchPublish(s)}batchPresence(s){return this.rest.batchPresence(s)}setLog(s){this.logger.setLog(s.level,s.handler)}};wl.Platform=C;var Sl=wl,jm=class js{toJSON(){var i,a,u;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(i=this.push)==null?void 0:i.recipient,state:(a=this.push)==null?void 0:a.state,error:(u=this.push)==null?void 0:u.error}}}toString(){var i,a,u,h;let m="[DeviceDetails";return this.id&&(m+="; id="+this.id),this.platform&&(m+="; platform="+this.platform),this.formFactor&&(m+="; formFactor="+this.formFactor),this.clientId&&(m+="; clientId="+this.clientId),this.metadata&&(m+="; metadata="+this.metadata),this.deviceIdentityToken&&(m+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(i=this.push)!=null&&i.recipient&&(m+="; push.recipient="+JSON.stringify(this.push.recipient)),(a=this.push)!=null&&a.state&&(m+="; push.state="+this.push.state),(u=this.push)!=null&&u.error&&(m+="; push.error="+JSON.stringify(this.push.error)),(h=this.push)!=null&&h.metadata&&(m+="; push.metadata="+this.push.metadata),m+="]",m}static toRequestBody(i,a,u){return De(i,a,u)}static fromResponseBody(i,a,u){return u&&(i=Se(i,a,u)),Array.isArray(i)?js.fromValuesArray(i):js.fromValues(i)}static fromValues(i){return i.error=i.error&&E.fromValues(i.error),Object.assign(new js,i)}static fromLocalDevice(i){return Object.assign(new js,i)}static fromValuesArray(i){const a=i.length,u=new Array(a);for(let h=0;h<a;h++)u[h]=js.fromValues(i[h]);return u}},Is=jm;async function Tl(s,i,a,u){if(s.http.supportsAuthHeaders){const h=await s.auth.getAuthHeaders();return u(j(h,i),a)}else{const h=await s.auth.getAuthParams();return u(i,j(h,a))}}function $m(s,i,a){if(s.err&&!s.body)return{err:s.err};if(s.statusCode===mi.NoContent)return R(w({},s),{body:[],unpacked:!0});let u=s.body;if(!s.unpacked)try{u=Se(u,i,a)}catch(L){return T(L)?{err:L}:{err:new P(H(L),null)}}if(!u)return{err:new P("unenvelope(): Response body is missing",null)};const{statusCode:h,response:m,headers:O}=u;if(h===void 0)return R(w({},s),{body:u,unpacked:!0});if(h<200||h>=300){let L=m&&m.error||s.err;return L||(L=new Error("Error in unenveloping "+u),L.statusCode=h),{err:L,body:m,headers:O,unpacked:!0,statusCode:h}}return{err:s.err,body:m,headers:O,unpacked:!0,statusCode:h}}function Wm(s,i,a,u,h){s.err?p.logAction(h,p.LOG_MICRO,"Resource."+i+"()","Received Error; "+As(a,u)+"; Error: "+H(s.err)):p.logAction(h,p.LOG_MICRO,"Resource."+i+"()","Received; "+As(a,u)+"; Headers: "+Mo(s.headers)+"; StatusCode: "+s.statusCode+"; Body: "+(C.BufferUtils.isBuffer(s.body)?" (Base64): "+C.BufferUtils.base64Encode(s.body):": "+C.Config.inspect(s.body)))}var Vm=class $s{static async get(i,a,u,h,m,O){return $s.do(tt.Get,i,a,null,u,h,m,O??!1)}static async delete(i,a,u,h,m,O){return $s.do(tt.Delete,i,a,null,u,h,m,O)}static async post(i,a,u,h,m,O,L){return $s.do(tt.Post,i,a,u,h,m,O,L)}static async patch(i,a,u,h,m,O,L){return $s.do(tt.Patch,i,a,u,h,m,O,L)}static async put(i,a,u,h,m,O,L){return $s.do(tt.Put,i,a,u,h,m,O,L)}static async do(i,a,u,h,m,O,L,W){L&&((O=O||{}).envelope=L);const G=a.logger;async function ne(de,ie){var Ee;if(G.shouldLog(p.LOG_MICRO)){let Oe=h;if(((Ee=de["content-type"])==null?void 0:Ee.indexOf("msgpack"))>0)try{a._MsgPack||Gt("MsgPack"),Oe=a._MsgPack.decode(h)}catch(Ue){p.logAction(G,p.LOG_MICRO,"Resource."+i+"()","Sending MsgPack Decoding Error: "+H(Ue))}p.logAction(G,p.LOG_MICRO,"Resource."+i+"()","Sending; "+As(u,ie)+"; Body: "+Oe)}const ye=await a.http.do(i,u,de,h,ie);return ye.error&&Sn.isTokenErr(ye.error)?(await a.auth.authorize(null,null),Tl(a,de,ie,ne)):{err:ye.error,body:ye.body,headers:ye.headers,unpacked:ye.unpacked,statusCode:ye.statusCode}}let se=await Tl(a,m,O,ne);if(L&&(se=$m(se,a._MsgPack,L)),G.shouldLog(p.LOG_MICRO)&&Wm(se,i,u,O,G),W){if(se.err)throw se.err;{const de=w({},se);return delete de.err,de}}return se}},ct=Vm;function qm(s){const i=s.match(/^\.\/(\w+)\?(.*)$/);return i&&i[2]&&S(i[2])}function Km(s){typeof s=="string"&&(s=s.split(","));const i={};for(let a=0;a<s.length;a++){const u=s[a].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(u){const h=qm(u[1]);h&&(i[u[2]]=h)}}return i}function zm(s,i,a){return!(a&&(i||typeof s.code=="number"))}var Jm=class{constructor(s,i,a,u,h,m){this.client=s,this.path=i,this.headers=a,this.envelope=u??null,this.bodyHandler=h,this.useHttpPaginatedResponse=m||!1}get logger(){return this.client.logger}async get(s){const i=await ct.get(this.client,this.path,this.headers,s,this.envelope,!1);return this.handlePage(i)}async delete(s){const i=await ct.delete(this.client,this.path,this.headers,s,this.envelope,!1);return this.handlePage(i)}async post(s,i){const a=await ct.post(this.client,this.path,i,this.headers,s,this.envelope,!1);return this.handlePage(a)}async put(s,i){const a=await ct.put(this.client,this.path,i,this.headers,s,this.envelope,!1);return this.handlePage(a)}async patch(s,i){const a=await ct.patch(this.client,this.path,i,this.headers,s,this.envelope,!1);return this.handlePage(a)}async handlePage(s){if(s.err&&zm(s.err,s.body,this.useHttpPaginatedResponse))throw p.logAction(this.logger,p.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+H(s.err)),s.err;let i,a,u;try{i=s.statusCode==mi.NoContent?[]:await this.bodyHandler(s.body,s.headers||{},s.unpacked)}catch(h){throw s.err||h}return s.headers&&(a=s.headers.Link||s.headers.link)&&(u=Km(a)),this.useHttpPaginatedResponse?new Ym(this,i,s.headers||{},s.statusCode,u,s.err):new Rl(this,i,u)}},Rl=class{constructor(s,i,a){this.resource=s,this.items=i;const u=this;a&&("first"in a&&(this.first=async function(){return u.get(a.first)}),"current"in a&&(this.current=async function(){return u.get(a.current)}),this.next=async function(){return"next"in a?u.get(a.next):null},this.hasNext=function(){return"next"in a},this.isLast=()=>{var h;return!((h=this.hasNext)!=null&&h.call(this))})}async get(s){const i=this.resource,a=await ct.get(i.client,i.path,i.headers,s,i.envelope,!1);return i.handlePage(a)}},Ym=class extends Rl{constructor(s,i,a,u,h,m){super(s,i,h),this.statusCode=u,this.success=u<300&&u>=200,this.headers=a,this.errorCode=m&&m.code,this.errorMessage=m&&m.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},Un=Jm,Al=class Lr{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let i="[PushChannelSubscription";return this.channel&&(i+="; channel="+this.channel),this.deviceId&&(i+="; deviceId="+this.deviceId),this.clientId&&(i+="; clientId="+this.clientId),i+="]",i}static fromResponseBody(i,a,u){return u&&(i=Se(i,a,u)),Array.isArray(i)?Lr.fromValuesArray(i):Lr.fromValues(i)}static fromValues(i){return Object.assign(new Lr,i)}static fromValuesArray(i){const a=i.length,u=new Array(a);for(let h=0;h<a;h++)u[h]=Lr.fromValues(i[h]);return u}};Al.toRequestBody=De;var Xm=Al,xo=Xm,Qm=class{constructor(s){var i;this.client=s,this.admin=new Zm(s),C.Config.push&&((i=s.options.plugins)!=null&&i.Push)&&(this.stateMachine=new s.options.plugins.Push.ActivationStateMachine(s),this.LocalDevice=s.options.plugins.Push.localDeviceFactory(Is))}async activate(s,i){await new Promise((a,u)=>{var h;if(!((h=this.client.options.plugins)!=null&&h.Push)){u(di("Push"));return}if(!this.stateMachine){u(new E("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){u(new E("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=m=>{if(m){u(m);return}a()},this.stateMachine.updateFailedCallback=i,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,s))})}async deactivate(s){await new Promise((i,a)=>{var u;if(!((u=this.client.options.plugins)!=null&&u.Push)){a(di("Push"));return}if(!this.stateMachine){a(new E("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){a(new E("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=h=>{if(h){a(h);return}i()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,s))})}},Zm=class{constructor(s){this.client=s,this.deviceRegistrations=new ey(s),this.channelSubscriptions=new ty(s)}async publish(s,i){const a=this.client,u=a.options.useBinaryProtocol?"msgpack":"json",h=Te.defaultPostHeaders(a.options,{format:u}),m={},O=j({recipient:s},i);j(h,a.options.headers),a.options.pushFullWait&&j(m,{fullWait:"true"});const L=De(O,a._MsgPack,u);await ct.post(a,"/push/publish",L,h,m,null,!0)}},ey=class{constructor(s){this.client=s}async save(s){const i=this.client,a=Is.fromValues(s),u=i.options.useBinaryProtocol?"msgpack":"json",h=Te.defaultPostHeaders(i.options,{format:u}),m={};j(h,i.options.headers),i.options.pushFullWait&&j(m,{fullWait:"true"});const O=De(a,i._MsgPack,u),L=await ct.put(i,"/push/deviceRegistrations/"+encodeURIComponent(s.id),O,h,m,null,!0);return Is.fromResponseBody(L.body,i._MsgPack,L.unpacked?void 0:u)}async get(s){const i=this.client,a=i.options.useBinaryProtocol?"msgpack":"json",u=Te.defaultGetHeaders(i.options,{format:a}),h=s.id||s;if(typeof h!="string"||!h.length)throw new E("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);j(u,i.options.headers);const m=await ct.get(i,"/push/deviceRegistrations/"+encodeURIComponent(h),u,{},null,!0);return Is.fromResponseBody(m.body,i._MsgPack,m.unpacked?void 0:a)}async list(s){const i=this.client,a=i.options.useBinaryProtocol?"msgpack":"json",u=this.client.http.supportsLinkHeaders?void 0:a,h=Te.defaultGetHeaders(i.options,{format:a});return j(h,i.options.headers),new Un(i,"/push/deviceRegistrations",h,u,async function(m,O,L){return Is.fromResponseBody(m,i._MsgPack,L?void 0:a)}).get(s)}async remove(s){const i=this.client,a=i.options.useBinaryProtocol?"msgpack":"json",u=Te.defaultGetHeaders(i.options,{format:a}),h={},m=s.id||s;if(typeof m!="string"||!m.length)throw new E("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);j(u,i.options.headers),i.options.pushFullWait&&j(h,{fullWait:"true"}),await ct.delete(i,"/push/deviceRegistrations/"+encodeURIComponent(m),u,h,null,!0)}async removeWhere(s){const i=this.client,a=i.options.useBinaryProtocol?"msgpack":"json",u=Te.defaultGetHeaders(i.options,{format:a});j(u,i.options.headers),i.options.pushFullWait&&j(s,{fullWait:"true"}),await ct.delete(i,"/push/deviceRegistrations",u,s,null,!0)}},ty=class hm{constructor(i){this.remove=hm.prototype.removeWhere,this.client=i}async save(i){const a=this.client,u=xo.fromValues(i),h=a.options.useBinaryProtocol?"msgpack":"json",m=Te.defaultPostHeaders(a.options,{format:h}),O={};j(m,a.options.headers),a.options.pushFullWait&&j(O,{fullWait:"true"});const L=De(u,a._MsgPack,h),W=await ct.post(a,"/push/channelSubscriptions",L,m,O,null,!0);return xo.fromResponseBody(W.body,a._MsgPack,W.unpacked?void 0:h)}async list(i){const a=this.client,u=a.options.useBinaryProtocol?"msgpack":"json",h=this.client.http.supportsLinkHeaders?void 0:u,m=Te.defaultGetHeaders(a.options,{format:u});return j(m,a.options.headers),new Un(a,"/push/channelSubscriptions",m,h,async function(O,L,W){return xo.fromResponseBody(O,a._MsgPack,W?void 0:u)}).get(i)}async removeWhere(i){const a=this.client,u=a.options.useBinaryProtocol?"msgpack":"json",h=Te.defaultGetHeaders(a.options,{format:u});j(h,a.options.headers),a.options.pushFullWait&&j(i,{fullWait:"true"}),await ct.delete(a,"/push/channelSubscriptions",h,i,null,!0)}async listChannels(i){const a=this.client,u=a.options.useBinaryProtocol?"msgpack":"json",h=this.client.http.supportsLinkHeaders?void 0:u,m=Te.defaultGetHeaders(a.options,{format:u});return j(m,a.options.headers),a.options.pushFullWait&&j(i,{fullWait:"true"}),new Un(a,"/push/channels",m,h,async function(O,L,W){const G=!W&&u?Se(O,a._MsgPack,u):O;for(let ne=0;ne<G.length;ne++)G[ne]=String(G[ne]);return G}).get(i)}},ny=Qm,ke={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},Il=[];Object.keys(ke).forEach(function(s){Il[ke[s]]=s});var Tn={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},sy=Object.keys(Tn);Tn.MODE_ALL=Tn.PRESENCE|Tn.PUBLISH|Tn.SUBSCRIBE|Tn.PRESENCE_SUBSCRIBE;var Pl=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"];function ry(s){return!s||!s.channelOptions?{channelOptions:s,plugins:{},baseEncodedPreviousPayload:void 0}:s}function kl(s,i,a){if(a&&a.cipher){s||Gt("Crypto");const u=s.getCipher(a.cipher,i);return{cipher:u.cipherParams,channelCipher:u.cipher}}return a??{}}async function iy(s,i){let a=s.data,u=s.encoding,h=i.channelCipher;u=u?u+"/":"",C.BufferUtils.isBuffer(a)||(a=C.BufferUtils.utf8Encode(String(a)),u=u+"utf-8/");const m=await h.encrypt(a);return s.data=m,s.encoding=u+"cipher+"+h.algorithm,s}async function Ll(s,i){const a=s.data;if(!(typeof a=="string"||C.BufferUtils.isBuffer(a)||a===null||a===void 0))if(Ne(a)||Array.isArray(a))s.data=JSON.stringify(a),s.encoding=s.encoding?s.encoding+"/json":"json";else throw new E("Data type is unsupported",40013,400);return i!=null&&i.cipher?iy(s,i):s}async function Ml(s,i){const a=ry(i);let u=s.data;const h=s.encoding;if(h){const m=h.split("/");let O,L=m.length,W=s.data,G="";try{for(;(O=L)>0;){const ne=m[--L].match(/([-\w]+)(\+([\w-]+))?/);if(!ne)break;switch(G=ne[1],G){case"base64":W=C.BufferUtils.base64Decode(String(W)),O==m.length&&(u=W);continue;case"utf-8":W=C.BufferUtils.utf8Decode(W);continue;case"json":W=JSON.parse(W);continue;case"cipher":if(a.channelOptions!=null&&a.channelOptions.cipher&&a.channelOptions.channelCipher){const se=ne[3],de=a.channelOptions.channelCipher;if(se!=de.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");W=await de.decrypt(W);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!a.plugins||!a.plugins.vcdiff)throw new E("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new E("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let se=a.baseEncodedPreviousPayload;typeof se=="string"&&(se=C.BufferUtils.utf8Encode(se));const de=C.BufferUtils.toBuffer(se);W=C.BufferUtils.toBuffer(W),W=C.BufferUtils.arrayBufferViewToBuffer(a.plugins.vcdiff.decode(W,de)),u=W}catch(se){throw new E("Vcdiff delta decode failed with "+se,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(ne){const se=ne;throw new E("Error processing the "+G+" encoding, decoder returned ‘"+se.message+"’",se.code||40013,400)}finally{s.encoding=O<=0?null:m.slice(0,O).join("/"),s.data=W}}a.baseEncodedPreviousPayload=u}function Nl(...s){let i=this.encoding,a=this.data;return a&&C.BufferUtils.isBuffer(a)&&(s.length>0?(i=i?i+"/base64":"base64",a=C.BufferUtils.base64Encode(a)):a=C.BufferUtils.toBuffer(a)),Object.assign({},this,{encoding:i,data:a})}function xl(s){const{id:i,connectionId:a,timestamp:u,channelSerial:h}=s;let m;switch(s.action){case ke.MESSAGE:{m=s.messages;for(let O=0;O<m.length;O++){const L=s.messages[O];h&&!L.version&&(L.version=h+":"+O.toString().padStart(3,"0"))}break}case ke.PRESENCE:case ke.SYNC:m=s.presence;break;default:throw new E("Unexpected action "+s.action,4e4,400)}for(let O=0;O<m.length;O++){const L=m[O];L.connectionId||(L.connectionId=a),L.timestamp||(L.timestamp=u),i&&!L.id&&(L.id=i+":"+O)}}function yi(s,i){let a="["+i;for(const u in s)u==="data"?typeof s.data=="string"?a+="; data="+s.data:C.BufferUtils.isBuffer(s.data)?a+="; data (buffer)="+C.BufferUtils.base64Encode(s.data):a+="; data (json)="+JSON.stringify(s.data):u&&(u==="extras"||u==="operation")?a+="; "+u+"="+JSON.stringify(s[u]):s[u]!==void 0&&(a+="; "+u+"="+s[u]);return a+="]",a}var _i=class{},Dl=["absent","present","enter","leave","update"];async function Fl(s,i,a,u){const h=kl(i,s,u??null);return lr.fromValues(a).decode(h,s)}async function oy(s,i,a,u){return Promise.all(a.map(function(h){return Fl(s,i,h,u)}))}async function ay(s,i){return lr.fromValues(s).decode(i.channelOptions,i.logger)}async function Ul(s,i){return Promise.all(s.map(function(a){return ay(a,i)}))}var Bl=class Mr extends _i{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const i=this.id.split(":");return{connectionId:i[0],msgSerial:parseInt(i[1],10),index:parseInt(i[2],10)}}async encode(i){const a=Object.assign(new lr,this,{action:Dl.indexOf(this.action||"present")});return Ll(a,i)}static fromValues(i){return Object.assign(new Mr,i)}static fromValuesArray(i){return i.map(a=>Mr.fromValues(a))}static fromData(i){return i instanceof Mr?i:Mr.fromValues({data:i})}toString(){return yi(this,"PresenceMessage")}},lr=class mc extends _i{toJSON(...i){return Nl.call(this,...i)}static fromValues(i){return Object.assign(new mc,i)}static fromValuesArray(i){return i.map(a=>mc.fromValues(a))}async decode(i,a){const u=Object.assign(new Bl,R(w({},this),{action:Dl[this.action]}));try{await Ml(u,i)}catch(h){p.logAction(a,p.LOG_ERROR,"WirePresenceMessage.decode()",H(h))}return u}toString(){return yi(this,"WirePresenceMessage")}},Bn=Bl,cy=class{constructor(s){this.channel=s}get logger(){return this.channel.logger}async get(s){p.logAction(this.logger,p.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const i=this.channel.client,a=i.options.useBinaryProtocol?"msgpack":"json",u=this.channel.client.http.supportsLinkHeaders?void 0:a,h=Te.defaultGetHeaders(i.options,{format:a});return j(h,i.options.headers),new Un(i,this.channel.client.rest.presenceMixin.basePath(this),h,u,async(m,O,L)=>{const W=L?m:Se(m,i._MsgPack,a);return Ul(W,this.channel)}).get(s)}async history(s){return p.logAction(this.logger,p.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,s)}},ly=cy,Hl=["message.create","message.update","message.delete","meta.occupancy","message.summary"];function uy(s){return Hl[s||0]||"unknown"}function fy(s){let i=0;return s.name&&(i+=s.name.length),s.clientId&&(i+=s.clientId.length),s.extras&&(i+=JSON.stringify(s.extras).length),s.data&&(i+=he(s.data)),i}async function Gl(s,i,a,u){const h=kl(i,s,u??null);return ur.fromValues(a).decode(h,s)}async function hy(s,i,a,u){return Promise.all(a.map(function(h){return Gl(s,i,h,u)}))}async function dy(s,i){return ur.fromValues(s).decode(i.channelOptions,i.logger)}async function gy(s,i){return Promise.all(s.map(function(a){return dy(a,i)}))}async function jl(s,i){return Promise.all(s.map(a=>a.encode(i)))}var py=De;function Do(s){let i,a=0;for(let u=0;u<s.length;u++)i=s[u],a+=i.size||(i.size=fy(i));return a}var $l=class yc extends _i{expandFields(){this.action==="message.create"&&(this.version&&!this.serial&&(this.serial=this.version),this.timestamp&&!this.createdAt&&(this.createdAt=this.timestamp))}async encode(i){const a=Object.assign(new ur,this,{action:Hl.indexOf(this.action||"message.create")});return Ll(a,i)}static fromValues(i){return Object.assign(new yc,i)}static fromValuesArray(i){return i.map(a=>yc.fromValues(a))}toString(){return yi(this,"Message")}},ur=class _c extends _i{toJSON(...i){return Nl.call(this,...i)}static fromValues(i){return Object.assign(new _c,i)}static fromValuesArray(i){return i.map(a=>_c.fromValues(a))}async decodeWithErr(i,a){const u=Object.assign(new $l,R(w({},this),{action:uy(this.action)}));let h;try{await Ml(u,i)}catch(m){p.logAction(a,p.LOG_ERROR,"WireMessage.decode()",H(m)),h=m}return u.expandFields(),{decoded:u,err:h}}async decode(i,a){const{decoded:u}=await this.decodeWithErr(i,a);return u}toString(){return yi(this,"WireMessage")}},Hn=$l,my=9;function yy(s){return s.every(function(i){return!i.id})}var _y=class{constructor(s,i,a){var u,h;p.logAction(s.logger,p.LOG_MINOR,"RestChannel()","started; name = "+i),this.name=i,this.client=s,this.presence=new ly(this),this.channelOptions=gi((u=s._Crypto)!=null?u:null,this.logger,a),(h=s.options.plugins)!=null&&h.Push&&(this._push=new s.options.plugins.Push.PushChannel(this))}get push(){return this._push||Gt("Push"),this._push}get logger(){return this.client.logger}setOptions(s){var i;this.channelOptions=gi((i=this.client._Crypto)!=null?i:null,this.logger,s)}async history(s){return p.logAction(this.logger,p.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,s)}async publish(...s){const i=s[0],a=s[1];let u,h;if(typeof i=="string"||i===null)u=[Hn.fromValues({name:i,data:a})],h=s[2];else if(Ne(i))u=[Hn.fromValues(i)],h=s[1];else if(Array.isArray(i))u=Hn.fromValuesArray(i),h=s[1];else throw new E("The single-argument form of publish() expects a message object or an array of message objects",40013,400);h||(h={});const m=this.client,O=m.options,L=O.useBinaryProtocol?"msgpack":"json",W=m.options.idempotentRestPublishing,G=Te.defaultPostHeaders(m.options,{format:L});if(j(G,O.headers),W&&yy(u)){const ie=await V(my);u.forEach(function(Ee,ye){Ee.id=ie+":"+ye.toString()})}const ne=await jl(u,this.channelOptions),se=Do(ne),de=O.maxMessageSize;if(se>de)throw new E("Maximum size of messages that can be published at once exceeded ( was "+se+" bytes; limit is "+de+" bytes)",40009,400);await this._publish(py(ne,m._MsgPack,L),G,h)}async _publish(s,i,a){await ct.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",s,i,a,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},by=_y,vy=class dm{constructor(i){this.entries=i&&i.entries||void 0,this.schema=i&&i.schema||void 0,this.appId=i&&i.appId||void 0,this.inProgress=i&&i.inProgress||void 0,this.unit=i&&i.unit||void 0,this.intervalId=i&&i.intervalId||void 0}static fromValues(i){return new dm(i)}},Ey=vy,Wl=class{static basePath(s){return"/channels/"+encodeURIComponent(s.name)}static history(s,i){const a=s.client,u=a.options.useBinaryProtocol?"msgpack":"json",h=s.client.http.supportsLinkHeaders?void 0:u,m=Te.defaultGetHeaders(a.options,{format:u});return j(m,a.options.headers),new Un(a,this.basePath(s)+"/messages",m,h,async function(O,L,W){const G=W?O:Se(O,a._MsgPack,u);return gy(G,s)}).get(i)}static async status(s){const i=s.client.options.useBinaryProtocol?"msgpack":"json",a=Te.defaultPostHeaders(s.client.options,{format:i});return(await ct.get(s.client,this.basePath(s),a,{},i,!0)).body}},Cy=class{static basePath(s){return Wl.basePath(s.channel)+"/presence"}static async history(s,i){const a=s.channel.client,u=a.options.useBinaryProtocol?"msgpack":"json",h=s.channel.client.http.supportsLinkHeaders?void 0:u,m=Te.defaultGetHeaders(a.options,{format:u});return j(m,a.options.headers),new Un(a,this.basePath(s)+"/history",m,h,async(O,L,W)=>{const G=W?O:Se(O,a._MsgPack,u);return Ul(G,s.channel)}).get(i)}},Vl=class{constructor(s){this.channelMixin=Wl,this.presenceMixin=Cy,this.Resource=ct,this.DeviceDetails=Is,this.client=s,this.channels=new Oy(this.client),this.push=new ny(this.client)}async stats(s){const i=Te.defaultGetHeaders(this.client.options),a=this.client.options.useBinaryProtocol?"msgpack":"json",u=this.client.http.supportsLinkHeaders?void 0:a;return j(i,this.client.options.headers),new Un(this.client,"/stats",i,u,function(h,m,O){const L=O?h:JSON.parse(h);for(let W=0;W<L.length;W++)L[W]=Ey.fromValues(L[W]);return L}).get(s)}async time(s){const i=Te.defaultGetHeaders(this.client.options);this.client.options.headers&&j(i,this.client.options.headers);const a=L=>this.client.baseUri(L)+"/time";let{error:u,body:h,unpacked:m}=await this.client.http.do(tt.Get,a,i,null,s);if(u)throw u;m||(h=JSON.parse(h));const O=h[0];if(!O)throw new E("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=O-Date.now(),O}async request(s,i,a,u,h,m){var O;const[L,W,G]=this.client.options.useBinaryProtocol?(this.client._MsgPack||Gt("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],ne=this.client.http.supportsLinkHeaders?void 0:G;u=u||{};const se=s.toLowerCase(),de=se=="get"?Te.defaultGetHeaders(this.client.options,{format:G,protocolVersion:a}):Te.defaultPostHeaders(this.client.options,{format:G,protocolVersion:a});typeof h!="string"&&(h=(O=L(h))!=null?O:null),j(de,this.client.options.headers),m&&j(de,m);const ie=new Un(this.client,i,de,ne,async function(Ee,ye,Oe){return _e(Oe?Ee:W(Ee))},!0);if(!C.Http.methods.includes(se))throw new E("Unsupported method "+se,40500,405);return C.Http.methodsWithBody.includes(se)?ie[se](u,h):ie[se](u)}async batchPublish(s){let i,a;Array.isArray(s)?(i=s,a=!1):(i=[s],a=!0);const u=this.client.options.useBinaryProtocol?"msgpack":"json",h=Te.defaultPostHeaders(this.client.options,{format:u});this.client.options.headers&&j(h,this.client.options.headers);const m=De(i,this.client._MsgPack,u),O=await ct.post(this.client,"/messages",m,h,{},null,!0),L=O.unpacked?O.body:Se(O.body,this.client._MsgPack,u);return a?L[0]:L}async batchPresence(s){const i=this.client.options.useBinaryProtocol?"msgpack":"json",a=Te.defaultPostHeaders(this.client.options,{format:i});this.client.options.headers&&j(a,this.client.options.headers);const u=s.join(","),h=await ct.get(this.client,"/presence",a,{channels:u},null,!0);return h.unpacked?h.body:Se(h.body,this.client._MsgPack,i)}async revokeTokens(s,i){if(Ol(this.client.options))throw new E("Cannot revoke tokens when using token auth",40162,401);const a=this.client.options.keyName;let u=i??{};const h=w({targets:s.map(G=>`${G.type}:${G.value}`)},u),m=this.client.options.useBinaryProtocol?"msgpack":"json",O=Te.defaultPostHeaders(this.client.options,{format:m});this.client.options.headers&&j(O,this.client.options.headers);const L=De(h,this.client._MsgPack,m),W=await ct.post(this.client,`/keys/${a}/revokeTokens`,L,O,{},null,!0);return W.unpacked?W.body:Se(W.body,this.client._MsgPack,m)}},Oy=class{constructor(s){this.client=s,this.all=Object.create(null)}get(s,i){s=String(s);let a=this.all[s];return a?i&&a.setOptions(i):this.all[s]=a=new by(this.client,s,i),a}release(s){delete this.all[String(s)]}},wy=class extends Sl{constructor(s){super(Te.objectifyOptions(s,!1,"BaseRest",p.defaultLogger,{Rest:Vl}))}},ql={Rest:Vl},Kl=class extends Hn{static async fromEncoded(s,i){return Gl(p.defaultLogger,C.Crypto,s,i)}static async fromEncodedArray(s,i){return hy(p.defaultLogger,C.Crypto,s,i)}static fromValues(s){return Hn.fromValues(s)}},zl=class extends Bn{static async fromEncoded(s,i){return Fl(p.defaultLogger,C.Crypto,s,i)}static async fromEncodedArray(s,i){return oy(p.defaultLogger,C.Crypto,s,i)}static fromValues(s){return Bn.fromValues(s)}},Ps=class Hi extends wy{constructor(i){var a,u;if(!Hi._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(Te.objectifyOptions(i,!0,"Rest",p.defaultLogger,R(w({},ql),{Crypto:(a=Hi.Crypto)!=null?a:void 0,MsgPack:(u=Hi._MsgPack)!=null?u:void 0})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(i){this._Crypto=i}};Ps._Crypto=null,Ps.Message=Kl,Ps.PresenceMessage=zl,Ps._MsgPack=null,Ps._Http=No;var Fo=Ps;function Sy(s,i,a,u){try{a.apply(i,u)}catch(h){p.logAction(s,p.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+h+"; stack = "+(h&&h.stack))}}function Uo(s,i,a){let u,h,m;for(let O=0;O<s.length;O++)if(u=s[O],a&&(u=u[a]),Array.isArray(u)){for(;(h=u.indexOf(i))!==-1;)u.splice(h,1);a&&u.length===0&&delete s[O][a]}else if(Ne(u))for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&Array.isArray(u[m])&&Uo([u],i,m)}var Ty=class{constructor(s){this.logger=s,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...s){if(s.length===1){const i=s[0];if(typeof i=="function")this.any.push(i);else throw new Error("EventListener.on(): Invalid arguments: "+C.Config.inspect(s))}if(s.length===2){const[i,a]=s;if(typeof a!="function")throw new Error("EventListener.on(): Invalid arguments: "+C.Config.inspect(s));if(Me(i))this.any.push(a);else if(Array.isArray(i))i.forEach(u=>{this.on(u,a)});else{if(typeof i!="string")throw new Error("EventListener.on(): Invalid arguments: "+C.Config.inspect(s));(this.events[i]||(this.events[i]=[])).push(a)}}}off(...s){if(s.length==0||Me(s[0])&&Me(s[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[i,a]=s;let u=null,h=null;if(s.length===1||!a)typeof i=="function"?u=i:h=i;else{if(typeof a!="function")throw new Error("EventEmitter.off(): invalid arguments:"+C.Config.inspect(s));[h,u]=[i,a]}if(u&&Me(h)){Uo([this.any,this.events,this.anyOnce,this.eventsOnce],u);return}if(Array.isArray(h)){h.forEach(m=>{this.off(m,u)});return}if(typeof h!="string")throw new Error("EventEmitter.off(): invalid arguments:"+C.Config.inspect(s));u?Uo([this.events,this.eventsOnce],u,h):(delete this.events[h],delete this.eventsOnce[h])}listeners(s){if(s){const i=this.events[s]||[];return this.eventsOnce[s]&&Array.prototype.push.apply(i,this.eventsOnce[s]),i.length?i:null}return this.any.length?this.any:null}emit(s,...i){const a={event:s},u=[];this.anyOnce.length&&(Array.prototype.push.apply(u,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(u,this.any);const h=this.eventsOnce[s];h&&(Array.prototype.push.apply(u,h),delete this.eventsOnce[s]);const m=this.events[s];m&&Array.prototype.push.apply(u,m),u.forEach(O=>{Sy(this.logger,a,O,i)})}once(...s){const i=s.length;if(i===0||i===1&&typeof s[0]!="function"){const h=s[0];return new Promise(m=>{this.once(h,m)})}const[a,u]=s;if(s.length===1&&typeof a=="function")this.anyOnce.push(a);else if(Me(a)){if(typeof u!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+C.Config.inspect(s));this.anyOnce.push(u)}else if(Array.isArray(a)){const h=this,m=function(){const O=Array.prototype.slice.call(arguments);if(a.forEach(function(L){h.off(L,m)}),typeof u!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+C.Config.inspect(s));u.apply(this,O)};a.forEach(function(O){h.on(O,m)})}else{if(typeof a!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+C.Config.inspect(s));const h=this.eventsOnce[a]||(this.eventsOnce[a]=[]);if(u){if(typeof u!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+C.Config.inspect(s));h.push(u)}}}async whenState(s,i){if(typeof s!="string"||typeof i!="string")throw new Error("whenState requires a valid state String argument");return s===i?null:this.once(s)}},vt=Ty,Ry=De;function Jl(s){const i=[];if(s)for(let a=0;a<s.length;a++)i.push(s[a].toString());return"[ "+i.join(", ")+" ]"}function Ay(s,i,a,u){const h=Se(s,i,u);return Bo(h,a)}function Bo(s,i){let a;s.error&&(a=E.fromValues(s.error));let u;s.messages&&(u=ur.fromValuesArray(s.messages));let h;return i&&s.presence&&(h=i.WirePresenceMessage.fromValuesArray(s.presence)),Object.assign(new Go,R(w({},s),{presence:h,messages:u,error:a}))}function Iy(s){return Bo(s,{WirePresenceMessage:lr})}function dn(s){return Object.assign(new Go,s)}function Ho(s,i){let a="[ProtocolMessage";s.action!==void 0&&(a+="; action="+Il[s.action]||s.action);const u=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let h;for(let m=0;m<u.length;m++)h=u[m],s[h]!==void 0&&(a+="; "+h+"="+s[h]);if(s.messages&&(a+="; messages="+Jl(ur.fromValuesArray(s.messages))),s.presence&&i&&(a+="; presence="+Jl(i.WirePresenceMessage.fromValuesArray(s.presence))),s.error&&(a+="; error="+E.fromValues(s.error).toString()),s.auth&&s.auth.accessToken&&(a+="; token="+s.auth.accessToken),s.flags&&(a+="; flags="+sy.filter(s.hasFlag).join(",")),s.params){let m="";z(s.params,function(O){m.length>0&&(m+="; "),m+=O+"="+s.params[O]}),m.length>0&&(a+="; params=["+m+"]")}return a+="]",a}var Go=class{constructor(){this.hasFlag=s=>(this.flags&Tn[s])>0}setFlag(s){return this.flags=this.flags|Tn[s]}getMode(){return this.flags&&this.flags&Tn.MODE_ALL}encodeModesToFlags(s){s.forEach(i=>this.setFlag(i))}decodeModesFromFlags(){const s=[];return Pl.forEach(i=>{this.hasFlag(i)&&s.push(i)}),s.length>0?s:void 0}},Yl=Go,Py=class extends vt{constructor(s){super(s),this.messages=[]}count(){return this.messages.length}push(s){this.messages.push(s)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(s){this.messages.push.apply(this.messages,s)}prepend(s){this.messages.unshift.apply(this.messages,s)}completeMessages(s,i,a){p.logAction(this.logger,p.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+s+"; count = "+i),a=a||null;const u=this.messages;if(u.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const h=u[0];if(h){const m=h.message.msgSerial,O=s+i;if(O>m){const L=u.splice(0,O-m);for(const W of L)W.callback(a)}u.length==0&&this.emit("idle")}}completeAllMessages(s){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,s)}resetSendAttempted(){for(let s of this.messages)s.sendAttempted=!1}clear(){p.logAction(this.logger,p.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},Xl=Py,Ql=class{constructor(s,i){this.message=s,this.callback=i,this.merged=!1;const a=s.action;this.sendAttempted=!1,this.ackRequired=a==ke.MESSAGE||a==ke.PRESENCE}},ky=class extends vt{constructor(s){super(s.logger),this.transport=s,this.messageQueue=new Xl(this.logger),s.on("ack",(i,a)=>{this.onAck(i,a)}),s.on("nack",(i,a,u)=>{this.onNack(i,a,u)})}onAck(s,i){p.logAction(this.logger,p.LOG_MICRO,"Protocol.onAck()","serial = "+s+"; count = "+i),this.messageQueue.completeMessages(s,i)}onNack(s,i,a){p.logAction(this.logger,p.LOG_ERROR,"Protocol.onNack()","serial = "+s+"; count = "+i+"; err = "+H(a)),a||(a=new E("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(s,i,a)}onceIdle(s){const i=this.messageQueue;if(i.count()===0){s();return}i.once("idle",s)}send(s){s.ackRequired&&this.messageQueue.push(s),this.logger.shouldLog(p.LOG_MICRO)&&p.logActionNoStrip(this.logger,p.LOG_MICRO,"Protocol.send()","sending msg; "+Ho(s.message,this.transport.connectionManager.realtime._RealtimePresence)),s.sendAttempted=!0,this.transport.send(s.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const s=this.transport;this.onceIdle(function(){s.disconnect()})}},Ly=ky,My=class{constructor(s,i,a,u){this.previous=s,this.current=i,a&&(this.retryIn=a),u&&(this.reason=u)}},bi=My,Gn={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},Ny={disconnected:()=>E.fromValues({statusCode:400,code:Gn.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>E.fromValues({statusCode:400,code:Gn.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>E.fromValues({statusCode:400,code:Gn.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>E.fromValues({statusCode:400,code:Gn.CLOSING,message:"Connection closing"}),closed:()=>E.fromValues({statusCode:400,code:Gn.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>E.fromValues({statusCode:500,code:Gn.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>E.fromValues({statusCode:500,code:Gn.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function xy(s){return!s.statusCode||!s.code||s.statusCode>=500?!0:Object.values(Gn).includes(s.code)}var us=Ny,Dy=dn({action:ke.CLOSE}),Fy=dn({action:ke.DISCONNECT}),Uy=class extends vt{constructor(s,i,a,u){super(s.logger),u&&(a.format=void 0,a.heartbeats=!0),this.connectionManager=s,this.auth=i,this.params=a,this.timeouts=a.options.timeouts,this.format=a.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",us.closed())}disconnect(s){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",s||us.disconnected())}fail(s){this.isConnected&&this.requestDisconnect(),this.finish("failed",s||us.failed())}finish(s,i){var a;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((a=this.idleTimer)!=null?a:void 0),this.idleTimer=null,this.emit(s,i),this.dispose())}onProtocolMessage(s){switch(this.logger.shouldLog(p.LOG_MICRO)&&p.logActionNoStrip(this.logger,p.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+Ho(s,this.connectionManager.realtime._RealtimePresence)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),s.action){case ke.HEARTBEAT:p.logActionNoStrip(this.logger,p.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",s.id);break;case ke.CONNECTED:this.onConnect(s),this.emit("connected",s.error,s.connectionId,s.connectionDetails,s);break;case ke.CLOSED:this.onClose(s);break;case ke.DISCONNECTED:this.onDisconnect(s);break;case ke.ACK:this.emit("ack",s.msgSerial,s.count);break;case ke.NACK:this.emit("nack",s.msgSerial,s.count,s.error);break;case ke.SYNC:this.connectionManager.onChannelMessage(s,this);break;case ke.ACTIVATE:break;case ke.AUTH:me(this.auth.authorize(),i=>{i&&p.logAction(this.logger,p.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+H(i))});break;case ke.ERROR:if(p.logAction(this.logger,p.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+C.Config.inspect(s.error)+(s.channel?", channel: "+s.channel:"")),s.channel===void 0){this.onFatalError(s);break}this.connectionManager.onChannelMessage(s,this);break;default:this.connectionManager.onChannelMessage(s,this)}}onConnect(s){if(this.isConnected=!0,!s.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const i=s.connectionDetails.maxIdleInterval;i&&(this.maxIdleInterval=i+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(s){const i=s&&s.error;p.logAction(this.logger,p.LOG_MINOR,"Transport.onDisconnect()","err = "+H(i)),this.finish("disconnected",i)}onFatalError(s){const i=s&&s.error;p.logAction(this.logger,p.LOG_MINOR,"Transport.onFatalError()","err = "+H(i)),this.finish("failed",i)}onClose(s){const i=s&&s.error;p.logAction(this.logger,p.LOG_MINOR,"Transport.onClose()","err = "+H(i)),this.finish("closed",i)}requestClose(){p.logAction(this.logger,p.LOG_MINOR,"Transport.requestClose()",""),this.send(Dy)}requestDisconnect(){p.logAction(this.logger,p.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(Fy)}ping(s){const i={action:ke.HEARTBEAT};s&&(i.id=s),this.send(dn(i))}dispose(){p.logAction(this.logger,p.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(s){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},s))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const s=Date.now()-this.lastActivity,i=this.maxIdleInterval-s;if(i<=0){const a="No activity seen from realtime in "+s+"ms; assuming connection has dropped";p.logAction(this.logger,p.LOG_ERROR,"Transport.onIdleTimerExpire()",a),this.disconnect(new E(a,80003,408))}else this.setIdleTimer(i+100)}static tryConnect(s,i,a,u,h){const m=new s(i,a,u);let O;const L=function(G){clearTimeout(O),h({event:this.event,error:G})},W=i.options.timeouts.realtimeRequestTimeout;return O=setTimeout(()=>{m.off(["preconnect","disconnected","failed"]),m.dispose(),L.call({event:"disconnected"},new E("Timeout waiting for transport to indicate itself viable",5e4,500))},W),m.on(["failed","disconnected"],L),m.on("preconnect",function(){p.logAction(i.logger,p.LOG_MINOR,"Transport.tryConnect()","viable transport "+m),clearTimeout(O),m.off(["failed","disconnected"],L),h(null,m)}),m.connect(),m}static isAvailable(){throw new E("isAvailable not implemented for transport",5e4,500)}},ks=Uy,Dt;(s=>{s.WebSocket="web_socket",s.Comet="comet",s.XhrPolling="xhr_polling"})(Dt||(Dt={}));var By=typeof bn<"u"?bn:typeof window<"u"?window:self,jo=()=>{var s;return typeof C.WebStorage<"u"&&((s=C.WebStorage)==null?void 0:s.localSupported)},fr=()=>{var s;return typeof C.WebStorage<"u"&&((s=C.WebStorage)==null?void 0:s.sessionSupported)},Zl=function(){},$o="ably-transport-preference";function Hy(s,i,a){let u;if(s.channel!==i.channel||(u=s.action)!==ke.PRESENCE&&u!==ke.MESSAGE||u!==i.action)return!1;const h=u===ke.PRESENCE?"presence":"messages",m=s[h].concat(i[h]);return Do(m)>a||!re(m,"clientId")||!m.every(function(L){return!L.id})?!1:(s[h]=m,!0)}function Wo(s){try{return JSON.parse(s)}catch{return null}}var Gy=class{constructor(s,i,a,u){this.options=s,this.host=i,this.mode=a,this.connectionKey=u,this.format=s.useBinaryProtocol?"msgpack":"json"}getConnectParams(s){const i=s?X(s):{},a=this.options;switch(this.mode){case"resume":i.resume=this.connectionKey;break;case"recover":{const u=Wo(a.recover);u&&(i.recover=u.connectionKey);break}}return a.clientId!==void 0&&(i.clientId=a.clientId),a.echoMessages===!1&&(i.echo="false"),this.format!==void 0&&(i.format=this.format),this.stream!==void 0&&(i.stream=this.stream),this.heartbeats!==void 0&&(i.heartbeats=this.heartbeats),i.v=Te.protocolVersion,i.agent=Po(this.options),a.transportParams!==void 0&&j(i,a.transportParams),i}toString(){let s="[mode="+this.mode;return this.host&&(s+=",host="+this.host),this.connectionKey&&(s+=",connectionKey="+this.connectionKey),this.format&&(s+=",format="+this.format),s+="]",s}},jy=class gm extends vt{constructor(i,a){super(i.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=i,this.initTransports(),this.options=a;const u=a.timeouts,h=u.webSocketConnectTimeout+u.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:h,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:u.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:u.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:u.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new Xl(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=u.connectionStateTtl,this.maxIdleInterval=null,this.transports=te(a.transports||Te.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(Dt.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(Dt.XhrPolling)?this.baseTransport=Dt.XhrPolling:this.transports.includes(Dt.Comet)&&(this.baseTransport=Dt.Comet),this.httpHosts=Te.getHosts(a),this.wsHosts=Te.getHosts(a,!0),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,p.logAction(this.logger,p.LOG_MINOR,"Realtime.ConnectionManager()","started"),p.logAction(this.logger,p.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(a.transports||Te.defaultTransports)+"]"),p.logAction(this.logger,p.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),p.logAction(this.logger,p.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+this.httpHosts+"]"),!this.transports.length){const O="no requested transports available";throw p.logAction(this.logger,p.LOG_ERROR,"realtime.ConnectionManager()",O),new Error(O)}const m=C.Config.addEventListener;m&&(fr()&&typeof a.recover=="function"&&m("beforeunload",this.persistConnection.bind(this)),a.closeOnUnload===!0&&m("beforeunload",()=>{p.logAction(this.logger,p.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),m("online",()=>{var O;this.state==this.states.disconnected||this.state==this.states.suspended?(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager caught browser ‘online’ event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((O=this.pendingTransport)==null||O.off(),this.disconnectAllTransports(),this.startConnect())}),m("offline",()=>{this.state==this.states.connected&&(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager caught browser ‘offline’ event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(i){const a={supportedTransports:{}};return this.initTransports(i,a),a.supportedTransports}static initTransports(i,a){const u=w(w({},C.Transports.bundledImplementations),i);[Dt.WebSocket,...C.Transports.order].forEach(h=>{const m=u[h];m&&m.isAvailable()&&(a.supportedTransports[h]=m)})}initTransports(){gm.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(i,a){return new Gy(this.options,i,a,this.connectionKey)}getTransportParams(i){(u=>{if(this.connectionKey){u("resume");return}if(typeof this.options.recover=="string"){u("recover");return}const h=this.options.recover,m=this.getSessionRecoverData(),O=this.sessionRecoveryName();if(m&&typeof h=="function"){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+O+")"),h(m,L=>{L?(this.options.recover=m.recoveryKey,u("recover")):u("clean")});return}u("clean")})(u=>{const h=this.createTransportParams(null,u);if(u==="recover"){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const m=Wo(this.options.recover);m&&(this.msgSerial=m.msgSerial)}else p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+h.toString());i(h)})}tryATransport(i,a,u){p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+a),this.proposedTransport=ks.tryConnect(this.supportedTransports[a],this,this.realtime.auth,i,(h,m)=>{const O=this.state;if(O==this.states.closing||O==this.states.closed||O==this.states.failed){m&&(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+O.state+" while we were attempting the transport; closing "+m),m.close()),u(!0);return}if(h){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+a+" "+h.event+", err: "+h.error.toString()),Sn.isTokenErr(h.error)&&!(this.errorReason&&Sn.isTokenErr(this.errorReason))?(this.errorReason=h.error,me(this.realtime.auth._forceNewToken(null,null),L=>{if(L){this.actOnErrorFromAuthorize(L);return}this.tryATransport(i,a,u)})):h.event==="failed"?(this.notifyState({state:"failed",error:h.error}),u(!0)):h.event==="disconnected"&&(xy(h.error)?u(!1):(this.notifyState({state:this.states.connecting.failState,error:h.error}),u(!0)));return}p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+a+"; setting pending"),this.setTransportPending(m,i),u(null,m)})}setTransportPending(i,a){const u=a.mode;p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+i+"; mode = "+u),this.pendingTransport=i,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),i.once("connected",(m,O,L)=>{this.activateTransport(m,i,O,L),u==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const h=this;i.on(["disconnected","closed","failed"],function(m){h.deactivateTransport(i,this.event,m)}),this.emit("transport.pending",i)}activateTransport(i,a,u,h){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+a),i&&p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+i),u&&p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+u),h&&p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(h)),this.persistTransportPreference(a);const m=this.state,O=this.states.connected.state;if(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+m.state),m.state==this.states.closing.state||m.state==this.states.closed.state||m.state==this.states.failed.state)return p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),a.disconnect(),!1;if(delete this.pendingTransport,!a.isConnected)return p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+a+" since it appears to no longer be connected"),!1;const L=this.activeProtocol;this.activeProtocol=new Ly(a),this.host=a.params.host;const W=h.connectionKey;if(W&&this.connectionKey!=W&&this.setConnection(u,h,!!i),this.onConnectionDetailsUpdate(h,a),C.Config.nextTick(()=>{a.on("connected",(G,ne,se)=>{this.onConnectionDetailsUpdate(se,a),this.emit("update",new bi(O,O,null,G))})}),m.state===this.states.connected.state?i&&(this.errorReason=this.realtime.connection.errorReason=i,this.emit("update",new bi(O,O,null,i))):(this.notifyState({state:"connected",error:i}),this.errorReason=this.realtime.connection.errorReason=i||null),this.emit("transport.active",a),L)if(L.messageQueue.count()>0&&p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+L.transport.shortName+", new one is "+a.shortName+") finishing with "+L.messageQueue.count()+" messages still pending"),L.transport===a){const G="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+a.shortName+"; stack = "+new Error().stack;p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.activateTransport()",G)}else L.finish();return!0}deactivateTransport(i,a,u){const h=this.activeProtocol,m=h&&h.getTransport()===i,O=i===this.pendingTransport,L=this.noTransportsScheduledForActivation();if(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+i),p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+a+(m?"; was active":O?"; was pending":"")+(L?"":"; another transport is scheduled for activation")),u&&u.message&&p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+u.message),m&&(p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(h.getPendingMessages()),h.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",i),m&&L||m&&a==="failed"||a==="closed"||h===null&&O){if(a==="disconnected"&&u&&u.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:a,error:u,retryImmediately:!0});return}const W=a==="failed"&&Sn.isTokenErr(u)?"disconnected":a;this.notifyState({state:W,error:u});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(i,a,u){const h=this.connectionId;(h&&h!==i||!h&&u)&&(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==i&&p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=i,this.realtime.connection.key=this.connectionKey=a.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const i=Date.now()-this.lastActivity;i>this.connectionStateTtl+this.maxIdleInterval&&(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+i+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(fr()){const i=this.createRecoveryKey();i&&this.setSessionRecoverData({recoveryKey:i,disconnectedAt:Date.now(),location:By.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getError(){if(this.errorReason){const i=P.fromValues(this.errorReason);return i.cause=this.errorReason,i}return this.getStateError()}getStateError(){var i,a;return(a=(i=us)[this.state.state])==null?void 0:a.call(i)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(i){const a="Connection state",u=i.current+(i.reason?"; reason: "+i.reason:"");i.current==="failed"?p.logAction(this.logger,p.LOG_ERROR,a,u):p.logAction(this.logger,p.LOG_MAJOR,a,u),p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+i.current+"; reason = "+(i.reason&&i.reason.message));const h=this.state=this.states[i.current];i.reason&&(this.errorReason=i.reason,this.realtime.connection.errorReason=i.reason),(h.terminal||h.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",i)}startTransitionTimer(i){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+i.state),this.transitionTimer&&(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager "+i.state+" timer expired","requesting new state: "+i.failState),this.notifyState({state:i.failState}))},i.retryDelay)}cancelTransitionTimer(){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(i){i!=="disconnected"&&i!=="suspended"&&i!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(i){this.retryTimer=setTimeout(()=>{p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},i)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{p.logAction(this.logger,p.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&me(this.realtime.http.checkConnectivity(),(i,a)=>{i||!a?(p.logAction(this.logger,p.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new E("Unable to connect (network unreachable)",80003,404)})):p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(i){this.webSocketGiveUpTimer=setTimeout(()=>{var a,u;this.wsCheckResult||(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(a=this.proposedTransport)==null||a.dispose(),(u=this.pendingTransport)==null||u.dispose(),this.connectBase(i,++this.connectCounter)):p.logAction(this.logger,p.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(i){var a,u;const h=i.state,m=h==="disconnected"&&(this.state===this.states.connected||i.retryImmediately||this.state===this.states.connecting&&i.error&&Sn.isTokenErr(i.error)&&!(this.errorReason&&Sn.isTokenErr(this.errorReason)));if(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+h+(m?"; will retry connection immediately":"")),h==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(i.state),(h==="suspended"||h==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const O=this.states[i.state];let L=O.retryDelay;O.state==="disconnected"&&(this.disconnectedRetryCount++,L=pt(O.retryDelay,this.disconnectedRetryCount));const W=new bi(this.state.state,O.state,L,i.error||((u=(a=us)[O.state])==null?void 0:u.call(a)));if(m){const G=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},ne=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;ne&&ne<1e3?(p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+ne+"ms ago, waiting another "+(1e3-ne)+"ms before trying again"),setTimeout(G,1e3-ne)):C.Config.nextTick(G)}else(h==="disconnected"||h==="suspended")&&this.startRetryTimer(L);(h==="disconnected"&&!m||h==="suspended"||O.terminal)&&C.Config.nextTick(()=>{this.disconnectAllTransports()}),h=="connected"&&!this.activeProtocol&&p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(W),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(h,W.reason),this.failQueuedMessages(W.reason))}requestState(i){var a,u;const h=i.state;if(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+h+"; current state: "+this.state.state),h==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(h),h=="connecting"&&this.state.state=="connected")||h=="closing"&&this.state.state=="closed")return;const m=this.states[h],O=new bi(this.state.state,m.state,null,i.error||((u=(a=us)[m.state])==null?void 0:u.call(a)));this.enactStateChange(O),h=="connecting"&&C.Config.nextTick(()=>{this.startConnect()}),h=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const i=this.realtime.auth,a=++this.connectCounter,u=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(h=>{if(h.mode==="recover"&&h.options.recover){const m=Wo(h.options.recover);m&&this.realtime.channels.recoverChannels(m.channelSerials)}a===this.connectCounter&&this.connectImpl(h,a)})};if(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),i.method==="basic")u();else{const h=m=>{a===this.connectCounter&&(m?this.actOnErrorFromAuthorize(m):u())};this.errorReason&&Sn.isTokenErr(this.errorReason)?me(i._forceNewToken(null,null),h):me(i._ensureValidAuthCredentials(!1),h)}}connectImpl(i,a){const u=this.state.state;if(u!==this.states.connecting.state){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+u);return}const h=this.getTransportPreference();h&&h===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(i,++this.connectCounter))}).catch(Zl),h&&h===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(i,a):this.connectWs(i,a)}connectWs(i,a){p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(i),this.tryTransportWithFallbacks("web_socket",i,!0,a,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(i,a){p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,i,!1,a,()=>!0):this.notifyState({state:"disconnected",error:new E("No transports left to try",8e4,404)})}tryTransportWithFallbacks(i,a,u,h,m){p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",i);const O=se=>{this.notifyState({state:this.states.connecting.failState,error:se})},L=u?this.wsHosts.slice():this.httpHosts.slice(),W=(se,de)=>{if(h===this.connectCounter){if(!m()){de&&de.dispose();return}!de&&!se&&ne()}},G=L.shift();if(!G){O(new E("Unable to connect (no available host)",80003,404));return}a.host=G;const ne=()=>{if(!L.length){O(new E("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){O(new P("Internal error: Http.checkConnectivity not set",null,500));return}me(this.realtime.http.checkConnectivity(),(se,de)=>{if(h===this.connectCounter&&m()){if(se){O(se);return}if(!de){O(new E("Unable to connect (network unreachable)",80003,404));return}a.host=ue(L),this.tryATransport(a,i,W)}})};if(this.forceFallbackHost&&L.length){this.forceFallbackHost=!1,ne();return}this.tryATransport(a,i,W)}closeImpl(){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(i,a){var u;switch(this.state.state){case"connected":{p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const h=(u=this.activeProtocol)==null?void 0:u.getTransport();h&&h.onAuthUpdated&&h.onAuthUpdated(i);const m=dn({action:ke.AUTH,auth:{accessToken:i.token}});this.send(m);const O=()=>{this.off(L),a(null,i)},L=W=>{W.current==="failed"&&(this.off(O),this.off(L),a(W.reason||this.getStateError()))};this.once("connectiondetails",O),this.on("connectionstate",L);break}case"connecting":p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const h=m=>{switch(m.current){case"connected":this.off(h),a(null,i);break;case"failed":case"closed":case"suspended":this.off(h),a(m.reason||this.getStateError());break}};this.on("connectionstate",h),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(i,a,u){u=u||Zl;const h=this.state;if(h.sendEvents){p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new Ql(i,u));return}if(!(a&&h.queueEvents)){const O="rejecting event, queueEvent was "+a+", state was "+h.state;p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.send()",O),u(this.errorReason||new E(O,9e4,400));return}this.logger.shouldLog(p.LOG_MICRO)&&p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+Ho(i,this.realtime._RealtimePresence)),this.queue(i,u)}sendImpl(i){const a=i.message;i.ackRequired&&!i.sendAttempted&&(a.msgSerial=this.msgSerial++);try{this.activeProtocol.send(i)}catch(u){p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+u.stack)}}queue(i,a){p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.queue()","queueing event");const u=this.queuedMessages.last(),h=this.options.maxMessageSize;u&&!u.sendAttempted&&Hy(u.message,i,h)?(u.merged||(u.callback=ko.create(this.logger,[u.callback]),u.merged=!0),u.callback.push(a)):this.queuedMessages.push(new Ql(i,a))}sendQueuedMessages(){p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let i;for(;i=this.queuedMessages.shift();)this.sendImpl(i)}queuePendingMessages(i){i&&i.length&&(p.logAction(this.logger,p.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+i.length+" pending messages"),this.queuedMessages.prepend(i))}failQueuedMessages(i){const a=this.queuedMessages.count();a>0&&(p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+a+" queued messages, err = "+H(i)),this.queuedMessages.completeAllMessages(i))}onChannelMessage(i,a){this.pendingChannelMessagesState.queue.push({message:i,transport:a}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const i=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(i.message).catch(a=>{p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",a)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(i){await this.realtime.channels.processChannelMessage(i)}async ping(){var i;if(this.state.state!=="connected")throw new E("Unable to ping service; not connected",4e4,400);const a=(i=this.activeProtocol)==null?void 0:i.getTransport();if(!a)throw this.getStateError();p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.ping()","transport = "+a);const u=Date.now(),h=oe();return fl(new Promise(m=>{const O=L=>{L===h&&(a.off("heartbeat",O),m(Date.now()-u))};a.on("heartbeat",O),a.ping(h)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(i){this.activeProtocol.getTransport().fail(i)}getTransportPreference(){var i,a;return this.transportPreference||jo()&&((a=(i=C.WebStorage)==null?void 0:i.get)==null?void 0:a.call(i,$o))}persistTransportPreference(i){var a,u;this.transportPreference=i.shortName,jo()&&((u=(a=C.WebStorage)==null?void 0:a.set)==null||u.call(a,$o,i.shortName))}unpersistTransportPreference(){var i,a;this.transportPreference=null,jo()&&((a=(i=C.WebStorage)==null?void 0:i.remove)==null||a.call(i,$o))}actOnErrorFromAuthorize(i){if(i.code===40171)this.notifyState({state:"failed",error:i});else if(i.code===40102)this.notifyState({state:"failed",error:i});else if(i.statusCode===mi.Forbidden){const a="Client configured authentication provider returned 403; failing the connection";p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",a),this.notifyState({state:"failed",error:new E(a,80019,403,i)})}else{const a="Client configured authentication provider request failed";p.logAction(this.logger,p.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",a),this.notifyState({state:this.state.failState,error:new E(a,80019,401,i)})}}onConnectionDetailsUpdate(i,a){if(!i)return;this.connectionDetails=i,i.maxMessageSize&&(this.options.maxMessageSize=i.maxMessageSize);const u=i.clientId;if(u){const m=this.realtime.auth._uncheckedSetClientId(u);if(m){p.logAction(this.logger,p.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",m.message),a.fail(m);return}}const h=i.connectionStateTtl;h&&(this.connectionStateTtl=h),this.maxIdleInterval=i.maxIdleInterval,this.emit("connectiondetails",i)}checkWsConnectivity(){const i=this.options.wsConnectivityCheckUrl||Te.wsConnectivityCheckUrl,a=new C.Config.WebSocket(i);return new Promise((u,h)=>{let m=!1;a.onopen=()=>{m||(m=!0,u(),a.close())},a.onclose=a.onerror=()=>{m||(m=!0,h())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var i,a;return fr()&&((a=(i=C.WebStorage)==null?void 0:i.getSession)==null?void 0:a.call(i,this.sessionRecoveryName()))}setSessionRecoverData(i){var a,u;return fr()&&((u=(a=C.WebStorage)==null?void 0:a.setSession)==null?void 0:u.call(a,this.sessionRecoveryName(),i))}clearSessionRecoverData(){var i,a;return fr()&&((a=(i=C.WebStorage)==null?void 0:i.removeSession)==null?void 0:a.call(i,this.sessionRecoveryName()))}},eu=jy,$y=class extends vt{constructor(s,i){super(s.logger),this.whenState=a=>vt.prototype.whenState.call(this,a,this.state),this.ably=s,this.connectionManager=new eu(s,i),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",a=>{const u=this.state=a.current;C.Config.nextTick(()=>{this.emit(u,a)})}),this.connectionManager.on("update",a=>{C.Config.nextTick(()=>{this.emit("update",a)})})}connect(){p.logAction(this.logger,p.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return p.logAction(this.logger,p.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){p.logAction(this.logger,p.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},Wy=$y,Vy=class{constructor(s,i,a,u,h){this.previous=s,this.current=i,i==="attached"&&(this.resumed=a,this.hasBacklog=u),h&&(this.reason=h)}},Vo=Vy,tu=function(){};function qy(s){if(s&&"params"in s&&!Ne(s.params))return new E("options.params must be an object",4e4,400);if(s&&"modes"in s){if(!Array.isArray(s.modes))return new E("options.modes must be an array",4e4,400);for(let i=0;i<s.modes.length;i++){const a=s.modes[i];if(!a||typeof a!="string"||!Pl.includes(String.prototype.toUpperCase.call(a)))return new E("Invalid channel mode: "+a,4e4,400)}}}var Ky=class bc extends vt{constructor(i,a,u){var h,m;super(i.logger),this.retryCount=0,this.history=async function(O){p.logAction(this.logger,p.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const L=this.client.rest.channelMixin;if(O&&O.untilAttach){if(this.state!=="attached")throw new E("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new E("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete O.untilAttach,O.from_serial=this.properties.attachSerial}return L.history(this,O)},this.whenState=O=>vt.prototype.whenState.call(this,O,this.state),p.logAction(this.logger,p.LOG_MINOR,"RealtimeChannel()","started; name = "+a),this.name=a,this.channelOptions=gi((h=i._Crypto)!=null?h:null,this.logger,u),this.client=i,this._presence=i._RealtimePresence?new i._RealtimePresence.RealtimePresence(this):null,this.connectionManager=i.connection.connectionManager,this.state="initialized",this.subscriptions=new vt(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(u),this.errorReason=null,this._mode=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:i.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new vt(this.logger),(m=i.options.plugins)!=null&&m.Push&&(this._push=new i.options.plugins.Push.PushChannel(this))}get presence(){return this._presence||Gt("RealtimePresence"),this._presence}get push(){return this._push||Gt("Push"),this._push}invalidStateError(){return new E("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(i){return i=Array.prototype.slice.call(i),typeof i[0]=="function"&&i.unshift(null),i}async setOptions(i){var a;const u=this.channelOptions,h=qy(i);if(h)throw h;if(this.channelOptions=gi((a=this.client._Crypto)!=null?a:null,this.logger,i),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(i,u))return this.attachImpl(),new Promise((m,O)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(L){switch(this.event){case"update":case"attached":m();break;default:O(L.reason)}})})}_shouldReattachToSetOptions(i,a){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(i!=null&&i.params){const u=nu(i.params),h=nu(a.params);if(Object.keys(u).length!==Object.keys(h).length||!cr(h,u))return!0}return!!(i!=null&&i.modes&&(!a.modes||!ul(i.modes,a.modes)))}async publish(...i){let a,u=i.length;if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(u==1)if(Ne(i[0]))a=[Hn.fromValues(i[0])];else if(Array.isArray(i[0]))a=Hn.fromValuesArray(i[0]);else throw new E("The single-argument form of publish() expects a message object or an array of message objects",40013,400);else a=[Hn.fromValues({name:i[0],data:i[1]})];const h=this.client.options.maxMessageSize,m=await jl(a,this.channelOptions),O=Do(m);if(O>h)throw new E("Maximum size of messages that can be published at once exceeded ( was "+O+" bytes; limit is "+h+" bytes)",40009,400);return new Promise((L,W)=>{this._publish(m,G=>G?W(G):L())})}_publish(i,a){p.logAction(this.logger,p.LOG_MICRO,"RealtimeChannel.publish()","message count = "+i.length);const u=this.state;switch(u){case"failed":case"suspended":a(E.fromValues(this.invalidStateError()));break;default:{p.logAction(this.logger,p.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+u);const h=new Yl;h.action=ke.MESSAGE,h.channel=this.name,h.messages=i,this.sendMessage(h,a);break}}}onEvent(i){p.logAction(this.logger,p.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const a=this.subscriptions;for(let u=0;u<i.length;u++){const h=i[u];a.emit(h.name,h)}}async attach(){return this.state==="attached"?null:new Promise((i,a)=>{this._attach(!1,null,(u,h)=>u?a(u):i(h))})}_attach(i,a,u){u||(u=m=>{m&&p.logAction(this.logger,p.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+m.toString())});const h=this.connectionManager;if(!h.activeState()){u(h.getError());return}(this.state!=="attaching"||i)&&this.requestState("attaching",a),this.once(function(m){switch(this.event){case"attached":u==null||u(null,m);break;case"detached":case"suspended":case"failed":u==null||u(m.reason||h.getError()||new E("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":u==null||u(new E("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){p.logAction(this.logger,p.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const i=dn({action:ke.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&i.encodeModesToFlags(ot(this.channelOptions.modes)),this._attachResume&&i.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(i.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(i,tu)}async detach(){const i=this.connectionManager;if(!i.activeState())throw i.getError();switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new E("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise((a,u)=>{this.once(function(h){switch(this.event){case"detached":a();break;case"attached":case"suspended":case"failed":u(h.reason||i.getError()||new E("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":u(new E("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(i){p.logAction(this.logger,p.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const a=dn({action:ke.DETACH,channel:this.name});this.sendMessage(a,i||tu)}async subscribe(...i){const[a,u]=bc.processListenerArgs(i);if(this.state==="failed")throw E.fromValues(this.invalidStateError());return a&&typeof a=="object"&&!Array.isArray(a)?this.client._FilteredSubscriptions.subscribeFilter(this,a,u):this.subscriptions.on(a,u),this.channelOptions.attachOnSubscribe!==!1?this.attach():null}unsubscribe(...i){var a;const[u,h]=bc.processListenerArgs(i);if(typeof u=="object"&&!h||(a=this.filteredSubscriptions)!=null&&a.has(h)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,u,h).forEach(m=>this.subscriptions.off(m));return}this.subscriptions.off(u,h)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new P("Unable to sync to channel; not attached",4e4)}const i=this.connectionManager;if(!i.activeState())throw i.getError();const a=dn({action:ke.SYNC,channel:this.name});this.syncChannelSerial&&(a.channelSerial=this.syncChannelSerial),i.send(a)}sendMessage(i,a){this.connectionManager.send(i,this.client.options.queueMessages,a)}sendPresence(i,a){const u=dn({action:ke.PRESENCE,channel:this.name,presence:i});this.sendMessage(u,a)}async processMessage(i){(i.action===ke.ATTACHED||i.action===ke.MESSAGE||i.action===ke.PRESENCE)&&this.setChannelSerial(i.channelSerial);let a,u=!1;switch(i.action){case ke.ATTACHED:{this.properties.attachSerial=i.channelSerial,this._mode=i.getMode(),this.params=i.params||{};const h=i.decodeModesFromFlags();this.modes=h&&at(h)||void 0;const m=i.hasFlag("RESUMED"),O=i.hasFlag("HAS_PRESENCE"),L=i.hasFlag("HAS_BACKLOG");if(this.state==="attached"){m||this._presence&&this._presence.onAttached(O);const W=new Vo(this.state,this.state,m,L,i.error);this._allChannelChanges.emit("update",W),(!m||this.channelOptions.updateOnAttached)&&this.emit("update",W)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",i.error,m,O,L);break}case ke.DETACHED:{const h=i.error?E.fromValues(i.error):new E("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",h):this.state==="attaching"?this.notifyState("suspended",h):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",h);break}case ke.SYNC:if(u=!0,a=this.syncChannelSerial=i.channelSerial,!i.presence)break;case ke.PRESENCE:{if(!i.presence)break;xl(i);const h=this.channelOptions;if(this._presence){const m=await Promise.all(i.presence.map(O=>O.decode(h,this.logger)));this._presence.setPresence(m,u,a)}break}case ke.MESSAGE:{if(this.state!=="attached"){p.logAction(this.logger,p.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+i.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}xl(i);const h=i.messages,m=h[0],O=h[h.length-1];if(m.extras&&m.extras.delta&&m.extras.delta.from!==this._lastPayload.messageId){const W='Delta message decode failure - previous message not available for message "'+i.id+'" on this channel "'+this.name+'".';p.logAction(this.logger,p.LOG_ERROR,"RealtimeChannel.processMessage()",W),this._startDecodeFailureRecovery(new E(W,40018,400));break}let L=[];for(let W=0;W<h.length;W++){const{decoded:G,err:ne}=await h[W].decodeWithErr(this._decodingContext,this.logger);if(L[W]=G,ne)switch(ne.code){case 40018:this._startDecodeFailureRecovery(ne);return;case 40019:case 40021:this.notifyState("failed",ne);return}}this._lastPayload.messageId=O.id,this._lastPayload.protocolMessageChannelSerial=i.channelSerial,this.onEvent(L);break}case ke.ERROR:{const h=i.error;h&&h.code==80016?this.checkPendingState():this.notifyState("failed",E.fromValues(h));break}default:p.logAction(this.logger,p.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+i.action+")")}}_startDecodeFailureRecovery(i){this._lastPayload.decodeFailureRecoveryInProgress||(p.logAction(this.logger,p.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,i,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){p.logAction(this.logger,p.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(i,a,u,h,m){if(p.logAction(this.logger,p.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+i),this.clearStateTimer(),["detached","suspended","failed"].includes(i)&&(this.properties.channelSerial=null),i===this.state)return;this._presence&&this._presence.actOnChannelState(i,h,a),i==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),a&&(this.errorReason=a);const O=new Vo(this.state,i,u,m,a),L='Channel state for channel "'+this.name+'"',W=i+(a?"; reason: "+a:"");i==="failed"?p.logAction(this.logger,p.LOG_ERROR,L,W):p.logAction(this.logger,p.LOG_MAJOR,L,W),i!=="attaching"&&i!=="suspended"&&(this.retryCount=0),i==="attached"&&this.onAttached(),i==="attached"?this._attachResume=!0:(i==="detaching"||i==="failed")&&(this._attachResume=!1),this.state=i,this._allChannelChanges.emit(i,O),this.emit(i,O)}requestState(i,a){p.logAction(this.logger,p.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+i),this.notifyState(i,a),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){p.logAction(this.logger,p.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(p.logAction(this.logger,p.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const i=new E("Channel attach timed out",90007,408);this.notifyState("suspended",i);break}case"detaching":{const i=new E("Channel detach timed out",90007,408);this.notifyState("attached",i);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{p.logAction(this.logger,p.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const i=this.stateTimer;i&&(clearTimeout(i),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const i=pt(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,p.logAction(this.logger,p.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},i)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const i=this.state;return i==="initialized"||i==="detached"||i==="failed"?null:new E("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+i,90001,400)}setChannelSerial(i){p.logAction(this.logger,p.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+i+"; previous = "+this.properties.channelSerial),i&&(this.properties.channelSerial=i)}async status(){return this.client.rest.channelMixin.status(this)}};function nu(s){const i=s||{},{agent:a}=i;return N(i,["agent"])}var qo=Ky,su=class pm extends Sl{constructor(i){var a,u;if(super(Te.objectifyOptions(i,!1,"BaseRealtime",p.defaultLogger)),p.logAction(this.logger,p.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new E(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=pm.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(u=(a=this.options.plugins)==null?void 0:a.RealtimePresence)!=null?u:null,this.connection=new Wy(this,this.options),this._channels=new Jy(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(i){const a={};return i!=null&&i.WebSocketTransport&&(a[Dt.WebSocket]=i.WebSocketTransport),i!=null&&i.XHRPolling&&(a[Dt.XhrPolling]=i.XHRPolling),a}get channels(){return this._channels}connect(){p.logAction(this.logger,p.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){p.logAction(this.logger,p.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};su.EventEmitter=vt;var zy=su,Jy=class extends vt{constructor(s){super(s.logger),this.realtime=s,this.all=Object.create(null),s.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let s={};for(const i of M(this.all,!0)){const a=this.all[i];a.properties.channelSerial&&(s[i]=a.properties.channelSerial)}return s}recoverChannels(s){for(const i of M(s,!0)){const a=this.get(i);a.properties.channelSerial=s[i]}}async processChannelMessage(s){const i=s.channel;if(i===void 0){p.logAction(this.logger,p.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+s.action);return}const a=this.all[i];if(!a){p.logAction(this.logger,p.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+i);return}await a.processMessage(s)}onTransportActive(){for(const s in this.all){const i=this.all[s];i.state==="attaching"||i.state==="detaching"?i.checkPendingState():i.state==="suspended"?i._attach(!1,null):i.state==="attached"&&i.requestState("attaching")}}propogateConnectionInterruption(s,i){const a={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},u=["attaching","attached","detaching","suspended"],h=a[s];for(const m in this.all){const O=this.all[m];u.includes(O.state)&&O.notifyState(h,i)}}get(s,i){s=String(s);let a=this.all[s];if(!a)a=this.all[s]=new qo(this.realtime,s,i);else if(i){if(a._shouldReattachToSetOptions(i,a.channelOptions))throw new E("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);a.setOptions(i)}return a}getDerived(s,i,a){if(i.filter){const u=hi(i.filter),h=ll(s);s=`[filter=${u}${h.qualifierParam}]${h.channelName}`}return this.get(s,a)}release(s){s=String(s);const i=this.all[s];if(!i)return;const a=i.getReleaseErr();if(a)throw a;delete this.all[s]}},Yy=zy;function Xy(s,i){if(s.isSynthesized()||i.isSynthesized())return s.timestamp>=i.timestamp;const a=s.parseId(),u=i.parseId();return a.msgSerial===u.msgSerial?a.index>u.index:a.msgSerial>u.msgSerial}var Ko=class extends vt{constructor(s,i,a=Xy){super(s.logger),this.presence=s,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=i,this.newerThan=a}get(s){return this.map[s]}getClient(s){const i=this.map,a=[];for(const u in i){const h=i[u];h.clientId==s&&h.action!="absent"&&a.push(h)}return a}list(s){const i=this.map,a=s&&s.clientId,u=s&&s.connectionId,h=[];for(const m in i){const O=i[m];O.action!=="absent"&&(a&&a!=O.clientId||u&&u!=O.connectionId||h.push(O))}return h}put(s){(s.action==="enter"||s.action==="update")&&(s=Bn.fromValues(s),s.action="present");const i=this.map,a=this.memberKey(s);this.residualMembers&&delete this.residualMembers[a];const u=i[a];return u&&!this.newerThan(s,u)?!1:(i[a]=s,!0)}values(){const s=this.map,i=[];for(const a in s){const u=s[a];u.action!="absent"&&i.push(u)}return i}remove(s){const i=this.map,a=this.memberKey(s),u=i[a];return u&&!this.newerThan(s,u)?!1:(this.syncInProgress?(s=Bn.fromValues(s),s.action="absent",i[a]=s):delete i[a],!!u)}startSync(){const s=this.map,i=this.syncInProgress;p.logAction(this.logger,p.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+i),this.syncInProgress||(this.residualMembers=X(s),this.setInProgress(!0))}endSync(){const s=this.map,i=this.syncInProgress;if(p.logAction(this.logger,p.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+i),i){for(const a in s)s[a].action==="absent"&&delete s[a];this.presence._synthesizeLeaves(A(this.residualMembers));for(const a in this.residualMembers)delete s[a];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(s){const i=this.syncInProgress;if(p.logAction(this.logger,p.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+i),!i){s();return}this.once("sync",s)}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(s){p.logAction(this.logger,p.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+s),this.syncInProgress=s,this.presence.syncComplete=!s}};function Qy(s){return s.channel.client.auth.clientId}function zo(s){const i=s.channel.client,a=i.auth.clientId;return(!a||a==="*")&&i.connection.state==="connected"}function Zy(s,i,a){switch(s.state){case"attached":case"suspended":a();break;case"initialized":case"detached":case"detaching":case"attaching":me(s.attach(),function(u){u?i(u):a()});break;default:i(E.fromValues(s.invalidStateError()))}}var e_=class extends vt{constructor(s){super(s.logger),this.channel=s,this.syncComplete=!1,this.members=new Ko(this,i=>i.clientId+":"+i.connectionId),this._myMembers=new Ko(this,i=>i.clientId),this.subscriptions=new vt(this.logger),this.pendingPresence=[]}async enter(s){if(zo(this))throw new E("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,s,"enter")}async update(s){if(zo(this))throw new E("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,s,"update")}async enterClient(s,i){return this._enterOrUpdateClient(void 0,s,i,"enter")}async updateClient(s,i){return this._enterOrUpdateClient(void 0,s,i,"update")}async _enterOrUpdateClient(s,i,a,u){const h=this.channel;if(!h.connectionManager.activeState())throw h.connectionManager.getError();p.logAction(this.logger,p.LOG_MICRO,"RealtimePresence."+u+"Client()","channel = "+h.name+", id = "+s+", client = "+(i||"(implicit) "+Qy(this)));const m=Bn.fromData(a);m.action=u,s&&(m.id=s),i&&(m.clientId=i);const O=await m.encode(h.channelOptions);switch(h.state){case"attached":return new Promise((L,W)=>{h.sendPresence([O],G=>G?W(G):L())});case"initialized":case"detached":h.attach();case"attaching":return new Promise((L,W)=>{this.pendingPresence.push({presence:O,callback:G=>G?W(G):L()})});default:{const L=new P("Unable to "+u+" presence channel while in "+h.state+" state",90001);throw L.code=90001,L}}}async leave(s){if(zo(this))throw new E("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,s)}async leaveClient(s,i){const a=this.channel;if(!a.connectionManager.activeState())throw a.connectionManager.getError();p.logAction(this.logger,p.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+s);const u=Bn.fromData(i);u.action="leave",s&&(u.clientId=s);const h=await u.encode(a.channelOptions);return new Promise((m,O)=>{switch(a.state){case"attached":a.sendPresence([h],L=>L?O(L):m());break;case"attaching":this.pendingPresence.push({presence:h,callback:L=>L?O(L):m()});break;case"initialized":case"failed":{const L=new P("Unable to leave presence channel (incompatible state)",90001);O(L);break}default:O(a.invalidStateError())}})}async get(s){const i=!s||("waitForSync"in s?s.waitForSync:!0);return new Promise((a,u)=>{function h(m){a(s?m.list(s):m.values())}if(this.channel.state==="suspended"){i?u(E.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):h(this.members);return}Zy(this.channel,m=>u(m),()=>{const m=this.members;i?m.waitSync(function(){h(m)}):h(m)})})}async history(s){p.logAction(this.logger,p.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const i=this.channel.client.rest.presenceMixin;if(s&&s.untilAttach)if(this.channel.state==="attached")delete s.untilAttach,s.from_serial=this.channel.properties.attachSerial;else throw new E("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return i.history(this,s)}setPresence(s,i,a){p.logAction(this.logger,p.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+s.length+" participants; syncChannelSerial = "+a);let u,h;const m=this.members,O=this._myMembers,L=[],W=this.channel.connectionManager.connectionId;i&&(this.members.startSync(),a&&(h=a.match(/^[\w-]+:(.*)$/))&&(u=h[1]));for(let G of s)switch(G.action){case"leave":m.remove(G)&&L.push(G),G.connectionId===W&&!G.isSynthesized()&&O.remove(G);break;case"enter":case"present":case"update":m.put(G)&&L.push(G),G.connectionId===W&&O.put(G);break}i&&!u&&(m.endSync(),this.channel.syncChannelSerial=null);for(let G=0;G<L.length;G++){const ne=L[G];this.subscriptions.emit(ne.action,ne)}}onAttached(s){p.logAction(this.logger,p.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+s),s?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const i=this.pendingPresence,a=i.length;if(a){this.pendingPresence=[];const u=[],h=ko.create(this.logger);p.logAction(this.logger,p.LOG_MICRO,"RealtimePresence.onAttached","sending "+a+" queued presence messages");for(let m=0;m<a;m++){const O=i[m];u.push(O.presence),h.push(O.callback)}this.channel.sendPresence(u,h)}}actOnChannelState(s,i,a){switch(s){case"attached":this.onAttached(i);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(a);break}}failPendingPresence(s){if(this.pendingPresence.length){p.logAction(this.logger,p.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+H(s));for(let i=0;i<this.pendingPresence.length;i++)try{this.pendingPresence[i].callback(s)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const s=this._myMembers,i=this.channel.connectionManager.connectionId;for(const a in s.map){const u=s.map[a];p.logAction(this.logger,p.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+u.clientId+'" into the presence set');const h=u.connectionId===i?u.id:void 0;this._enterOrUpdateClient(h,u.clientId,u.data,"enter").catch(m=>{const O=new E("Presence auto re-enter failed",91004,400,m);p.logAction(this.logger,p.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+H(m));const L=new Vo(this.channel.state,this.channel.state,!0,!1,O);this.channel.emit("update",L)})}}_synthesizeLeaves(s){const i=this.subscriptions;s.forEach(function(a){const u=Bn.fromValues({action:"leave",connectionId:a.connectionId,clientId:a.clientId,data:a.data,encoding:a.encoding,timestamp:Date.now()});i.emit("leave",u)})}async subscribe(...s){const i=qo.processListenerArgs(s),a=i[0],u=i[1],h=this.channel;if(h.state==="failed")throw E.fromValues(h.invalidStateError());this.subscriptions.on(a,u),h.channelOptions.attachOnSubscribe!==!1&&await h.attach()}unsubscribe(...s){const i=qo.processListenerArgs(s),a=i[0],u=i[1];this.subscriptions.off(a,u)}},t_=e_,n_=Dt.WebSocket;function s_(s){return!!s.on}var r_=class extends ks{constructor(s,i,a){super(s,i,a),this.shortName=n_,a.heartbeats=C.Config.useProtocolHeartbeats,this.wsHost=a.host}static isAvailable(){return!!C.Config.WebSocket}createWebSocket(s,i){return this.uri=s+ce(i),new C.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){p.logAction(this.logger,p.LOG_MINOR,"WebSocketTransport.connect()","starting"),ks.prototype.connect.call(this);const s=this,i=this.params,a=i.options,h=(a.tls?"wss://":"ws://")+this.wsHost+":"+Te.getPort(a)+"/";p.logAction(this.logger,p.LOG_MINOR,"WebSocketTransport.connect()","uri: "+h),me(this.auth.getAuthParams(),function(m,O){if(s.isDisposed)return;let L="";for(const G in O)L+=" "+G+": "+O[G]+";";if(p.logAction(s.logger,p.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+L+" err: "+m),m){s.disconnect(m);return}const W=i.getConnectParams(O);try{const G=s.wsConnection=s.createWebSocket(h,W);G.binaryType=C.Config.binaryType,G.onopen=function(){s.onWsOpen()},G.onclose=function(ne){s.onWsClose(ne)},G.onmessage=function(ne){s.onWsData(ne.data)},G.onerror=function(ne){s.onWsError(ne)},s_(G)&&G.on("ping",function(){s.onActivity()})}catch(G){p.logAction(s.logger,p.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(G.stack||G.message)),s.disconnect(G)}})}send(s){const i=this.wsConnection;if(!i){p.logAction(this.logger,p.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{i.send(Ry(s,this.connectionManager.realtime._MsgPack,this.params.format))}catch(a){const u="Exception from ws connection when trying to send: "+H(a);p.logAction(this.logger,p.LOG_ERROR,"WebSocketTransport.send()",u),this.finish("disconnected",new E(u,5e4,500))}}onWsData(s){p.logAction(this.logger,p.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+s.length+"; type = "+typeof s);try{this.onProtocolMessage(Ay(s,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.format))}catch(i){p.logAction(this.logger,p.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+i.stack)}}onWsOpen(){p.logAction(this.logger,p.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(s){let i,a;if(typeof s=="object"?(a=s.code,i=s.wasClean||a===1e3):(a=s,i=a==1e3),delete this.wsConnection,i){p.logAction(this.logger,p.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const u=new E("Websocket closed",80003,400);this.finish("disconnected",u)}else{const u="Unclean disconnection of WebSocket ; code = "+a,h=new E(u,80003,400);p.logAction(this.logger,p.LOG_MINOR,"WebSocketTransport.onWsClose()",u),this.finish("disconnected",h)}this.emit("disposed")}onWsError(s){p.logAction(this.logger,p.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+s.message),C.Config.nextTick(()=>{this.disconnect(Error(s.message))})}dispose(){p.logAction(this.logger,p.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const s=this.wsConnection;s&&(s.onmessage=function(){},delete this.wsConnection,C.Config.nextTick(()=>{if(p.logAction(this.logger,p.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!s)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");s.close()}))}},ru=r_,i_=class{static subscribeFilter(s,i,a){const u=h=>{var m,O,L,W,G,ne;const se={name:h.name,refTimeserial:(O=(m=h.extras)==null?void 0:m.ref)==null?void 0:O.timeserial,refType:(W=(L=h.extras)==null?void 0:L.ref)==null?void 0:W.type,isRef:!!((ne=(G=h.extras)==null?void 0:G.ref)!=null&&ne.timeserial),clientId:h.clientId};Object.entries(i).find(([de,ie])=>ie!==void 0?se[de]!==ie:!1)||a(h)};this.addFilteredSubscription(s,i,a,u),s.subscriptions.on(u)}static addFilteredSubscription(s,i,a,u){var h;if(s.filteredSubscriptions||(s.filteredSubscriptions=new Map),s.filteredSubscriptions.has(a)){const m=s.filteredSubscriptions.get(a);m.set(i,((h=m==null?void 0:m.get(i))==null?void 0:h.concat(u))||[u])}else s.filteredSubscriptions.set(a,new Map([[i,[u]]]))}static getAndDeleteFilteredSubscriptions(s,i,a){if(!s.filteredSubscriptions)return[];if(!a&&i)return Array.from(s.filteredSubscriptions.entries()).map(([m,O])=>{var L;let W=O.get(i);return O.delete(i),O.size===0&&((L=s.filteredSubscriptions)==null||L.delete(m)),W}).reduce((m,O)=>O?m.concat(...O):m,[]);if(!a||!s.filteredSubscriptions.has(a))return[];const u=s.filteredSubscriptions.get(a);if(!i){const m=Array.from(u.values()).reduce((O,L)=>O.concat(...L),[]);return s.filteredSubscriptions.delete(a),m}let h=u.get(i);return u.delete(i),h||[]}},gn=class vc extends Yy{constructor(i){var a;const u=vc._MsgPack;if(!u)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(Te.objectifyOptions(i,!0,"Realtime",p.defaultLogger,R(w({},ql),{Crypto:(a=vc.Crypto)!=null?a:void 0,MsgPack:u,RealtimePresence:{RealtimePresence:t_,PresenceMessage:Bn,WirePresenceMessage:lr},WebSocketTransport:ru,MessageInteractions:i_})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(i){this._Crypto=i}};gn.Utils=v,gn.ConnectionManager=eu,gn.ProtocolMessage=Yl,gn._Crypto=null,gn.Message=Kl,gn.PresenceMessage=zl,gn._MsgPack=null,gn._Http=No,gn._PresenceMap=Ko;var Jo=gn,Yo=Uint8Array,hr=Uint32Array,Xo=Math.pow,iu=new hr(8),ou=[],dr=new hr(64);function au(s){return(s-(s|0))*Xo(2,32)|0}for(var gr=2,pr=0;pr<64;){for(Qo=!0,vi=2;vi<=gr/2;vi++)gr%vi===0&&(Qo=!1);Qo&&(pr<8&&(iu[pr]=au(Xo(gr,1/2))),ou[pr]=au(Xo(gr,1/3)),pr++),gr++}var Qo,vi,o_=!!new Yo(new hr([1]).buffer)[0];function Zo(s){return o_?s>>>24|(s>>>16&255)<<8|(s&65280)<<8|s<<24:s}function pn(s,i){return s>>>i|s<<32-i}function ea(s){var i=iu.slice(),a=s.length,u=a*8,h=512-(u+64)%512-1+u+65,m=new Yo(h/8),O=new hr(m.buffer);m.set(s,0),m[a]=128,O[O.length-1]=Zo(u);for(var L,W=0;W<h/32;W+=16){var G=i.slice();for(L=0;L<64;L++){var ne;if(L<16)ne=Zo(O[W+L]);else{var se=dr[L-15],de=dr[L-2];ne=dr[L-7]+dr[L-16]+(pn(se,7)^pn(se,18)^se>>>3)+(pn(de,17)^pn(de,19)^de>>>10)}dr[L]=ne|=0;for(var ie=(pn(G[4],6)^pn(G[4],11)^pn(G[4],25))+(G[4]&G[5]^~G[4]&G[6])+G[7]+ne+ou[L],Ee=(pn(G[0],2)^pn(G[0],13)^pn(G[0],22))+(G[0]&G[1]^G[2]&(G[0]^G[1])),ye=7;ye>0;ye--)G[ye]=G[ye-1];G[0]=ie+Ee|0,G[4]=G[4]+ie|0}for(L=0;L<8;L++)i[L]=i[L]+G[L]|0}return new Yo(new hr(i.map(function(Oe){return Zo(Oe)})).buffer)}function a_(s,i){if(s.length>64&&(s=ea(s)),s.length<64){const L=new Uint8Array(64);L.set(s,0),s=L}for(var a=new Uint8Array(64),u=new Uint8Array(64),h=0;h<64;h++)a[h]=54^s[h],u[h]=92^s[h];var m=new Uint8Array(i.length+64);m.set(a,0),m.set(i,64);var O=new Uint8Array(96);return O.set(u,0),O.set(ea(m),64),ea(O)}var c_=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(s){let i="";const a=this.base64CharSet,u=s.byteLength,h=u%3,m=u-h;let O,L,W,G,ne;for(let se=0;se<m;se=se+3)ne=s[se]<<16|s[se+1]<<8|s[se+2],O=(ne&16515072)>>18,L=(ne&258048)>>12,W=(ne&4032)>>6,G=ne&63,i+=a[O]+a[L]+a[W]+a[G];return h==1?(ne=s[m],O=(ne&252)>>2,L=(ne&3)<<4,i+=a[O]+a[L]+"=="):h==2&&(ne=s[m]<<8|s[m+1],O=(ne&64512)>>10,L=(ne&1008)>>4,W=(ne&15)<<2,i+=a[O]+a[L]+a[W]+"="),i}base64ToArrayBuffer(s){const i=atob==null?void 0:atob(s),a=i.length,u=new Uint8Array(a);for(let h=0;h<a;h++){const m=i.charCodeAt(h);u[h]=m}return this.toArrayBuffer(u)}isBuffer(s){return s instanceof ArrayBuffer||ArrayBuffer.isView(s)}toBuffer(s){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(s instanceof ArrayBuffer)return new Uint8Array(s);if(ArrayBuffer.isView(s))return new Uint8Array(this.toArrayBuffer(s));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(s){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(s instanceof ArrayBuffer)return s;if(ArrayBuffer.isView(s))return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(s){return this.uint8ViewToBase64(this.toBuffer(s))}base64Decode(s){if(ArrayBuffer&&C.Config.atob)return this.base64ToArrayBuffer(s);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(s){return this.toBuffer(s).reduce((a,u)=>a+u.toString(16).padStart(2,"0"),"")}hexDecode(s){if(s.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const i=new Uint8Array(s.length/2);for(let a=0;a<i.length;a++)i[a]=parseInt(s.slice(2*a,2*(a+1)),16);return this.toArrayBuffer(i)}utf8Encode(s){if(C.Config.TextEncoder){const i=new C.Config.TextEncoder().encode(s);return this.toArrayBuffer(i)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(s){if(!this.isBuffer(s))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(s);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(s,i){if(!s||!i)return!1;const a=this.toArrayBuffer(s),u=this.toArrayBuffer(i);if(a.byteLength!=u.byteLength)return!1;const h=new Uint8Array(a),m=new Uint8Array(u);for(var O=0;O<h.length;O++)if(h[O]!=m[O])return!1;return!0}byteLength(s){return s instanceof ArrayBuffer||ArrayBuffer.isView(s)?s.byteLength:-1}arrayBufferViewToBuffer(s){return this.toArrayBuffer(s)}hmacSha256(s,i){const a=a_(this.toBuffer(i),this.toBuffer(s));return this.toArrayBuffer(a)}},cu=new c_,l_=function(s,i){var a="aes",u=256,h="cbc",m=16;function O(de){if(de.algorithm==="aes"&&de.mode==="cbc"){if(de.keyLength===128||de.keyLength===256)return;throw new Error("Unsupported key length "+de.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function L(de){return de.replace("_","/").replace("-","+")}function W(de){return de instanceof G}class G{constructor(ie,Ee,ye,Oe){this.algorithm=ie,this.keyLength=Ee,this.mode=ye,this.key=Oe}}class ne{static getDefaultParams(ie){var Ee;if(!ie.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof ie.key=="string"?Ee=i.toArrayBuffer(i.base64Decode(L(ie.key))):ie.key instanceof ArrayBuffer?Ee=ie.key:Ee=i.toArrayBuffer(ie.key);var ye=ie.algorithm||a,Oe=Ee.byteLength*8,Ue=ie.mode||h,We=new G(ye,Oe,Ue,Ee);if(ie.keyLength&&ie.keyLength!==We.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+ie.keyLength+" was specified, but the key actually has length "+We.keyLength);return O(We),We}static async generateRandomKey(ie){try{return s.getRandomArrayBuffer((ie||u)/8)}catch(Ee){throw new E("Failed to generate random key: "+Ee.message,400,5e4,Ee)}}static getCipher(ie,Ee){var ye,Oe=W(ie)?ie:this.getDefaultParams(ie);return{cipherParams:Oe,cipher:new se(Oe,(ye=ie.iv)!=null?ye:null,Ee)}}}ne.CipherParams=G;class se{constructor(ie,Ee,ye){if(this.logger=ye,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browser’s SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browser’s SubtleCrypto class is not available.");this.algorithm=ie.algorithm+"-"+String(ie.keyLength)+"-"+ie.mode,this.webCryptoAlgorithm=ie.algorithm+"-"+ie.mode,this.key=i.toArrayBuffer(ie.key),this.iv=Ee?i.toArrayBuffer(Ee):null}concat(ie,Ee){const ye=new ArrayBuffer(ie.byteLength+Ee.byteLength),Oe=new DataView(ye),Ue=new DataView(i.toArrayBuffer(ie));for(let Je=0;Je<Ue.byteLength;Je++)Oe.setInt8(Je,Ue.getInt8(Je));const We=new DataView(i.toArrayBuffer(Ee));for(let Je=0;Je<We.byteLength;Je++)Oe.setInt8(Ue.byteLength+Je,We.getInt8(Je));return ye}async encrypt(ie){p.logAction(this.logger,p.LOG_MICRO,"CBCCipher.encrypt()","");const Ee=await this.getIv(),ye=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),Oe=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:Ee},ye,ie);return this.concat(Ee,Oe)}async decrypt(ie){p.logAction(this.logger,p.LOG_MICRO,"CBCCipher.decrypt()","");const Ee=i.toArrayBuffer(ie),ye=Ee.slice(0,m),Oe=Ee.slice(m),Ue=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:ye},Ue,Oe)}async getIv(){if(this.iv){var ie=this.iv;return this.iv=null,ie}const Ee=await s.getRandomArrayBuffer(m);return i.toArrayBuffer(Ee)}}return ne},lu=(s=>(s[s.REQ_SEND=0]="REQ_SEND",s[s.REQ_RECV=1]="REQ_RECV",s[s.REQ_RECV_POLL=2]="REQ_RECV_POLL",s[s.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",s))(lu||{}),Rn=lu;function uu(){return new E("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var mr,fu=(mr=class{constructor(s){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var i;this.client=s??null;const a=(s==null?void 0:s.options.connectivityCheckUrl)||Te.connectivityCheckUrl,u=(i=s==null?void 0:s.options.connectivityCheckParams)!=null?i:null,h=!(s!=null&&s.options.connectivityCheckUrl),m=w(w({},fu.bundledRequestImplementations),s==null?void 0:s._additionalHTTPRequestImplementations),O=m.XHRRequest,L=m.FetchRequest,W=!!(O||L);if(!W)throw uu();C.Config.xhrSupported&&O?(this.supportsAuthHeaders=!0,this.Request=async function(G,ne,se,de,ie){return new Promise(Ee=>{var ye;const Oe=O.createRequest(ne,se,de,ie,Rn.REQ_SEND,(ye=s&&s.options.timeouts)!=null?ye:null,this.logger,G);Oe.once("complete",(Ue,We,Je,Re,jt)=>Ee({error:Ue,body:We,headers:Je,unpacked:Re,statusCode:jt})),Oe.exec()})},s!=null&&s.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var G;p.logAction(this.logger,p.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+a);const ne=await this.doUri(tt.Get,a,null,null,u);let se=!1;return h?se=!ne.error&&((G=ne.body)==null?void 0:G.replace(/\n/,""))=="yes":se=!ne.error&&km(ne.statusCode),p.logAction(this.logger,p.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+se),se}):C.Config.fetchSupported&&L?(this.supportsAuthHeaders=!0,this.Request=async(G,ne,se,de,ie)=>L(G,s??null,ne,se,de,ie),s!=null&&s.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var G;p.logAction(this.logger,p.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+a);const ne=await this.doUri(tt.Get,a,null,null,null),se=!ne.error&&((G=ne.body)==null?void 0:G.replace(/\n/,""))=="yes";return p.logAction(this.logger,p.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+se),se}):this.Request=async()=>({error:W?new P("no supported HTTP transports available",null,400):uu()})}get logger(){var s,i;return(i=(s=this.client)==null?void 0:s.logger)!=null?i:p.defaultLogger}async doUri(s,i,a,u,h){return this.Request?this.Request(s,i,a,h,u):{error:new P("Request invoked before assigned to",null,500)}}shouldFallback(s){const i=s.statusCode;return i===408&&!s.code||i===400&&!s.code||i>=500&&i<=504}},mr.methods=[tt.Get,tt.Delete,tt.Post,tt.Put,tt.Patch],mr.methodsWithoutBody=[tt.Get,tt.Delete],mr.methodsWithBody=[tt.Post,tt.Put,tt.Patch],mr),hu=fu,Ls="ablyjs-storage-test",Ms=typeof bn<"u"?bn:typeof window<"u"?window:self,u_=class{constructor(){try{Ms.sessionStorage.setItem(Ls,Ls),Ms.sessionStorage.removeItem(Ls),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{Ms.localStorage.setItem(Ls,Ls),Ms.localStorage.removeItem(Ls),this.localSupported=!0}catch{this.localSupported=!1}}get(s){return this._get(s,!1)}getSession(s){return this._get(s,!0)}remove(s){return this._remove(s,!1)}removeSession(s){return this._remove(s,!0)}set(s,i,a){return this._set(s,i,a,!1)}setSession(s,i,a){return this._set(s,i,a,!0)}_set(s,i,a,u){const h={value:i};return a&&(h.expires=Date.now()+a),this.storageInterface(u).setItem(s,JSON.stringify(h))}_get(s,i){if(i&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!i&&!this.localSupported)throw new Error("Local Storage not supported");const a=this.storageInterface(i).getItem(s);if(!a)return null;const u=JSON.parse(a);return u.expires&&u.expires<Date.now()?(this.storageInterface(i).removeItem(s),null):u.value}_remove(s,i){return this.storageInterface(i).removeItem(s)}storageInterface(s){return s?Ms.sessionStorage:Ms.localStorage}},du=new u_,nt=xt(),f_=typeof EdgeRuntime=="string";function h_(){const s=nt.location;return!nt.WebSocket||!s||!s.origin||s.origin.indexOf("http")>-1}function d_(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var g_=nt.navigator&&nt.navigator.userAgent.toString(),p_=nt.location&&nt.location.href,m_={agent:"browser",logTimestamps:!0,userAgent:g_,currentUrl:p_,binaryType:"arraybuffer",WebSocket:nt.WebSocket,fetchSupported:!!nt.fetch,xhrSupported:nt.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:h_(),useProtocolHeartbeats:!0,supportsBinary:!!nt.TextDecoder,preferBinary:!1,ArrayBuffer:nt.ArrayBuffer,atob:nt.atob,nextTick:typeof nt.setImmediate<"u"?nt.setImmediate.bind(nt):function(s){setTimeout(s,0)},addEventListener:nt.addEventListener,inspect:JSON.stringify,stringByteSize:function(s){return nt.TextDecoder&&new nt.TextEncoder().encode(s).length||s.length},TextEncoder:nt.TextEncoder,TextDecoder:nt.TextDecoder,getRandomArrayBuffer:async function(s){const i=new Uint8Array(s);return nt.crypto.getRandomValues(i),i.buffer},isWebworker:d_(),push:{platform:"browser",formFactor:"desktop",storage:du}},gu=m_;function y_(s){const i=[80015,80017,80030];return s.code?Sn.isTokenErr(s)?!1:i.includes(s.code)?!0:s.code>=4e4&&s.code<5e4:!1}function ta(s){return y_(s)?[dn({action:ke.ERROR,error:s})]:[dn({action:ke.DISCONNECTED,error:s})]}var __=class extends ks{constructor(s,i,a){super(s,i,a,!0),this.onAuthUpdated=u=>{this.authParams={access_token:u.token}},this.stream="stream"in a?a.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){p.logAction(this.logger,p.LOG_MINOR,"CometTransport.connect()","starting"),ks.prototype.connect.call(this);const s=this.params,i=s.options,a=Te.getHost(i,s.host),u=Te.getPort(i),h=i.tls?"https://":"http://";this.baseUri=h+a+":"+u+"/comet/";const m=this.baseUri+"connect";p.logAction(this.logger,p.LOG_MINOR,"CometTransport.connect()","uri: "+m),me(this.auth.getAuthParams(),(O,L)=>{if(O){this.disconnect(O);return}if(this.isDisposed)return;this.authParams=L;const W=this.params.getConnectParams(L);"stream"in W&&(this.stream=W.stream),p.logAction(this.logger,p.LOG_MINOR,"CometTransport.connect()","connectParams:"+ce(W));let G=!1;const ne=this.recvRequest=this.createRequest(m,null,W,null,this.stream?Rn.REQ_RECV_STREAM:Rn.REQ_RECV);ne.on("data",se=>{this.recvRequest&&(G||(G=!0,this.emit("preconnect")),this.onData(se))}),ne.on("complete",se=>{if(this.recvRequest||(se=se||new E("Request cancelled",80003,400)),this.recvRequest=null,!G&&!se&&(G=!0,this.emit("preconnect")),this.onActivity(),se){se.code?this.onData(ta(se)):this.disconnect(se);return}C.Config.nextTick(()=>{this.recv()})}),ne.exec()})}requestClose(){p.logAction(this.logger,p.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){p.logAction(this.logger,p.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(s){const i=s?this.closeUri:this.disconnectUri;if(i){const a=this.createRequest(i,null,this.authParams,null,Rn.REQ_SEND);a.on("complete",u=>{u&&(p.logAction(this.logger,p.LOG_ERROR,"CometTransport.request"+(s?"Close()":"Disconnect()"),"request returned err = "+H(u)),this.finish("disconnected",u))}),a.exec()}}dispose(){p.logAction(this.logger,p.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(p.logAction(this.logger,p.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",us.disconnected()),C.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(s){var i;if(this.isDisposed)return;const a=(i=s.connectionDetails)==null?void 0:i.connectionKey;ks.prototype.onConnect.call(this,s);const u=this.baseUri+a;p.logAction(this.logger,p.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+u),this.sendUri=u+"/send",this.recvUri=u+"/recv",this.closeUri=u+"/close",this.disconnectUri=u+"/disconnect"}send(s){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(s);return}const i=this.pendingItems||[];i.push(s),this.pendingItems=null,this.sendItems(i)}sendAnyPending(){const s=this.pendingItems;s&&(this.pendingItems=null,this.sendItems(s))}sendItems(s){const i=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(s),Rn.REQ_SEND);i.on("complete",(a,u)=>{if(a&&p.logAction(this.logger,p.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+H(a)),this.sendRequest=null,a){a.code?this.onData(ta(a)):this.disconnect(a);return}u&&this.onData(u),this.pendingItems&&C.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),i.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const s=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?Rn.REQ_RECV_STREAM:Rn.REQ_RECV_POLL);s.on("data",i=>{this.onData(i)}),s.on("complete",i=>{if(this.recvRequest=null,this.onActivity(),i){i.code?this.onData(ta(i)):this.disconnect(i);return}C.Config.nextTick(()=>{this.recv()})}),s.exec()}onData(s){try{const i=this.decodeResponse(s);if(i&&i.length)for(let a=0;a<i.length;a++)this.onProtocolMessage(Bo(i[a],this.connectionManager.realtime._RealtimePresence))}catch(i){p.logAction(this.logger,p.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+i.stack)}}encodeRequest(s){return JSON.stringify(s)}decodeResponse(s){return typeof s=="string"?JSON.parse(s):s}},b_=__;function v_(s,i){return at(M(i)).includes("x-ably-errorcode")}function E_(s,i){if(v_(s,i))return s.error&&E.fromValues(s.error)}var C_=function(){},O_=0,pu={};function w_(s,i){return s.getResponseHeader&&s.getResponseHeader(i)}function S_(s){return s.getResponseHeader&&(s.getResponseHeader("transfer-encoding")||!s.getResponseHeader("content-length"))}function T_(s){const i=s.getAllResponseHeaders().trim().split(`\r
`),a={};for(let u=0;u<i.length;u++){const h=i[u].split(":").map(m=>m.trim());a[h[0].toLowerCase()]=h[1]}return a}var R_=class mm extends vt{constructor(i,a,u,h,m,O,L,W){super(L),u=u||{},u.rnd=oe(),this.uri=i+ce(u),this.headers=a||{},this.body=h,this.method=W?W.toUpperCase():Me(h)?"GET":"POST",this.requestMode=m,this.timeouts=O,this.timedOut=!1,this.requestComplete=!1,this.id=String(++O_),pu[this.id]=this}static createRequest(i,a,u,h,m,O,L,W){const G=O||Te.TIMEOUTS;return new mm(i,a,X(u),h,m,G,L,W)}complete(i,a,u,h,m){this.requestComplete||(this.requestComplete=!0,!i&&a&&this.emit("data",a),this.emit("complete",i,a,u,h,m),this.dispose())}abort(){this.dispose()}exec(){let i=this.headers;const a=this.requestMode==Rn.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,u=this.timer=setTimeout(()=>{this.timedOut=!0,m.abort()},a),h=this.method,m=this.xhr=new XMLHttpRequest,O=i.accept;let L=this.body,W="text";O?O.indexOf("application/x-msgpack")===0&&(W="arraybuffer"):i.accept="application/json",L&&(i["content-type"]||(i["content-type"]="application/json")).indexOf("application/json")>-1&&typeof L!="string"&&(L=JSON.stringify(L)),m.open(h,this.uri,!0),m.responseType=W,"authorization"in i&&(m.withCredentials=!0);for(const Re in i)m.setRequestHeader(Re,i[Re]);const G=(Re,jt,Et,vr)=>{var Ns;let ia=jt+" (event type: "+Re.type+")";(Ns=this==null?void 0:this.xhr)!=null&&Ns.statusText&&(ia+=", current statusText is "+this.xhr.statusText),p.logAction(this.logger,p.LOG_ERROR,"Request.on"+Re.type+"()",ia),this.complete(new P(ia,Et,vr))};m.onerror=function(Re){G(Re,"XHR error occurred",null,400)},m.onabort=Re=>{this.timedOut?G(Re,"Request aborted due to request timeout expiring",null,408):G(Re,"Request cancelled",null,400)},m.ontimeout=function(Re){G(Re,"Request timed out",null,408)};let ne,se,de,ie=0,Ee=!1;const ye=()=>{if(clearTimeout(u),de=se<400,se==204){this.complete(null,null,null,null,se);return}ne=this.requestMode==Rn.REQ_RECV_STREAM&&de&&S_(m)},Oe=()=>{let Re;try{const Et=w_(m,"content-type");if(Et?Et.indexOf("application/json")>=0:m.responseType=="text"){const Ns=m.responseType==="arraybuffer"?C.BufferUtils.utf8Decode(m.response):String(m.responseText);Ns.length?Re=JSON.parse(Ns):Re=Ns,Ee=!0}else Re=m.response;Re.response!==void 0?(se=Re.statusCode,de=se<400,i=Re.headers,Re=Re.response):i=T_(m)}catch(Et){this.complete(new P("Malformed response body from server: "+Et.message,null,400));return}if(de||Array.isArray(Re)){this.complete(null,Re,i,Ee,se);return}let jt=E_(Re,i);jt||(jt=new P("Error response received from server: "+se+" body was: "+C.Config.inspect(Re),null,se)),this.complete(jt,Re,i,Ee,se)};function Ue(){const Re=m.responseText,jt=Re.length-1;let Et,vr;for(;ie<jt&&(Et=Re.indexOf(`
`,ie))>-1;)vr=Re.slice(ie,Et),ie=Et+1,We(vr)}const We=Re=>{try{Re=JSON.parse(Re)}catch(jt){this.complete(new P("Malformed response body from server: "+jt.message,null,400));return}this.emit("data",Re)},Je=()=>{Ue(),this.streamComplete=!0,C.Config.nextTick(()=>{this.complete()})};m.onreadystatechange=function(){const Re=m.readyState;Re<3||m.status!==0&&(se===void 0&&(se=m.status,ye()),Re==3&&ne?Ue():Re==4&&(ne?Je():Oe()))},m.send(L)}dispose(){const i=this.xhr;if(i){i.onreadystatechange=i.onerror=i.onabort=i.ontimeout=C_,this.xhr=null;const a=this.timer;a&&(clearTimeout(a),this.timer=null),this.requestComplete||i.abort()}delete pu[this.id]}},mu=R_,yu=Dt.XhrPolling,A_=class extends b_{constructor(s,i,a){super(s,i,a),this.shortName=yu,a.stream=!1,this.shortName=yu}static isAvailable(){return!!(C.Config.xhrSupported&&C.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(s,i,a,u,h){return mu.createRequest(s,i,a,u,h,this.timeouts,this.logger)}},I_=A_,P_=["xhr_polling"],k_={order:P_,bundledImplementations:{web_socket:ru,xhr_polling:I_}},L_=k_,M_={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[Dt.XhrPolling,Dt.WebSocket]},N_=M_;function x_(s){if(s===void 0)return"undefined";let i,a;if(s instanceof ArrayBuffer?(a="ArrayBuffer",i=new DataView(s)):s instanceof DataView&&(a="DataView",i=s),!i)return JSON.stringify(s);const u=[];for(let h=0;h<s.byteLength;h++){if(h>20){u.push("...");break}let m=i.getUint8(h).toString(16);m.length===1&&(m="0"+m),u.push(m)}return"<"+a+" "+u.join(" ")+">"}function yr(s,i,a){for(let u=0,h=a.length;u<h;u++){const m=a.charCodeAt(u);if(m<128){s.setUint8(i++,m>>>0&127|0);continue}if(m<2048){s.setUint8(i++,m>>>6&31|192),s.setUint8(i++,m>>>0&63|128);continue}if(m<65536){s.setUint8(i++,m>>>12&15|224),s.setUint8(i++,m>>>6&63|128),s.setUint8(i++,m>>>0&63|128);continue}if(m<1114112){s.setUint8(i++,m>>>18&7|240),s.setUint8(i++,m>>>12&63|128),s.setUint8(i++,m>>>6&63|128),s.setUint8(i++,m>>>0&63|128);continue}throw new Error("bad codepoint "+m)}}function _u(s,i,a){let u="";for(let h=i,m=i+a;h<m;h++){const O=s.getUint8(h);if(!(O&128)){u+=String.fromCharCode(O);continue}if((O&224)===192){u+=String.fromCharCode((O&15)<<6|s.getUint8(++h)&63);continue}if((O&240)===224){u+=String.fromCharCode((O&15)<<12|(s.getUint8(++h)&63)<<6|(s.getUint8(++h)&63)<<0);continue}if((O&248)===240){u+=String.fromCharCode((O&7)<<18|(s.getUint8(++h)&63)<<12|(s.getUint8(++h)&63)<<6|(s.getUint8(++h)&63)<<0);continue}throw new Error("Invalid byte "+O.toString(16))}return u}function na(s){let i=0;for(let a=0,u=s.length;a<u;a++){const h=s.charCodeAt(a);if(h<128){i+=1;continue}if(h<2048){i+=2;continue}if(h<65536){i+=3;continue}if(h<1114112){i+=4;continue}throw new Error("bad codepoint "+h)}return i}function D_(s,i){const a=br(s,i);if(a===0)return;const u=new ArrayBuffer(a),h=new DataView(u);return _r(s,h,0,i),u}var sa=65536*65536,bu=1/sa;function F_(s,i){return i=i||0,s.getInt32(i)*sa+s.getUint32(i+4)}function U_(s,i){return i=i||0,s.getUint32(i)*sa+s.getUint32(i+4)}function B_(s,i,a){a<9223372036854776e3?(s.setInt32(i,Math.floor(a*bu)),s.setInt32(i+4,a&-1)):(s.setUint32(i,2147483647),s.setUint32(i+4,2147483647))}function H_(s,i,a){a<18446744073709552e3?(s.setUint32(i,Math.floor(a*bu)),s.setInt32(i+4,a&-1)):(s.setUint32(i,4294967295),s.setUint32(i+4,4294967295))}var G_=class{constructor(s,i){this.map=a=>{const u={};for(let h=0;h<a;h++){const m=this.parse();u[m]=this.parse()}return u},this.bin=a=>{const u=new ArrayBuffer(a);return new Uint8Array(u).set(new Uint8Array(this.view.buffer,this.offset,a),0),this.offset+=a,u},this.buf=this.bin,this.str=a=>{const u=_u(this.view,this.offset,a);return this.offset+=a,u},this.array=a=>{const u=new Array(a);for(let h=0;h<a;h++)u[h]=this.parse();return u},this.ext=a=>(this.offset+=a,{type:this.view.getInt8(this.offset),data:this.buf(a)}),this.parse=()=>{const a=this.view.getUint8(this.offset);let u,h;if(!(a&128))return this.offset++,a;if((a&240)===128)return h=a&15,this.offset++,this.map(h);if((a&240)===144)return h=a&15,this.offset++,this.array(h);if((a&224)===160)return h=a&31,this.offset++,this.str(h);if((a&224)===224)return u=this.view.getInt8(this.offset),this.offset++,u;switch(a){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return h=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(h);case 197:return h=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(h);case 198:return h=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(h);case 199:return h=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(h);case 200:return h=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(h);case 201:return h=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(h);case 202:return u=this.view.getFloat32(this.offset+1),this.offset+=5,u;case 203:return u=this.view.getFloat64(this.offset+1),this.offset+=9,u;case 204:return u=this.view.getUint8(this.offset+1),this.offset+=2,u;case 205:return u=this.view.getUint16(this.offset+1),this.offset+=3,u;case 206:return u=this.view.getUint32(this.offset+1),this.offset+=5,u;case 207:return u=U_(this.view,this.offset+1),this.offset+=9,u;case 208:return u=this.view.getInt8(this.offset+1),this.offset+=2,u;case 209:return u=this.view.getInt16(this.offset+1),this.offset+=3,u;case 210:return u=this.view.getInt32(this.offset+1),this.offset+=5,u;case 211:return u=F_(this.view,this.offset+1),this.offset+=9,u;case 212:return h=1,this.offset++,this.ext(h);case 213:return h=2,this.offset++,this.ext(h);case 214:return h=4,this.offset++,this.ext(h);case 215:return h=8,this.offset++,this.ext(h);case 216:return h=16,this.offset++,this.ext(h);case 217:return h=this.view.getUint8(this.offset+1),this.offset+=2,this.str(h);case 218:return h=this.view.getUint16(this.offset+1),this.offset+=3,this.str(h);case 219:return h=this.view.getUint32(this.offset+1),this.offset+=5,this.str(h);case 220:return h=this.view.getUint16(this.offset+1),this.offset+=3,this.array(h);case 221:return h=this.view.getUint32(this.offset+1),this.offset+=5,this.array(h);case 222:return h=this.view.getUint16(this.offset+1),this.offset+=3,this.map(h);case 223:return h=this.view.getUint32(this.offset+1),this.offset+=5,this.map(h)}throw new Error("Unknown type 0x"+a.toString(16))},this.offset=i||0,this.view=s}};function j_(s){const i=new DataView(s),a=new G_(i),u=a.parse();if(a.offset!==s.byteLength)throw new Error(s.byteLength-a.offset+" trailing bytes");return u}function vu(s,i){return Object.keys(s).filter(function(a){const u=s[a],h=typeof u;return(!i||u!=null)&&(h!=="function"||!!u.toJSON)})}function _r(s,i,a,u){const h=typeof s;if(typeof s=="string"){const m=na(s);if(m<32)return i.setUint8(a,m|160),yr(i,a+1,s),1+m;if(m<256)return i.setUint8(a,217),i.setUint8(a+1,m),yr(i,a+2,s),2+m;if(m<65536)return i.setUint8(a,218),i.setUint16(a+1,m),yr(i,a+3,s),3+m;if(m<4294967296)return i.setUint8(a,219),i.setUint32(a+1,m),yr(i,a+5,s),5+m}if(ArrayBuffer.isView&&ArrayBuffer.isView(s)&&(s=s.buffer),s instanceof ArrayBuffer){const m=s.byteLength;if(m<256)return i.setUint8(a,196),i.setUint8(a+1,m),new Uint8Array(i.buffer).set(new Uint8Array(s),a+2),2+m;if(m<65536)return i.setUint8(a,197),i.setUint16(a+1,m),new Uint8Array(i.buffer).set(new Uint8Array(s),a+3),3+m;if(m<4294967296)return i.setUint8(a,198),i.setUint32(a+1,m),new Uint8Array(i.buffer).set(new Uint8Array(s),a+5),5+m}if(typeof s=="number"){if(Math.floor(s)!==s)return i.setUint8(a,203),i.setFloat64(a+1,s),9;if(s>=0){if(s<128)return i.setUint8(a,s),1;if(s<256)return i.setUint8(a,204),i.setUint8(a+1,s),2;if(s<65536)return i.setUint8(a,205),i.setUint16(a+1,s),3;if(s<4294967296)return i.setUint8(a,206),i.setUint32(a+1,s),5;if(s<18446744073709552e3)return i.setUint8(a,207),H_(i,a+1,s),9;throw new Error("Number too big 0x"+s.toString(16))}if(s>=-32)return i.setInt8(a,s),1;if(s>=-128)return i.setUint8(a,208),i.setInt8(a+1,s),2;if(s>=-32768)return i.setUint8(a,209),i.setInt16(a+1,s),3;if(s>=-2147483648)return i.setUint8(a,210),i.setInt32(a+1,s),5;if(s>=-9223372036854776e3)return i.setUint8(a,211),B_(i,a+1,s),9;throw new Error("Number too small -0x"+(-s).toString(16).substr(1))}if(h==="undefined")return u?0:(i.setUint8(a,212),i.setUint8(a+1,0),i.setUint8(a+2,0),3);if(s===null)return u?0:(i.setUint8(a,192),1);if(h==="boolean")return i.setUint8(a,s?195:194),1;if(typeof s.toJSON=="function")return _r(s.toJSON(),i,a,u);if(h==="object"){let m,O=0,L;const W=Array.isArray(s);if(W?m=s.length:(L=vu(s,u),m=L.length),m<16?(i.setUint8(a,m|(W?144:128)),O=1):m<65536?(i.setUint8(a,W?220:222),i.setUint16(a+1,m),O=3):m<4294967296&&(i.setUint8(a,W?221:223),i.setUint32(a+1,m),O=5),W)for(let G=0;G<m;G++)O+=_r(s[G],i,a+O,u);else if(L)for(let G=0;G<m;G++){const ne=L[G];O+=_r(ne,i,a+O),O+=_r(s[ne],i,a+O,u)}return O}if(h==="function")return 0;throw new Error("Unknown type "+h)}function br(s,i){const a=typeof s;if(a==="string"){const u=na(s);if(u<32)return 1+u;if(u<256)return 2+u;if(u<65536)return 3+u;if(u<4294967296)return 5+u}if(ArrayBuffer.isView&&ArrayBuffer.isView(s)&&(s=s.buffer),s instanceof ArrayBuffer){const u=s.byteLength;if(u<256)return 2+u;if(u<65536)return 3+u;if(u<4294967296)return 5+u}if(typeof s=="number"){if(Math.floor(s)!==s)return 9;if(s>=0){if(s<128)return 1;if(s<256)return 2;if(s<65536)return 3;if(s<4294967296)return 5;if(s<18446744073709552e3)return 9;throw new Error("Number too big 0x"+s.toString(16))}if(s>=-32)return 1;if(s>=-128)return 2;if(s>=-32768)return 3;if(s>=-2147483648)return 5;if(s>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+s.toString(16).substr(1))}if(a==="boolean")return 1;if(s===null)return i?0:1;if(s===void 0)return i?0:3;if(typeof s.toJSON=="function")return br(s.toJSON(),i);if(a==="object"){let u,h=0;if(Array.isArray(s)){u=s.length;for(let m=0;m<u;m++)h+=br(s[m],i)}else{const m=vu(s,i);u=m.length;for(let O=0;O<u;O++){const L=m[O];h+=br(L)+br(s[L],i)}}if(u<16)return 1+h;if(u<65536)return 3+h;if(u<4294967296)return 5+h;throw new Error("Array or object too long 0x"+u.toString(16))}if(a==="function")return 0;throw new Error("Unknown type "+a)}var ra={encode:D_,decode:j_,inspect:x_,utf8Write:yr,utf8Read:_u,utf8ByteCount:na};function $_(s,i){return!!i.get("x-ably-errorcode")}function W_(s,i){if($_(s,i))return s.error&&E.fromValues(s.error)}function V_(s){const i={};return s.forEach((a,u)=>{i[u]=a}),i}async function q_(s,i,a,u,h,m){const O=new Headers(u||{}),L=s?s.toUpperCase():Me(m)?"GET":"POST",W=new AbortController;let G;const ne=new Promise(ie=>{G=setTimeout(()=>{W.abort(),ie({error:new P("Request timed out",null,408)})},i?i.options.timeouts.httpRequestTimeout:Te.TIMEOUTS.httpRequestTimeout)}),se={method:L,headers:O,body:m,signal:W.signal};C.Config.isWebworker||(se.credentials=O.has("authorization")?"include":"same-origin");const de=(async()=>{try{const ie=new URLSearchParams(h||{});ie.set("rnd",oe());const Ee=a+"?"+ie,ye=await xt().fetch(Ee,se);if(clearTimeout(G),ye.status==204)return{error:null,statusCode:ye.status};const Oe=ye.headers.get("Content-Type");let Ue;Oe&&Oe.indexOf("application/x-msgpack")>-1?Ue=await ye.arrayBuffer():Oe&&Oe.indexOf("application/json")>-1?Ue=await ye.json():Ue=await ye.text();const We=!!Oe&&Oe.indexOf("application/x-msgpack")===-1,Je=V_(ye.headers);return ye.ok?{error:null,body:Ue,headers:Je,unpacked:We,statusCode:ye.status}:{error:W_(Ue,ye.headers)||new P("Error response received from server: "+ye.status+" body was: "+C.Config.inspect(Ue),null,ye.status),body:Ue,headers:Je,unpacked:We,statusCode:ye.status}}catch(ie){return clearTimeout(G),{error:ie}}})();return Promise.race([ne,de])}var K_={XHRRequest:mu,FetchRequest:q_},Eu=l_(gu,cu);C.Crypto=Eu,C.BufferUtils=cu,C.Http=hu,C.Config=gu,C.Transports=L_,C.WebStorage=du;for(const s of[Fo,Jo])s.Crypto=Eu,s._MsgPack=ra;hu.bundledRequestImplementations=K_,p.initLogHandlers(),C.Defaults=Im(N_),C.Config.agent&&(C.Defaults.agent+=" "+C.Config.agent);var z_={ErrorInfo:E,Rest:Fo,Realtime:Jo,msgpack:ra};if(typeof r.exports=="object"&&typeof n=="object"){var J_=(s,i,a,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let h of Object.getOwnPropertyNames(i))!Object.prototype.hasOwnProperty.call(s,h)&&h!==a&&Object.defineProperty(s,h,{get:()=>i[h],enumerable:!(u=Object.getOwnPropertyDescriptor(i,h))||u.enumerable});return s};r.exports=J_(r.exports,n)}return r.exports})})(um);var OR=um.exports;const Uh=lm(OR);var ym={exports:{}};const wR={},SR=Object.freeze(Object.defineProperty({__proto__:null,default:wR},Symbol.toStringTag,{value:"Module"})),Bh=CR(SR);/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.8.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(e){(function(){var t="input is invalid type",n="finalize already called",r=typeof window=="object",o=r?window:{};o.JS_MD5_NO_WINDOW&&(r=!1);var c=!r&&typeof self=="object",l=!o.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;l?o=bn:c&&(o=self);var f=!o.JS_MD5_NO_COMMON_JS&&!0&&e.exports,d=!o.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),y=[128,32768,8388608,-2147483648],_=[0,8,16,24],b=["hex","array","digest","buffer","arrayBuffer","base64"],w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),R=[],N;if(d){var F=new ArrayBuffer(68);N=new Uint8Array(F),R=new Uint32Array(F)}var U=Array.isArray;(o.JS_MD5_NO_NODE_JS||!U)&&(U=function(v){return Object.prototype.toString.call(v)==="[object Array]"});var q=ArrayBuffer.isView;d&&(o.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!q)&&(q=function(v){return typeof v=="object"&&v.buffer&&v.buffer.constructor===ArrayBuffer});var x=function(v){var I=typeof v;if(I==="string")return[v,!0];if(I!=="object"||v===null)throw new Error(t);if(d&&v.constructor===ArrayBuffer)return[new Uint8Array(v),!1];if(!U(v)&&!q(v))throw new Error(t);return[v,!1]},C=function(v){return function(I){return new D(!0).update(I)[v]()}},$=function(){var v=C("hex");l&&(v=B(v)),v.create=function(){return new D},v.update=function(P){return v.create().update(P)};for(var I=0;I<b.length;++I){var E=b[I];v[E]=C(E)}return v},B=function(v){var I=Bh,E=Bh.Buffer,P;E.from&&!o.JS_MD5_NO_BUFFER_FROM?P=E.from:P=function(j){return new E(j)};var ae=function(j){if(typeof j=="string")return I.createHash("md5").update(j,"utf8").digest("hex");if(j==null)throw new Error(t);return j.constructor===ArrayBuffer&&(j=new Uint8Array(j)),U(j)||q(j)||j.constructor===E?I.createHash("md5").update(P(j)).digest("hex"):v(j)};return ae},K=function(v){return function(I,E){return new le(I,!0).update(E)[v]()}},Y=function(){var v=K("hex");v.create=function(P){return new le(P)},v.update=function(P,ae){return v.create(P).update(ae)};for(var I=0;I<b.length;++I){var E=b[I];v[E]=K(E)}return v};function D(v){if(v)R[0]=R[16]=R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=0,this.blocks=R,this.buffer8=N;else if(d){var I=new ArrayBuffer(68);this.buffer8=new Uint8Array(I),this.blocks=new Uint32Array(I)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}D.prototype.update=function(v){if(this.finalized)throw new Error(n);var I=x(v);v=I[0];for(var E=I[1],P,ae=0,j,X=v.length,_e=this.blocks,Ne=this.buffer8;ae<X;){if(this.hashed&&(this.hashed=!1,_e[0]=_e[16],_e[16]=_e[1]=_e[2]=_e[3]=_e[4]=_e[5]=_e[6]=_e[7]=_e[8]=_e[9]=_e[10]=_e[11]=_e[12]=_e[13]=_e[14]=_e[15]=0),E)if(d)for(j=this.start;ae<X&&j<64;++ae)P=v.charCodeAt(ae),P<128?Ne[j++]=P:P<2048?(Ne[j++]=192|P>>>6,Ne[j++]=128|P&63):P<55296||P>=57344?(Ne[j++]=224|P>>>12,Ne[j++]=128|P>>>6&63,Ne[j++]=128|P&63):(P=65536+((P&1023)<<10|v.charCodeAt(++ae)&1023),Ne[j++]=240|P>>>18,Ne[j++]=128|P>>>12&63,Ne[j++]=128|P>>>6&63,Ne[j++]=128|P&63);else for(j=this.start;ae<X&&j<64;++ae)P=v.charCodeAt(ae),P<128?_e[j>>>2]|=P<<_[j++&3]:P<2048?(_e[j>>>2]|=(192|P>>>6)<<_[j++&3],_e[j>>>2]|=(128|P&63)<<_[j++&3]):P<55296||P>=57344?(_e[j>>>2]|=(224|P>>>12)<<_[j++&3],_e[j>>>2]|=(128|P>>>6&63)<<_[j++&3],_e[j>>>2]|=(128|P&63)<<_[j++&3]):(P=65536+((P&1023)<<10|v.charCodeAt(++ae)&1023),_e[j>>>2]|=(240|P>>>18)<<_[j++&3],_e[j>>>2]|=(128|P>>>12&63)<<_[j++&3],_e[j>>>2]|=(128|P>>>6&63)<<_[j++&3],_e[j>>>2]|=(128|P&63)<<_[j++&3]);else if(d)for(j=this.start;ae<X&&j<64;++ae)Ne[j++]=v[ae];else for(j=this.start;ae<X&&j<64;++ae)_e[j>>>2]|=v[ae]<<_[j++&3];this.lastByteIndex=j,this.bytes+=j-this.start,j>=64?(this.start=j-64,this.hash(),this.hashed=!0):this.start=j}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},D.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var v=this.blocks,I=this.lastByteIndex;v[I>>>2]|=y[I&3],I>=56&&(this.hashed||this.hash(),v[0]=v[16],v[16]=v[1]=v[2]=v[3]=v[4]=v[5]=v[6]=v[7]=v[8]=v[9]=v[10]=v[11]=v[12]=v[13]=v[14]=v[15]=0),v[14]=this.bytes<<3,v[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},D.prototype.hash=function(){var v,I,E,P,ae,j,X=this.blocks;this.first?(v=X[0]-680876937,v=(v<<7|v>>>25)-271733879<<0,P=(-1732584194^v&2004318071)+X[1]-117830708,P=(P<<12|P>>>20)+v<<0,E=(-271733879^P&(v^-271733879))+X[2]-1126478375,E=(E<<17|E>>>15)+P<<0,I=(v^E&(P^v))+X[3]-1316259209,I=(I<<22|I>>>10)+E<<0):(v=this.h0,I=this.h1,E=this.h2,P=this.h3,v+=(P^I&(E^P))+X[0]-680876936,v=(v<<7|v>>>25)+I<<0,P+=(E^v&(I^E))+X[1]-389564586,P=(P<<12|P>>>20)+v<<0,E+=(I^P&(v^I))+X[2]+606105819,E=(E<<17|E>>>15)+P<<0,I+=(v^E&(P^v))+X[3]-1044525330,I=(I<<22|I>>>10)+E<<0),v+=(P^I&(E^P))+X[4]-176418897,v=(v<<7|v>>>25)+I<<0,P+=(E^v&(I^E))+X[5]+1200080426,P=(P<<12|P>>>20)+v<<0,E+=(I^P&(v^I))+X[6]-1473231341,E=(E<<17|E>>>15)+P<<0,I+=(v^E&(P^v))+X[7]-45705983,I=(I<<22|I>>>10)+E<<0,v+=(P^I&(E^P))+X[8]+1770035416,v=(v<<7|v>>>25)+I<<0,P+=(E^v&(I^E))+X[9]-1958414417,P=(P<<12|P>>>20)+v<<0,E+=(I^P&(v^I))+X[10]-42063,E=(E<<17|E>>>15)+P<<0,I+=(v^E&(P^v))+X[11]-1990404162,I=(I<<22|I>>>10)+E<<0,v+=(P^I&(E^P))+X[12]+1804603682,v=(v<<7|v>>>25)+I<<0,P+=(E^v&(I^E))+X[13]-40341101,P=(P<<12|P>>>20)+v<<0,E+=(I^P&(v^I))+X[14]-1502002290,E=(E<<17|E>>>15)+P<<0,I+=(v^E&(P^v))+X[15]+1236535329,I=(I<<22|I>>>10)+E<<0,v+=(E^P&(I^E))+X[1]-165796510,v=(v<<5|v>>>27)+I<<0,P+=(I^E&(v^I))+X[6]-1069501632,P=(P<<9|P>>>23)+v<<0,E+=(v^I&(P^v))+X[11]+643717713,E=(E<<14|E>>>18)+P<<0,I+=(P^v&(E^P))+X[0]-373897302,I=(I<<20|I>>>12)+E<<0,v+=(E^P&(I^E))+X[5]-701558691,v=(v<<5|v>>>27)+I<<0,P+=(I^E&(v^I))+X[10]+38016083,P=(P<<9|P>>>23)+v<<0,E+=(v^I&(P^v))+X[15]-660478335,E=(E<<14|E>>>18)+P<<0,I+=(P^v&(E^P))+X[4]-405537848,I=(I<<20|I>>>12)+E<<0,v+=(E^P&(I^E))+X[9]+568446438,v=(v<<5|v>>>27)+I<<0,P+=(I^E&(v^I))+X[14]-1019803690,P=(P<<9|P>>>23)+v<<0,E+=(v^I&(P^v))+X[3]-187363961,E=(E<<14|E>>>18)+P<<0,I+=(P^v&(E^P))+X[8]+1163531501,I=(I<<20|I>>>12)+E<<0,v+=(E^P&(I^E))+X[13]-1444681467,v=(v<<5|v>>>27)+I<<0,P+=(I^E&(v^I))+X[2]-51403784,P=(P<<9|P>>>23)+v<<0,E+=(v^I&(P^v))+X[7]+1735328473,E=(E<<14|E>>>18)+P<<0,I+=(P^v&(E^P))+X[12]-1926607734,I=(I<<20|I>>>12)+E<<0,ae=I^E,v+=(ae^P)+X[5]-378558,v=(v<<4|v>>>28)+I<<0,P+=(ae^v)+X[8]-2022574463,P=(P<<11|P>>>21)+v<<0,j=P^v,E+=(j^I)+X[11]+1839030562,E=(E<<16|E>>>16)+P<<0,I+=(j^E)+X[14]-35309556,I=(I<<23|I>>>9)+E<<0,ae=I^E,v+=(ae^P)+X[1]-1530992060,v=(v<<4|v>>>28)+I<<0,P+=(ae^v)+X[4]+1272893353,P=(P<<11|P>>>21)+v<<0,j=P^v,E+=(j^I)+X[7]-155497632,E=(E<<16|E>>>16)+P<<0,I+=(j^E)+X[10]-1094730640,I=(I<<23|I>>>9)+E<<0,ae=I^E,v+=(ae^P)+X[13]+681279174,v=(v<<4|v>>>28)+I<<0,P+=(ae^v)+X[0]-358537222,P=(P<<11|P>>>21)+v<<0,j=P^v,E+=(j^I)+X[3]-722521979,E=(E<<16|E>>>16)+P<<0,I+=(j^E)+X[6]+76029189,I=(I<<23|I>>>9)+E<<0,ae=I^E,v+=(ae^P)+X[9]-640364487,v=(v<<4|v>>>28)+I<<0,P+=(ae^v)+X[12]-421815835,P=(P<<11|P>>>21)+v<<0,j=P^v,E+=(j^I)+X[15]+530742520,E=(E<<16|E>>>16)+P<<0,I+=(j^E)+X[2]-995338651,I=(I<<23|I>>>9)+E<<0,v+=(E^(I|~P))+X[0]-198630844,v=(v<<6|v>>>26)+I<<0,P+=(I^(v|~E))+X[7]+1126891415,P=(P<<10|P>>>22)+v<<0,E+=(v^(P|~I))+X[14]-1416354905,E=(E<<15|E>>>17)+P<<0,I+=(P^(E|~v))+X[5]-57434055,I=(I<<21|I>>>11)+E<<0,v+=(E^(I|~P))+X[12]+1700485571,v=(v<<6|v>>>26)+I<<0,P+=(I^(v|~E))+X[3]-1894986606,P=(P<<10|P>>>22)+v<<0,E+=(v^(P|~I))+X[10]-1051523,E=(E<<15|E>>>17)+P<<0,I+=(P^(E|~v))+X[1]-2054922799,I=(I<<21|I>>>11)+E<<0,v+=(E^(I|~P))+X[8]+1873313359,v=(v<<6|v>>>26)+I<<0,P+=(I^(v|~E))+X[15]-30611744,P=(P<<10|P>>>22)+v<<0,E+=(v^(P|~I))+X[6]-1560198380,E=(E<<15|E>>>17)+P<<0,I+=(P^(E|~v))+X[13]+1309151649,I=(I<<21|I>>>11)+E<<0,v+=(E^(I|~P))+X[4]-145523070,v=(v<<6|v>>>26)+I<<0,P+=(I^(v|~E))+X[11]-1120210379,P=(P<<10|P>>>22)+v<<0,E+=(v^(P|~I))+X[2]+718787259,E=(E<<15|E>>>17)+P<<0,I+=(P^(E|~v))+X[9]-343485551,I=(I<<21|I>>>11)+E<<0,this.first?(this.h0=v+1732584193<<0,this.h1=I-271733879<<0,this.h2=E-1732584194<<0,this.h3=P+271733878<<0,this.first=!1):(this.h0=this.h0+v<<0,this.h1=this.h1+I<<0,this.h2=this.h2+E<<0,this.h3=this.h3+P<<0)},D.prototype.hex=function(){this.finalize();var v=this.h0,I=this.h1,E=this.h2,P=this.h3;return g[v>>>4&15]+g[v&15]+g[v>>>12&15]+g[v>>>8&15]+g[v>>>20&15]+g[v>>>16&15]+g[v>>>28&15]+g[v>>>24&15]+g[I>>>4&15]+g[I&15]+g[I>>>12&15]+g[I>>>8&15]+g[I>>>20&15]+g[I>>>16&15]+g[I>>>28&15]+g[I>>>24&15]+g[E>>>4&15]+g[E&15]+g[E>>>12&15]+g[E>>>8&15]+g[E>>>20&15]+g[E>>>16&15]+g[E>>>28&15]+g[E>>>24&15]+g[P>>>4&15]+g[P&15]+g[P>>>12&15]+g[P>>>8&15]+g[P>>>20&15]+g[P>>>16&15]+g[P>>>28&15]+g[P>>>24&15]},D.prototype.toString=D.prototype.hex,D.prototype.digest=function(){this.finalize();var v=this.h0,I=this.h1,E=this.h2,P=this.h3;return[v&255,v>>>8&255,v>>>16&255,v>>>24&255,I&255,I>>>8&255,I>>>16&255,I>>>24&255,E&255,E>>>8&255,E>>>16&255,E>>>24&255,P&255,P>>>8&255,P>>>16&255,P>>>24&255]},D.prototype.array=D.prototype.digest,D.prototype.arrayBuffer=function(){this.finalize();var v=new ArrayBuffer(16),I=new Uint32Array(v);return I[0]=this.h0,I[1]=this.h1,I[2]=this.h2,I[3]=this.h3,v},D.prototype.buffer=D.prototype.arrayBuffer,D.prototype.base64=function(){for(var v,I,E,P="",ae=this.array(),j=0;j<15;)v=ae[j++],I=ae[j++],E=ae[j++],P+=w[v>>>2]+w[(v<<4|I>>>4)&63]+w[(I<<2|E>>>6)&63]+w[E&63];return v=ae[j],P+=w[v>>>2]+w[v<<4&63]+"==",P};function le(v,I){var E,P=x(v);if(v=P[0],P[1]){var ae=[],j=v.length,X=0,_e;for(E=0;E<j;++E)_e=v.charCodeAt(E),_e<128?ae[X++]=_e:_e<2048?(ae[X++]=192|_e>>>6,ae[X++]=128|_e&63):_e<55296||_e>=57344?(ae[X++]=224|_e>>>12,ae[X++]=128|_e>>>6&63,ae[X++]=128|_e&63):(_e=65536+((_e&1023)<<10|v.charCodeAt(++E)&1023),ae[X++]=240|_e>>>18,ae[X++]=128|_e>>>12&63,ae[X++]=128|_e>>>6&63,ae[X++]=128|_e&63);v=ae}v.length>64&&(v=new D(!0).update(v).array());var Ne=[],qe=[];for(E=0;E<64;++E){var Me=v[E]||0;Ne[E]=92^Me,qe[E]=54^Me}D.call(this,I),this.update(qe),this.oKeyPad=Ne,this.inner=!0,this.sharedMemory=I}le.prototype=new D,le.prototype.finalize=function(){if(D.prototype.finalize.call(this),this.inner){this.inner=!1;var v=this.array();D.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(v),D.prototype.finalize.call(this)}};var p=$();p.md5=p,p.md5.hmac=Y(),f?e.exports=p:o.md5=p})()})(ym);var TR=ym.exports;const vA=lm(TR);function RR(){const e=Fh(),{orderNo:t,merchantCode:n,delayQueryTime:r,timestamp:o,sign:c}=hp(),l=t&&n&&o&&c;let f=null,d=null,g=null,y=null;async function _(){l?(sessionStorage.setItem("payStoreSuccessState",""),e.changeState("WAIT_GRAB"),w(),R(),N(),await B(),U(999)):bR({title:Qn.t("warmPrompt"),message:Qn.t("accessAuthTip"),showConfirmButton:!1})}function b(K){return K.length,K.slice(-9).slice(0,4)}async function w(){g=new Uh.Realtime("uMZVHQ._AYk1Q:yxMWcdexWjHT93xClRC8FxvqGU0UmxaEv7A-mFvb_6U"),g.connection.on("connected",()=>{}),g.channels.get(`foo:orderInGrabSuccessCashDeskChannel_${n}`).subscribe(async Y=>{const{msgType:D,data:le}=Y.data;D==="CASH_DESK"&&(le==null?void 0:le.orderNo)===t&&(x(),await B(),e.rushOrderingState||$("监听ably推送后垃圾回收"))})}async function R(){y=new Uh.Realtime("uMZVHQ._AYk1Q:yxMWcdexWjHT93xClRC8FxvqGU0UmxaEv7A-mFvb_6U"),y.connection.on("connected",()=>{}),y.channels.get(`foo:orderInPayResultCashDeskChannel_${n}_${b(t)}`).subscribe(async Y=>{const{msgType:D,data:le}=Y.data;D==="CASH_DESK"&&le.orderNo===t&&(Fh().changeState(le.status),C())})}function N(){const K=Number(r)*2;f=setTimeout(()=>{e.changeState("LOCAL_TIMEOUT")},K)}function F(){f&&(clearTimeout(f),f=null)}function U(K){d=setInterval(async()=>{if(K--,!e.timeoutState)await B();else{q();return}e.rushOrderingState||q(),e.rushOrderingState||$("轮询查单后垃圾回收"),K===0&&$("倒计时结束后垃圾回收")},3e3)}function q(){d&&(clearTimeout(d),d=null)}function x(){g&&(g.connection.off("connected"),g.close(),g=null)}function C(){y&&(y.connection.off("connected"),y.close(),y=null)}function $(K){F(),q(),x()}function B(){return e.getOrderInfo({orderNo:t,merchantCode:n,timestamp:o,sign:c})}return{getOrderInfo:B,initOrderInfo:_}}const AR={__name:"App",setup(e){const t=_p(),{initOrderInfo:n,getOrderInfo:r}=RR();return["/createOrder","/notification"].some(c=>window.location.pathname.includes(c))||n(),dt(()=>t.language,()=>{r()}),(c,l)=>on(t).isRouteAlive?(zi(),Ji(on(Hg),{key:0})):L0("",!0)}},IR="modulepreload",PR=function(e){return"/"+e},Hh={},_m=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),f=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(n.map(d=>{if(d=PR(d),d in Hh)return;Hh[d]=!0;const g=d.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":IR,g||(_.as="script"),_.crossOrigin="",_.href=d,f&&_.setAttribute("nonce",f),document.head.appendChild(_),g)return new Promise((b,w)=>{_.addEventListener("load",b),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function c(l){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l}return o.then(l=>{for(const f of l||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},kR=()=>_m(()=>import("./Index-BIP3rPrg.js"),__vite__mapDeps([0,1,2])),LR=()=>_m(()=>import("./CreateOrderView-D-P6s3jr.js"),__vite__mapDeps([3,1,4])),MR=AE({history:rE("/"),routes:[{path:"/",name:"home",component:kR},{path:"/createOrder",name:"createOrder",component:LR,meta:{whiteList:!0}}]}),Io=Eg(AR);Io.use(Cv());Io.use(MR);Io.use(Qn);Io.mount("#app");export{ts as $,Sc as A,Ji as B,He as C,Ts as D,XO as E,mt as F,$R as G,sr as H,JR as I,Ht as J,Ut as K,et as L,Fc as M,GR as N,hd as O,Yh as P,fb as Q,Zn as R,Ze as S,ze as T,je as U,WR as V,Ae as W,Js as X,Jt as Y,nn as Z,UR as _,gA as a,NR as a0,HR as a1,BR as a2,$b as a3,DR as a4,KR as a5,ho as a6,Sd as a7,mg as a8,hg as a9,oi as aa,On as ab,Ce as ac,Ys as ad,qR as ae,Mb as af,oo as ag,ci as ah,FR as ai,xd as aj,VR as ak,_v as al,Eg as am,rs as an,fd as ao,zR as ap,xR as aq,Dc as ar,Fe as as,_A as at,vA as au,rt as av,bA as aw,$e as b,fn as c,Mt as d,ol as e,ve as f,wn as g,lm as h,bn as i,Qn as j,Fh as k,jR as l,wt as m,ig as n,zi as o,mA as p,L0 as q,on as r,hR as s,tn as t,pA as u,ub as v,dt as w,Ed as x,k0 as y,Tc as z};
